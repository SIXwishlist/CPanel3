/* 
 * manage combined
 */

try{

    /*! config */
    var g_request_url="./ajax.php";var g_template_url="./template.php";var g_countries=[];var g_index=0;var g_count=10;var g_search_object={};var STATUS_ICON_TRUE=1;var STATUS_ICON_FALSE=-1;var STATUS_ICON_INFO=1;var GENDER_MALE=1;var GENDER_FEMALE=2;var GENDER_ANY=3;var SOURCE_LIST=1;var SOURCE_SEARCH=2;var VERIFIED=1;var SERVER_ERROR=0;var NOT_VERIFIED=-1;var NOT_EXIST=-2;var CODE_ERROR=-3;var BLOCKED=-4;var INPUT_ERROR=-5;var REQUEST_NOT_FOUND=-10;var g_loading_div='<div id="loading-container"><i class="fa fa-spin fa-refresh     fa-3x fa-fw"></i></div>';var USER_TYPE_MASTER=1;var USER_TYPE_ORG=2;var USER_TYPE_CHECKER=3;var USER_TYPE_ENTRY=4;var USER_TYPE_INACTIVE=0;var USER_TYPE_ACTIVE=1;var USER_TYPE_BLOCKED=2;var USER_TYPE_DELETED=3;var ORG_STATUS_HOLD=0;var ORG_STATUS_EXPIRED=1;var ORG_STATUS_TRIAL=2;var ORG_STATUS_ACTIVE=3;var ORG_TYPE_UNKNOWN=0;var ORG_TYPE_UNIVERSITY=1;var ORG_TYPE_COLLAGE=2;var ORG_TYPE_INSTITUTE=3;var ORG_TYPE_TRAINING=4;var ORG_TYPE_SCHOOL=5;var ORG_TYPE_OTHER=6;var ORG_LOGO_WIDTH=200;var ORG_LOGO_HEIGHT=200;var CAPATCHA_TRIALS=2;var REQUEST_NOT_FOUND=-10;var CAPATCHA_REQUIRED=-11;var CAPATCHA_INCORRECT=-12;var SERVER_ERROR=-20;var USER_NOT_EXIST=-21;var ACCOUNT_EXPIRED=-22;

    /*! common */
    function reload_captcha(){var b=$("img[id=captcha]");var a=Math.floor(Math.random()*1000);b.replaceWith('<img id="captcha" src="'+g_root_url+"captcha.php?seqId="+a+'" alt="captcha text" />')}Date.prototype.getFormatted=function(){var c=this.getFullYear().toString();var b=(this.getMonth()+1).toString();var a=this.getDate().toString();return c+"-"+(b[1]?b:"0"+b[0])+"-"+(a[1]?a:"0"+a[0])};

    /*! boot */
    $(document).ready(function(){try{$("body").bind(AdminAuth.LOGIN_LOADED,HomeDisplay.update_top_menu);$("body").bind("dictionary-loaded",AdminAuth.check_login);CDictionary.init();CDictionary.load();CDictionary.set_lang(lang);CPopup.set_options({theme:"default"})}catch(a){console.error("Error in boot main :["+a+"]")}});function HomeDisplay(){}HomeDisplay.update_top_menu=function(){try{var d=$("#head").find("#top-menu");var a="";var b=AdminAuth.admin_id;if(b>0){a='<a href="'+UrlUtil.get_manage_url()+'" onclick=""><i class="fa fa-home" aria-hidden="true"></i> '+CDictionary.get_text("Home_lbl")+'</a><a href="'+UrlUtil.get_manage_url()+'" onclick=""><i class="fa fa-user" aria-hidden="true"></i> '+CDictionary.get_text("Account_lbl")+'</a><a href="#" onclick="AdminAuth.logout();        AuthUtil.highlight_button(this); return false;"><i class="fa fa-sign-out" aria-hidden="true"></i> '+CDictionary.get_text("Logout_lbl")+"</a>"}else{a='<a href="'+UrlUtil.get_manage_url()+'" onclick=""><i class="fa fa-home" aria-hidden="true"></i> '+CDictionary.get_text("Home_lbl")+'</a><a href="'+UrlUtil.get_manage_url()+'" onclick=""><i class="fa fa-user" aria-hidden="true"></i> '+CDictionary.get_text("Login_lbl")+"</a>"}d.html(a)}catch(c){console.error("Error in : HomeDisplay - update menu :["+c+"]")}};

    /*! utils */
    function ErrorUtil(){}ErrorUtil.get_common_messages=function(a){var e={};var f="";var d="";try{switch(a){case REQUEST_NOT_FOUND:f=CDictionary.get_text("CommonError_RequestNotFound_Title_lbl");d=CDictionary.get_text("CommonError_RequestNotFound_Message_lbl");break;case CAPATCHA_REQUIRED:f=CDictionary.get_text("CommonError_CapatchaRequired_Title_lbl");d=CDictionary.get_text("CommonError_CapatchaRequired_Message_lbl");break;case CAPATCHA_INCORRECT:f=CDictionary.get_text("CommonError_CapatchaIncorrect_Title_lbl");d=CDictionary.get_text("CommonError_CapatchaIncorrect_Message_lbl");break;case SERVER_ERROR:f=CDictionary.get_text("CommonError_ServerError_Title_lbl");d=CDictionary.get_text("CommonError_ServerError_Message_lbl");break;default:break}var b="error";e.title=f;e.message=d;e.type=b}catch(c){console.error("Error in : AdminAuth - callback :["+c+"]")}return e};function TplUtil(){}TplUtil.get_hidden_div=function(c,a){var b=null;try{b=$("body").find("#hidden").find("."+c).clone().removeClass(c);if(a){CForm.apply_custom_settings(b)}}catch(d){console.error("Error in : TplUtil - get form div :["+d+"]")}return b};function UrlUtil(){}UrlUtil.get_home_url=function(c){var a="";try{a=g_base_url}catch(b){console.error("Error in : UrlUtil - get home url :["+b+"]")}return a};UrlUtil.get_about_url=function(c){var a="";try{a=g_base_url+(CDictionary.get_text("About_lbl")).toLowerCase()}catch(b){console.error("Error in : UrlUtil - get about url :["+b+"]")}return a};UrlUtil.get_manage_url=function(c){var a="";try{a=g_base_url+(CDictionary.get_text("Manage_lbl")).toLowerCase()}catch(b){console.error("Error in : UrlUtil - get manage url :["+b+"]")}return a};UrlUtil.get_login_url=function(c){var a="";try{a=g_base_url+(CDictionary.get_text("Login_lbl")).toLowerCase()}catch(b){console.error("Error in : UrlUtil - get login url :["+b+"]")}return a};UrlUtil.get_signup_url=function(c){var a="";try{a=g_base_url+(CDictionary.get_text("SignUp_lbl")).toLowerCase().replace(/ /g,"-")}catch(b){console.error("Error in : UrlUtil - get signup url :["+b+"]")}return a};

    /*! auth */
    var gYes="";var gNo="";$(document).ready(function(){try{$("body").bind(AdminAuth.LOGIN_LOADED,AccountModule.display_module)}catch(a){console.error("Error in auth main :["+a+"]")}});function AdminAuth(){}AdminAuth.LOGIN_LOADED="ADMIN_AUTH__LOGIN_LOADED";AdminAuth.check_login=function(){try{var c=$("#head").find("#top-menu");var b="action=check_login";RequestUtil.quick_post_request(c,b,function(e){try{var d=e.status;if(d>0){AdminAuth.set_login_vars(e)}$("body").trigger(AdminAuth.LOGIN_LOADED)}catch(f){console.error("error in request :["+f+"]")}});gYes=CDictionary.get_text("Yes_lbl");gNo=CDictionary.get_text("No_lbl")}catch(a){console.error("Error in : AdminAuth - check login :["+a+"]")}};AdminAuth.get_form_properties=function(){try{var a="admin";var c={name:a,params:[{name:"username",type:"text",label:'<i class="fa fa-user" aria-hidden="true"></i> '+CDictionary.get_text("LoginForm_Username_lbl")+" :"},{name:"password",type:"password",label:'<i class="fa fa-lock" aria-hidden="true"></i> '+CDictionary.get_text("LoginForm_Password_lbl")+" :"},{type:"separator",label:""},{type:"clear",label:""},{name:"remember",type:"checkbox",label:CDictionary.get_text("LoginForm_Remeber_lbl")},{type:"separator",label:""},{name:"",label:"",type:"custom",value:'<div class="note">Forget password...<a href="#" onclick="ForgetForm.show_form(); return false;">click here</a></div>'}],action:"",method:"post",enctype:"application/x-www-form-urlencoded",style:"style1 centered-form"};var d=new CForm(c)}catch(b){console.error("Error in : AdminAuth - get admin login form properties :["+b+"]")}return d};AdminAuth.show_form=function(){try{var e=$("#body").find("#title");var f=$("#body").find("#content");var a=$("#body").find("#menu");a.hide();a.html("");e.show().html("Sign in to your account");f.html("");var b=AdminAuth.get_form_properties().get_form_div();var c={cont_div:f,form_div:b,form_action:g_request_url+"?action=authenticate",complete_callback:AdminAuth.callback,prepare_func:null,post_func:null,post_args:null,validate_func:AdminAuth.validate,validate_notes_func:AdminAuth.validate_notes,animated:true};CMSUtil.create_form(c);AdminAuth.form_div=b}catch(d){console.error("Error in : AdminAuth - show login form :["+d+"]")}};AdminAuth.callback=function(c){try{var h="";var f="";var d="";var b=AdminAuth.form_div;var a=c.status;if(a>0){h=CDictionary.get_text("LoginCallback_Success_Title_lbl");f=CDictionary.get_text("LoginCallback_Success_Message_lbl");d="success"}else{switch(a){case USER_NOT_EXIST:h=CDictionary.get_text("LoginCallback_UserNotExist_Title_lbl");f=CDictionary.get_text("LoginCallback_UserNotExist_Message_lbl");break;case ACCOUNT_EXPIRED:h=CDictionary.get_text("LoginCallback_Account_Expired_Title_lbl");f=CDictionary.get_text("LoginCallback_Account_Expired_Message_lbl");break;default:var g=ErrorUtil.get_common_messages(a);h=g.title;f=g.message;break}d="error"}if(a>0){AdminAuth.set_login_vars(c);AdminAuth.show_user_account();HomeDisplay.update_top_menu()}else{b.find(".errors").html(f).show()}}catch(e){console.error("Error in : AdminAuth - callback :["+e+"]")}};AdminAuth.validate=function(b){var e=0;try{b.find(".error").html("").remove();var a=b.find("input[name=username]");if(!Validate.required(a.val())){e++}var d=b.find("input[name=password]");if(!Validate.required(d.val())){e++}if(e>0){console.log("errors : "+e)}}catch(c){console.error("Error in : AdminAuth - validate form :["+c+"]")}return e};AdminAuth.validate_notes=function(b){try{var e=0;b.find(".error").html("").remove();var a=b.find("input[name=username]");if(!Validate.required(a.val())){e++;a.after(CMSExtraUtil.get_error_div("Name required !"))}var d=b.find("input[name=password]");if(!Validate.required(d.val())){e++;d.after(CMSExtraUtil.get_error_div("Password required !"))}console.log("errors : "+e)}catch(c){console.error("Error in - AdminAuth - show notes :["+c+"]")}};AdminAuth.show_user_account=function(){try{var a=$("#body").find("#menu");var c=$("#body").find("#title");a.show();c.hide();ManageModules.show_main_modules();$("body").trigger("in_background")}catch(b){console.error("Error in : AdminAuth - show user account :["+b+"]")}};AdminAuth.set_login_vars=function(a){try{AdminAuth.admin_id=a.admin_id;AdminAuth.rule_id=a.rule_id;AdminAuth.name=a.name}catch(b){console.error("Error in : AdminAuth - set login vars :["+b+"]")}};AdminAuth.logout=function(){try{var c=$("#body").find("#content");var b="action=logout";RequestUtil.quick_post_request(c,b,function(e){try{var d=e.status;AdminAuth.admin_id=-1;AdminAuth.rule_id=-1;AdminAuth.username="";$("#head").find("#rule-name").html("");if(d>0){AdminAuth.show_form()}else{AdminAuth.show_form()}HomeDisplay.update_top_menu()}catch(f){console.error("Error in AdminAuth.logout :["+f+"]")}})}catch(a){console.error("Error in : AdminAuth - show user account :["+a+"]")}};function ForgetForm(){}ForgetForm.show_form=function(){try{var c=$("#body").find("#content");var a={cont_div:c,tpl_path:g_template_url+"?tpl=forget_password",form_action:g_request_url+"?action=forget_password",complete_callback:ForgetForm.callback,prepare_func:ForgetForm.prepare,post_func:null,post_args:null,validate_func:ForgetForm.validate,animated:false};CMSUtil.create_form(a)}catch(b){console.error("Error in - ForgetForm - show form :["+b+"]")}};ForgetForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_popup("Reset password link has been sent, please check your email",STATUS_ICON_TRUE)}else{CMSExtraUtil.show_popup("Failed to send email, Incorrect information",STATUS_ICON_FALSE)}}catch(c){console.error("Error in - ForgetForm - callback :["+c+"]")}};ForgetForm.prepare=function(a){};ForgetForm.validate=function(a){try{var d=0;a.find(".error").html("").remove();var c=a.find("input[name=email]");if(!Validate.required(c.val())){d++;c.after(CMSExtraUtil.get_error_div("Username or e-Mail required !"))}}catch(b){console.error("Error in - ForgetForm - validate :["+b+"]")}return d};function AuthUtil(){}AuthUtil.highlight_button=function(a){try{$("#menu").find("a").removeClass();$(a).addClass("active")}catch(b){console.error("Error in : AdminAuth - highlight button :["+b+"]")}};AuthUtil.get_rule_name=function(a){var b="";switch(a){case USER_TYPE_MASTER:b="Master Admin";break;case USER_TYPE_ORG:b="Organization";break;case USER_TYPE_CHECKER:b="Checker";break;case USER_TYPE_ENTRY:b="Entry";break;default:break}return b};AuthUtil.get_menu_by_rule=function(a){var b="";switch(a){case USER_TYPE_MASTER:b='<a href="#" onclick="ManageOrganization.init(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-building" aria-hidden="true"></i> '+CDictionary.get_text("Organizations_lbl")+'</a><a href="#" onclick="ManageCertificate.init(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-certificate" aria-hidden="true"></i> '+CDictionary.get_text("Certificates_lbl")+'</a><a href="#" onclick="ManageUser.init(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-user" aria-hidden="true"></i> '+CDictionary.get_text("Users_lbl")+'</a><a href="#" onclick="manage_settings();         AuthUtil.highlight_button(this); return false;"><i class="fa fa-cog" aria-hidden="true"></i> '+CDictionary.get_text("Settings_lbl")+'</a><a href="#" onclick="AdminAuth.logout();        AuthUtil.highlight_button(this); return false;"><i class="fa fa-sign-out" aria-hidden="true"></i> '+CDictionary.get_text("Logout_lbl")+"</a>";break;case USER_TYPE_ORG:b='<a href="#" onclick="ManageCertificate.init(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-certificate" aria-hidden="true"></i> '+CDictionary.get_text("Certificates_lbl")+'</a><a href="#" onclick="ManageUser.init(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-user" aria-hidden="true"></i> '+CDictionary.get_text("Users_lbl")+'</a><a href="#" onclick="manage_settings();         AuthUtil.highlight_button(this); return false;"><i class="fa fa-cog" aria-hidden="true"></i> '+CDictionary.get_text("Settings_lbl")+'</a><a href="#" onclick="AdminAuth.logout();        AuthUtil.highlight_button(this); return false;"><i class="fa fa-sign-out" aria-hidden="true"></i> '+CDictionary.get_text("Logout_lbl")+"</a>";break;case USER_TYPE_CHECKER:b='<a href="#" onclick="ManageCertificate.init(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-certificate" aria-hidden="true"></i> '+CDictionary.get_text("Certificates_lbl")+'</a><a href="#" onclick="manage_settings();         AuthUtil.highlight_button(this); return false;"><i class="fa fa-cog" aria-hidden="true"></i> '+CDictionary.get_text("Settings_lbl")+'</a><a href="#" onclick="AdminAuth.logout();        AuthUtil.highlight_button(this); return false;"><i class="fa fa-sign-out" aria-hidden="true"></i> '+CDictionary.get_text("Logout_lbl")+"</a>";break;case USER_TYPE_ENTRY:b='<a href="#" onclick="ManageCertificate.init(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-certificate" aria-hidden="true"></i> '+CDictionary.get_text("Certificates_lbl")+'</a><a href="#" onclick="manage_settings();         AuthUtil.highlight_button(this); return false;"><i class="fa fa-cog" aria-hidden="true"></i> '+CDictionary.get_text("Settings_lbl")+'</a><a href="#" onclick="AdminAuth.logout();        AuthUtil.highlight_button(this); return false;"><i class="fa fa-sign-out" aria-hidden="true"></i> '+CDictionary.get_text("Logout_lbl")+"</a>";break;default:b='<a href="#" onclick="AdminAuth.logout(); AuthUtil.highlight_button(this); return false;"><i class="ion-log-out"></i> '+CDictionary.get_text("Logout_lbl")+"</a>";break}return b};

    /*! account */
    $(document).ready(function(){try{$("body").bind(AdminAuth.LOGIN_LOADED,AccountModule.display_module)}catch(a){console.error("Error in account main :["+a+"]")}});function AccountModule(){}AccountModule.display_module=function(){try{var a=AdminAuth.admin_id;if(a>0){AdminAuth.show_user_account()}else{AdminAuth.show_form()}}catch(b){console.error("Error in : AccountModule - display module :["+b+"]")}return};

    /*! extra utils */
    function CMSExtraUtil(){}CMSExtraUtil.sleep_for=function(b){var a=new Date().getTime();while(new Date().getTime()<a+b){}};CMSExtraUtil.print_div_popup=function(e,f,c,b){try{f=(f==null)?"":f;e=(e==null)?"":e;c=(c==null)?600:c;b=(b==null)?400:b;var a=window.open("",""+f+"","height="+b+",width="+c+"");a.document.write("<html><head><title>"+f+'</title><link rel="stylesheet" href="'+g_root_url+'css/print.css" type="text/css" /></head><body>'+e+"</body></html>");a.document.close();a.focus();a.print();a.close()}catch(d){throw"Error in : CMSUtil - print div popup : ["+d+"]"}return true};CMSExtraUtil.show_popup=function(b){try{CPopup.display(b)}catch(a){throw"Error in : CMSUtil - show popup : ["+a+"]"}};CMSExtraUtil.show_success=function(c,b){try{c=(c==null)?"":c;b=(b==null)?"":b;swal({title:c,text:b+" It will close in 1.5 seconds.",timer:1500,showConfirmButton:false,allowEscapeKey:true,type:"success"})}catch(a){throw"Error in : CMSUtil - show success : ["+a+"]"}};CMSExtraUtil.show_error=function(c,b){try{c=(c==null)?"":c;b=(b==null)?"":b;swal({title:c,text:b+" It will close in 10 seconds.",timer:10000,showConfirmButton:false,allowEscapeKey:true,type:"error"})}catch(a){throw"Error in : CMSUtil - show error : ["+a+"]"}};CMSExtraUtil.delete_popup=function(c,d,b){d=(d==null)?"Confirm Delete ?":d;b=(b==null)?"Are you sure you want to delete ?":b;try{swal({title:d,text:b,type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:true},c)}catch(a){throw"Error in : CMSUtil - delete popup : ["+a+"]"}};CMSExtraUtil.get_error_div=function(b){var a='<div class="error floated">'+b+"</div>";return a};CMSExtraUtil.get_parameter_by_name=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(location.search);return b===null?"":decodeURIComponent(b[1].replace(/\+/g," "))};CMSExtraUtil.show_list=function(e){try{var a=e.list_div;var c=e.path_div;var b=e.form_div;$(a).fadeIn(1000);$(b).fadeOut(1000);b.html("");a.html("");if(c!=undefined&&c!=null){$(c).fadeIn(1000);c.html("")}}catch(d){console.error("Error in : CMSExtraUtil - show list :["+d+"]")}};CMSExtraUtil.show_form=function(e){try{var a=e.list_div;var c=e.path_div;var b=e.form_div;$(a).fadeOut(1000);$(b).fadeIn(1000);b.html("");a.html("");if(c!=undefined&&c!=null){$(c).fadeOut(1000);c.html("")}}catch(d){console.error("Error in : CMSExtraUtil - show form :["+d+"]")}};$.extend({password:function(e,b){var d=0;var a="";var c;if(b==undefined){var b=false}while(d<e){c=(Math.floor((Math.random()*100))%94)+33;if(!b){if((c>=33)&&(c<=47)){continue}if((c>=58)&&(c<=64)){continue}if((c>=91)&&(c<=96)){continue}if((c>=123)&&(c<=126)){continue}}d++;a+=String.fromCharCode(c)}return a}});

    /*! display modules */
    $(document).ready(function(){try{}catch(a){console.error("error in main modules :["+a+"]")}});function ManageModules(){}ManageModules.show_main_modules=function(){try{if(AdminAuth.admin_id<=0){return AdminAuth.show_form()}ManageModules.show_master_modules()}catch(a){console.error("error in : ManageModules - show home :["+a+"]")}};ManageModules.show_master_modules=function(){try{var b=$("#body").find("#menu");var f=$("#body").find("#title");var g=$("#body").find("#content");b.html("");f.html("");g.html("");b.show();var e=AdminAuth.rule_id;var h=ManageModules.get_menu_by_rule(e);var a="<h1>"+CDictionary.get_text("Welcome_lbl")+" "+AdminAuth.name+"</h1>";b.html(h);f.html(a);g.html("");var c='<br /><br /><br /><div id="main-links"><div data-group="admin" ><a href="javascript:ManageSectionChilds.init();"          ><img src="'+g_root_url+'images/manage/main-icons/website-content.png" > '+CDictionary.get_text("WebsiteContent_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageCategoryChilds.init();"         ><img src="'+g_root_url+'images/manage/main-icons/categories.png"      > '+CDictionary.get_text("Categories_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageSlide.init();"                  ><img src="'+g_root_url+'images/manage/main-icons/slides.png"          > '+CDictionary.get_text("Slides_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageAd.init();"                     ><img src="'+g_root_url+'images/manage/main-icons/adverts.png"         > '+CDictionary.get_text("Ads_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageUser.init();"                   ><img src="'+g_root_url+'images/manage/main-icons/users.png"           > '+CDictionary.get_text("Users_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManagePayment.init();"                ><img src="'+g_root_url+'images/manage/main-icons/payments.png"        > '+CDictionary.get_text("Payments_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageWishedItem.init();"             ><img src="'+g_root_url+'images/manage/main-icons/wishlist.png"        > '+CDictionary.get_text("WishedItems_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageCache.rebuild_section_tree();"  ><img src="'+g_root_url+'images/manage/main-icons/build-tree.png"      > '+CDictionary.get_text("RebuildSectionTree_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageCache.rebuild_category_tree();" ><img src="'+g_root_url+'images/manage/main-icons/build-tree.png"      > '+CDictionary.get_text("RebuildCategoryTree_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageCache.clear_cache();"           ><img src="'+g_root_url+'images/manage/main-icons/clear-cache.png"     > '+CDictionary.get_text("ClearCache_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageModules.open_upload_popup();"   ><img src="'+g_root_url+'images/manage/main-icons/media-center.png"    > '+CDictionary.get_text("MediaCenter_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageStatistics.init();"             ><img src="'+g_root_url+'images/manage/main-icons/stats.png"           > '+CDictionary.get_text("Statistics_lbl")+'</a></div><div data-group="admin" ><a href="javascript:ManageAdmin.init();"                  ><img src="'+g_root_url+'images/manage/main-icons/admins.png"          > '+CDictionary.get_text("Admins_lbl")+'</a></div><div data-group="admin" ><a href="javascript:AdminAuth.logout()"                   ><img src="'+g_root_url+'images/manage/main-icons/logout.png"          > '+CDictionary.get_text("Logout_lbl")+"</a></div></div>";g.html(c)}catch(d){console.error("Error in : ManageModules - show master modules :["+d+"]")}};ManageModules.get_menu_by_rule=function(a){var b="";b='<a data-module="home" href="#" onclick="ManageModules.show_main_modules(); AuthUtil.highlight_button(this); return false;"><i class="fa fa-home" aria-hidden="true"></i> '+CDictionary.get_text("Home_lbl")+'</a><a href="#" onclick="AdminAuth.logout();        AuthUtil.highlight_button(this); return false;"><i class="fa fa-sign-out" aria-hidden="true"></i> '+CDictionary.get_text("Logout_lbl")+"</a>";return b};ManageModules.open_upload_popup=function(){var c=950;var a=550;var b=g_root_url+"js/kcfinder/browse.php";var e='<iframe width="'+c+'" height="'+a+'" src="'+b+'" frameborder="0" allowfullscreen="1"></iframe>';var d='<div style="width: '+c+"px; height: "+a+'px; border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; overflow: hidden;">'+e+"</div>";CPopup.display(d)};

    /*! background requests */
    $(document).ready(function(){try{$("body").bind("in_background",BackgroundRequests.load_main)}catch(a){console.error("error in background requests document ready :["+a+"]")}});function MainGlobals(){}function BackgroundRequests(){}BackgroundRequests.load_main=function(){try{var c=$("body");Cover.add(c,Cover.LOADING_STYLE1,"light");var b="action=main_background_requests";RequestUtil.quick_ajax_request(null,b,function(e){try{Cover.remove(c);var d=e.status;if(d>0){MainGlobals.countries=e.countries}}catch(f){console.error("error in request :["+f+"]")}})}catch(a){console.error("Error in : BackgroundRequests - load_main :["+a+"]")}};BackgroundRequests.load_countries=function(){try{var c=$("body");Cover.add(c,Cover.LOADING_STYLE1,"light");var b="action=countries";RequestUtil.quick_ajax_request(null,b,function(e){try{Cover.remove(c);var d=e.status;if(d>0){MainGlobals.countries=e.countries}}catch(f){console.error("error in request :["+f+"]")}})}catch(a){console.error("Error in : BackgroundRequests - load countries :["+a+"]")}};

    /*! cache */
    function ManageCache(){}ManageCache.rebuild_category_tree=function(){var a="action=rebuild_category_tree";RequestUtil.quick_post_request(null,a,function(c){try{var b=c.status;if(b>0){CMSExtraUtil.show_success("Rebuild category tree [Success]","")}else{CMSExtraUtil.show_error("Rebuild category tree [Failed]","")}}catch(d){console.log("error in loading products :["+d+"]")}})};ManageCache.rebuild_section_tree=function(){var a="action=rebuild_section_tree";RequestUtil.quick_post_request(null,a,function(c){try{var b=c.status;if(b>0){CMSExtraUtil.show_success("Rebuild section tree [Success]","")}else{CMSExtraUtil.show_error("Rebuild section tree  [Failed]","")}}catch(d){console.log("error in loading products :["+d+"]")}})};ManageCache.clear_cache=function(){var a="action=clear_cache";RequestUtil.quick_post_request(null,a,function(c){try{var b=c.status;if(b>0){CMSExtraUtil.show_success("Clear Cache [Success]","")}else{CMSExtraUtil.show_error("Clear Cache [Failed]","")}}catch(d){console.log("error in clear cache :["+d+"]")}})};

    /*! admins */
    function ManageAdmin(){}ManageAdmin.init=function(){try{var a=$("#body").find("#menu");var c=$("#body").find("#content");a.find("a").removeClass();a.find("a[data-module=admins]").addClass("active");c.html("");ManageAdminList.init()}catch(b){console.error("Error in : ManageAdmin - init : ["+b+"]")}};function ManageAdminList(){}ManageAdminList.index=0;ManageAdminList.count=10;ManageAdminList.init=function(){try{var d=$("#body").find("#content");d.html("");d.append('<div class="controls clearfix"><div class="top_label_main" onclick="return false;">'+CDictionary.get_text("Admins_lbl")+'</div><div class="top_button" onclick="ManageAdminForm.add(); return false;"><i class="fa fa-plus-square" aria-hidden="true"></i>'+CDictionary.get_text("New_lbl")+'</div><div class="top_button" onclick="ManageAdminForm.search(); return false;"><i class="fa fa-search" aria-hidden="true"></i>'+CDictionary.get_text("Search_lbl")+"</div></div>");d.append('<div class="clearfix"></div>');d.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="list"></div></div>');var b=$("#body").find("#content").find("#form");var a=$("#body").find("#content").find("#list");ManageAdminList.form_div=b;ManageAdminList.list_div=a;ManageAdminList.load();CMSExtraUtil.show_list(ManageAdminList)}catch(c){console.error("Error in : ManageAdmin - init : ["+c+"]")}};ManageAdminList.load=function(a,c){try{a=(a===undefined)?ManageAdminList.index:Utils.get_int(a);c=(c===undefined)?ManageAdminList.count:Utils.get_int(c);ManageAdminList.index=a;ManageAdminList.count=c;var d="action=admins&index="+a+"&count="+c;RequestUtil.quick_post_request(list_div,d,function(f){try{var e=f.status;if(e>0){var g=f.admins;var i=f.admins_count;ManageAdminList.display_list(g,i,CMSUtil.PAGINATION_LIST)}}catch(h){console.error("error in request :["+h+"]")}})}catch(b){console.error("Error in : ManageAdminList - load :["+b+"]")}};ManageAdminList.search=function(b,d){try{var a=ManageAdminList.list_div;ManageAdminList.index=Utils.get_int(b);ManageAdminList.count=Utils.get_int(d);ManageAdminList.count=(ManageAdminList.count>0)?ManageAdminList.count:10;var e=ManageAdminList.search_object;e.index=ManageAdminList.index;e.count=ManageAdminList.count;RequestUtil.quick_post_request(a,e,function(g){try{var f=g.status;if(f>0){var h=g.admins;var j=g.admins_count;ManageAdminList.display_list(h,j,CMSUtil.PAGINATION_SEARCH)}}catch(i){console.error("error in request :["+i+"]")}})}catch(c){console.error("Error in : ManageAdminList - load :["+c+"]")}};ManageAdminList.display_list=function(h,i,a){try{ManageAdminList.array=h;var b=ManageAdminList.list_div;var f=CDictionary.get_labels(["AdminList_AdminId_lbl","AdminList_Name_lbl","AdminList_Password_lbl","AdminList_Email_lbl","AdminList_RuleId_lbl"]);var g=["ManageAdminOutput.get_id(admin_id)","name","password","email","rule_id"];var c="admin_id";CMSUtil.show_list(b,f,g,h,c,"ManageAdminForm.edit","ManageAdminForm.remove","ManageAdminForm.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageAdminList.search":"ManageAdminList.load";CMSUtil.show_pagination(b,d,[],i,ManageAdminList.index,ManageAdminList.count,(ManageAdminList.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageAdminList - display list :["+e+"]")}};function ManageAdminForm(){}ManageAdminForm.import_form=function(){try{var d=$("#body").find("#content");d.find("#form_cell_new").html("");d.find("#form_cell_search").html("");var e=d.find("#form_cell_import");e.html("");var a=CForm.get_form_div_from_tpl(g_template_url+"?tpl=import_form");var b={cont_div:e,form_div:a,form_action:g_request_url+"?action=import_form_admins",complete_callback:ManageAdminForm.callback,prepare_func:null,animated:true};CMSUtil.create_form(b);a.find("input[name=download]").click(function(){window.location=g_request_url+"?action=export_admins_sample"})}catch(c){console.error("Error in : ManageAdminForm - import_form :["+c+"]")}};ManageAdminForm.export_form=function(){try{var c=ManageAdminList.search_object;if(c===null){c={}}var a=Math.floor(Math.random()*1000);var c="action=export_admins&admin_id="+Utils.get_int(c.admin_id)+"&title="+get_string(c.title)+"&date="+get_string(c.date)+"&status="+Utils.get_int(c.status)+"&seqId="+a;window.location=g_request_url+"?"+c}catch(b){console.error("Error in : ManageAdminForm - export :["+b+"]")}};ManageAdminForm.get_form_properties=function(){var d={};try{var a="admin";var c={name:a,params:[{name:"name",type:"text",label:CDictionary.get_text("AdminForm_Name_lbl")+":"},{name:"password",type:"password",label:CDictionary.get_text("AdminForm_Password_lbl")+":"},{type:"separator",label:""},{name:"email",type:"text",label:CDictionary.get_text("AdminForm_Email_lbl")+":"},{type:"separator",label:""},{name:"rule_id",type:"select",label:CDictionary.get_text("AdminForm_RuleId_lbl")+":"},{type:"separator",label:""},{name:"admin_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"application/x-www-form-urlencoded",style:"style1"};d=new CForm(c)}catch(b){console.error("Error in : ManageAdminForm - get form properties :["+b+"]")}return d};ManageAdminForm.search=function(){try{var a=ManageAdminList.list_div;var c=ManageAdminList.form_div;$(a).fadeIn(1000);$(c).fadeIn(1000);c.html("");var b=TplUtil.get_hidden_div("admin_search_tpl",true);c.append(b);c.find("select[name=country]").html(ManageAdminForm.get_country_select());c.find("select[name=status]").html(ManageAdminForm.get_rule_select());c.find("input[type=submit]").click(function(f){try{f.preventDefault();var g={action:"search_admins",cvc:c.find("input[name=cvc]").val(),name:c.find("input[name=name]").val(),number:c.find("input[name=number]").val(),type:c.find("select[name=type]").val(),graduation_date:c.find("input[name=graduation_date]").val(),qr_key:c.find("input[name=qr_key]").val(),country:c.find("select[name=country]").val()};ManageAdminList.search_object=g;ManageAdminList.search(0,ManageAdminList.count);return false}catch(e){console.error("Error in : ManageOrganizationForm - search - submit : ["+e+"]")}});c.find("input[type=reset]").click(function(f){try{f.preventDefault();c.find("form").get(0).reset();c.hide().fadeOut(1000)}catch(e){console.error("Error in : ManageOrganizationForm - search - reset : ["+e+"]")}})}catch(d){console.error("Error in : ManageOrganizationForm - add :["+d+"]")}};ManageAdminForm.add=function(){try{var a=ManageAdminList.list_div;var c=ManageAdminList.form_div;$(a).fadeOut(1000);$(c).fadeIn(1000);c.html("");var b=ManageAdminForm.get_form_properties().get_form_div();var d={cont_div:c,form_div:b,form_action:g_request_url+"?action=add_admin",complete_callback:ManageAdminForm.callback,cancel_callback:ManageAdminForm.cancel,prepare_func:ManageAdminForm.prepare_form,validate_func:ManageAdminForm.validate_form,validate_notes_func:ManageAdminForm.show_validate_notes};CMSUtil.create_form(d)}catch(e){console.error("Error in : ManageAdminForm - add :["+e+"]")}};ManageAdminForm.edit=function(b){try{b=Utils.get_int(b);var a=ManageAdminList.list_div;var d=ManageAdminList.form_div;$(a).fadeOut(1000);$(d).fadeIn(1000);d.html("");var c=ManageAdminForm.get_form_properties().get_form_div();var e={cont_div:d,form_div:c,form_action:g_request_url+"?action=update_admin",complete_callback:ManageAdminForm.callback,cancel_callback:ManageAdminForm.cancel,prepare_func:ManageAdminForm.prepare_form,post_func:ManageAdminForm.post_edit,post_args:b,validate_func:ManageAdminForm.validate_form,validate_notes_func:ManageAdminForm.show_validate_notes};CMSUtil.create_form(e)}catch(f){console.error("Error in : ManageAdminForm - edit :["+f+"]")}};ManageAdminForm.view=function(b){try{b=Utils.get_int(b);var a=ManageAdminForm.get_object(b);var d=ManageAdminForm.get_form_properties().get_preview_div();d.find("div[name=admin_id]").html(a.admin_id);d.find("div[name=name]").html(a.name);d.find("div[name=password]").html(a.password);d.find("div[name=email]").html(a.email);d.find("div[name=rule_id]").html(a.rule_id);CPopup.display($("<div></div>").append(d).html(),"Admin Info")}catch(c){console.error("Error in : ManageAdminForm - view :["+c+"]")}};ManageAdminForm.remove=function(a){try{CMSExtraUtil.delete_popup(function(){var c=ManageAdminList.list_div;var d="action=remove_admin&admin_id="+a;RequestUtil.quick_post_request(c,d,ManageAdminForm.callback)})}catch(b){console.error("Error in : ManageAdminForm - delete :["+b+"]")}};ManageAdminForm.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.error("Error in : ManageAdminForm - print :["+b+"]")}};ManageAdminForm.prepare_form=function(a){try{a.find("select[name=country]").html(ManageAdminForm.get_country_select())}catch(b){console.error("Error in : ManageAdminForm - prepare form :["+b+"]")}};ManageAdminForm.post_edit=function(b){try{var a=ManageAdminForm.get_object(b);var c=ManageAdminList.form_div;c=c.find("form");c.find("input[name=admin_id]").val(a.admin_id);c.find("input[name=name]").val(a.name);c.find("input[name=password]").val(a.password);c.find("input[name=email]").val(a.email);c.find("input[name=rule_id]").find("option[value="+a.rule_id+"]").attr("selected",true)}catch(d){console.error("Error in : ManageAdminForm - post edit :["+d+"]")}};ManageAdminForm.validate_form=function(b){var d=0;try{b.find(".error").html("");b.find("*").removeClass("required");var a=null;if(d>0){console.log("validate found : "+d+" errors")}}catch(c){console.error("Error in : ManageAdminForm - validate form :["+c+"]")}return d};ManageAdminForm.show_validate_notes=function(c){try{c.find(".error").html("").remove();var a="";var b=null;c.append('<div class="clearfix"></div>');c.append('<div class="error alert-error">'+a+"</div>")}catch(d){console.error("Error in : ManageAdminForm - show validate notes :["+d+"]")}};ManageAdminForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}ManageAdminList.load();$("body").trigger("admins_updated")}catch(c){console.error("Error in : ManageAdminForm - callback :["+c+"]")}};ManageAdminForm.cancel=function(){try{ManageAdminList.load()}catch(a){console.error("Error in : ManageAdminForm - cancel :["+a+"]")}};ManageAdminForm.get_object=function(b){var a=null;try{var e=ManageAdminList.array;for(var c=0;c<e.length;c++){if(e[c].admin_id==b){a=e[c];break}}}catch(d){console.error("Error in : ManageAdminForm - get object :["+d+"]")}return a};ManageAdminForm.get_rule_select=function(){var a="";a+='<option value="-1">Please select status</option><option value="'+ORG_STATUS_HOLD+'">'+CDictionary.get_text("CertForm_Status_Hold_lbl")+'</option><option value="'+ORG_STATUS_TRIAL+'">'+CDictionary.get_text("CertForm_Status_Trial_lbl")+'</option><option value="'+ORG_STATUS_EXPIRED+'">'+CDictionary.get_text("CertForm_Status_Expired_lbl")+'</option><option value="'+ORG_STATUS_ACTIVE+'">'+CDictionary.get_text("CertForm_Status_Active_lbl")+"</option>";return a};function ManageAdminOutput(){}ManageAdminOutput.get_id=function(a){return number_pad(a,6)};ManageAdminOutput.get_rule=function(a){var b="";a=Utils.get_int(a);switch(a){case ORG_STATUS_HOLD:b=CDictionary.get_text("CertForm_Status_Hold_lbl");break;case ORG_STATUS_EXPIRED:b=CDictionary.get_text("CertForm_Status_Expired_lbl");break;case ORG_STATUS_TRIAL:b=CDictionary.get_text("CertForm_Status_Trial_lbl");break;case ORG_STATUS_ACTIVE:b=CDictionary.get_text("CertForm_Status_Active_lbl");break;default:break}return b};

    /*! section childs */
    var COLOR_PATTERN=/#[a-fA-F0-9]{6}/;var CHILD_TYPE_SECTION=1;var CHILD_TYPE_TARGET=2;var CHILD_TYPE_EMBED=3;var CHILD_TYPE_LINK=4;var STYLE_DEFAULT=1;var STYLE_MEDIA=2;function ManageSectionChilds(){}ManageSectionChilds.parent_id=-1;ManageSectionChilds.array=[];ManageSectionChilds.init=function(e){try{ManageSectionChilds.parent_id=Utils.get_int(e);ManageSectionChilds.parent_id=(ManageSectionChilds.parent_id>0)?ManageSectionChilds.parent_id:0;var f=$("#body").find("#content");f.html("");f.append('<div class="top_label_main"         onclick="ManageSectionChilds.init('+ManageSectionChilds.parent_id+'); return false;">'+CDictionary.get_text("Sections_lbl")+'</div><div class="top_label new_label"    onclick="ManageSection.add(); return false;">'+CDictionary.get_text("New_lbl")+" "+CDictionary.get_text("Section_lbl")+'</div><div class="top_label new_label"    onclick="ManageTarget.add();  return false;">'+CDictionary.get_text("New_lbl")+" "+CDictionary.get_text("Target_lbl")+'</div><div class="top_label new_label"    onclick="ManageEmbed.add();   return false;">'+CDictionary.get_text("New_lbl")+" "+CDictionary.get_text("Embed_lbl")+'</div><div class="top_label new_label"    onclick="ManageLink.add();    return false;">'+CDictionary.get_text("New_lbl")+" "+CDictionary.get_text("Link_lbl")+"</div>");f.append('<div class="clearfix"></div>');f.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="path"></div><div id="list"></div></div>');var b=$("#body").find("#content").find("#form");var c=$("#body").find("#content").find("#path");var a=$("#body").find("#content").find("#list");ManageSectionChilds.form_div=b;ManageSectionChilds.path_div=c;ManageSectionChilds.list_div=a;ManageSectionChilds.index=0;ManageSectionChilds.count=10;CMSExtraUtil.show_list(ManageSectionChilds);ManageSectionChilds.load();ManageSectionChilds.load_path()}catch(d){console.error("Error in - ManageSectionChilds.init :["+d+"]")}};ManageSectionChilds.load_path=function(){try{var a=ManageSectionChilds.parent_id;var d={action:"section_path",index:-1,count:-1,section_id:a};var b=ManageSectionChilds.path_div;b.html("");RequestUtil.quick_post_request(b,d,function(j){var f=j.status;if(f>0){var l=j.sections;var h="";h+='<a href="javascript:ManageSectionChilds.init(0);" class="cell">'+CDictionary.get_text("Sections_lbl")+"</a>";for(var g=0;g<l.length;g++){var k=l[g];var e=CDictionary.get_text_by_lang(k,"title");h+='<a href="javascript:ManageSectionChilds.init('+k.section_id+');" class="cell">'+e+"</a>"}b.html(h)}})}catch(c){console.error("Error in - load section path :["+c+"]")}};ManageSectionChilds.cancel=function(){try{CMSExtraUtil.show_list(ManageSectionChilds);ManageSectionChilds.load()}catch(a){console.error("Error in : ManageSectionChilds - cancel :["+a+"]")}};ManageSectionChilds.load=function(b,d){try{ManageSectionChilds.index=(b==null)?ManageSectionChilds.index:b;ManageSectionChilds.count=(d==null)?ManageSectionChilds.count:d;var a=ManageSectionChilds.list_div;var e="action=section_childs&parent_id="+ManageSectionChilds.parent_id+"&index="+ManageSectionChilds.index+"&count="+ManageSectionChilds.count;RequestUtil.quick_post_request(a,e,function(h){try{var g=h.status;if(g>0){var f=h.section_childs;var j=h.result_count;ManageSectionChilds.display_list(f,j,SOURCE_LIST)}}catch(i){console.log("error in load section childs :["+i+"]")}})}catch(c){console.error("Error in - load section childs :["+c+"]")}};ManageSectionChilds.display_list=function(h,i,a){try{ManageSectionChilds.array=h;var b=ManageSectionChilds.list_div;var f=CDictionary.get_labels(["SectionChildsList_ChildId_lbl","SectionChildsList_Title_lbl","SectionChildsList_Order_lbl","SectionChildsList_Active_lbl"]);var g=["ManageSectionChildsOutput.get_id(child_index)","ManageSectionChildsOutput.get_link(title_ar,title_en,child_type,child_id)","order","active"];var c="child_index";CMSUtil.show_list(b,f,g,h,c,"ManageSectionChilds.edit","ManageSectionChilds.remove","ManageSectionChilds.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageSectionChilds.search":"ManageSectionChilds.load";CMSUtil.show_pagination(b,d,[],i,ManageSectionChilds.index,ManageSectionChilds.count,(ManageSectionChilds.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageAdminList - display list :["+e+"]")}};ManageSectionChilds.edit=function(d){try{var c=ManageSectionChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_SECTION:ManageSection.edit(c.child_index);break;case CHILD_TYPE_TARGET:ManageTarget.edit(c.child_index);break;case CHILD_TYPE_EMBED:ManageEmbed.edit(c.child_index);break;case CHILD_TYPE_LINK:ManageLink.edit(c.child_index);break}}catch(b){console.error("Error in - edit section child :["+b+"]")}};ManageSectionChilds.remove=function(d){try{var c=ManageSectionChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_SECTION:ManageSection.remove(c.child_index);break;case CHILD_TYPE_TARGET:ManageTarget.remove(c.child_index);break;case CHILD_TYPE_EMBED:ManageEmbed.remove(c.child_index);break;case CHILD_TYPE_LINK:ManageLink.remove(c.child_index);break}}catch(b){console.error("Error in - delete section child :["+b+"]")}};ManageSectionChilds.view=function(d){try{var c=ManageSectionChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_SECTION:ManageSection.view(c.child_index);break;case CHILD_TYPE_TARGET:ManageTarget.view(c.child_index);break;case CHILD_TYPE_EMBED:ManageEmbed.view(c.child_index);break;case CHILD_TYPE_LINK:ManageLink.view(c.child_index);break}}catch(b){console.error("Error in - view section child :["+b+"]")}};ManageSectionChilds.print=function(d){try{var c=ManageSectionChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_SECTION:ManageSection.print(c.child_index);break;case CHILD_TYPE_TARGET:ManageTarget.print(c.child_index);break;case CHILD_TYPE_EMBED:ManageEmbed.print(c.child_index);break;case CHILD_TYPE_LINK:ManageLink.print(c.child_index);break}}catch(b){console.error("Error in - print section child :["+b+"]")}};ManageSectionChilds.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}CMSExtraUtil.show_list(ManageSectionChilds);ManageSectionChilds.load();$("body").trigger("sections_updated")}catch(c){console.error("Error in : ManageSectionChilds - callback :["+c+"]")}};ManageSectionChilds.get_search_form_properties=function(){var a="section";var b={name:a,params:[{name:"section_id",type:"text",label:CDictionary.get_text("SectionForm_SectionId_lbl")+":"},{name:"title",type:"text",label:CDictionary.get_text("SectionForm_Title_lbl")+":"},{name:"child_type",type:"select",label:CDictionary.get_text("SectionForm_ChildType_lbl")+":"},{type:"separator",label:""}],action:"",method:"post",enctype:"application/x-www-form-urlencoded",style:"style2"};var c=new CForm(b);return c};ManageSectionChilds.search_form=function(){$("#body").find("#content").find("#form_cell_new").html("");$("#body").find("#content").find("#form_cell_import").html("");var c=$("#body").find("#content").find("#form_cell_search");c.html("");var a=ManageSectionChilds.get_search_form_properties().get_form_div();var b={cont_div:c,form_div:a,form_action:g_request_url+"?action=ManageSectionChilds.search&index="+ManageSectionChilds.index+"&count="+ManageSectionChilds.count,complete_callback:null,prepare_func:ManageSectionChilds.prepare_search_form,animated:false};CMSUtil.create_form(b)};ManageSectionChilds.prepare_search_form=function(a){var b=ManageSectionChildsOutput.get_object_type_select_options();a.find("select[name=child_type]").html(b);a.find("input[type=submit]").click(function(c){c.preventDefault();var d={action:"ManageSectionChilds.search",index:ManageSectionChilds.index,count:ManageSectionChilds.count,section_id:a.find("input[name=section_id]").val(),title:a.find("input[name=title]").val(),child_type:a.find("select[name=child_type]").val()};g_search_object=d;ManageSectionChilds.search(ManageSectionChilds.index,ManageSectionChilds.count);return false})};ManageSectionChilds.search=function(b,c){ManageSectionChilds.index=(b==null)?ManageSectionChilds.index:b;ManageSectionChilds.count=(c==null)?ManageSectionChilds.count:c;var a=ManageSectionChilds.list_div;var d=ManageSectionChilds.search_object;d.index=ManageSectionChilds.index;d.count=ManageSectionChilds.count;RequestUtil.quick_post_request(a,d,function(f){var e=f.status;if(e>0){var h=f.sections;var g=f.result_count;ManageSectionChilds.display_list(h,g,SOURCE_SEARCH)}})};function ManageSectionChildsOutput(){}ManageSectionChildsOutput.get_id=function(a){return number_pad(a,6)};ManageSectionChildsOutput.get_object=function(d){var c=null;try{for(var a=0;a<ManageSectionChilds.array.length;a++){if(ManageSectionChilds.array[a].child_index==d){c=ManageSectionChilds.array[a];break}}}catch(b){console.log("error in cms get section child object :["+b+"]")}return c};ManageSectionChildsOutput.get_link=function(a,f,d,b){var e="";var j=(CDictionary.lang=="ar")?a:f;d=Utils.get_int(d);switch(d){case CHILD_TYPE_SECTION:var g=b;e='<img src="'+g_root_url+'images/manage/icons/section.png"> <a href="#" onclick="ManageSectionChilds.init('+g+')">'+j+"</a>";break;case CHILD_TYPE_TARGET:var h=b;e='<img src="'+g_root_url+'images/manage/icons/page.png"> <a href="#" onclick="view_target('+h+')">'+j+"</a>";break;case CHILD_TYPE_EMBED:var i=b;e='<img src="'+g_root_url+'images/manage/icons/file.png"> <a href="#" onclick="view_embed('+i+')">'+j+"</a>";break;case CHILD_TYPE_LINK:var c=b;e='<img src="'+g_root_url+'images/manage/icons/link.png"> <a href="#" onclick="view_link('+c+')">'+j+"</a>";break}return e};ManageSectionChildsOutput.get_icon=function(a){var b="";a=Utils.get_int(a);switch(a){case CHILD_TYPE_SECTION:b='<img src="'+g_root_url+'images/cms/section.png">';break;case CHILD_TYPE_TARGET:b='<img src="'+g_root_url+'images/cms/page.png">';break;case CHILD_TYPE_EMBED:b='<img src="'+g_root_url+'images/cms/file.png">';break;case CHILD_TYPE_LINK:b='<img src="'+g_root_url+'images/cms/link.png">';break}return b};

    /*! sections */
    function ManageSection(){}ManageSection.get_form_properties=function(){var d=null;try{var a="section";var c={name:a,params:[{name:"title_ar",type:"text",label:CDictionary.get_text("SectionForm_TitleAr_lbl")+":"},{name:"title_en",type:"text",label:CDictionary.get_text("SectionForm_TitleEn_lbl")+":"},{name:"desc_ar",type:"textarea",label:CDictionary.get_text("SectionForm_DescAr_lbl")+":"},{name:"desc_en",type:"textarea",label:CDictionary.get_text("SectionForm_DescEn_lbl")+":"},{name:"keys_ar",type:"textarea",label:CDictionary.get_text("SectionForm_KeysAr_lbl")+":"},{name:"keys_en",type:"textarea",label:CDictionary.get_text("SectionForm_KeysEn_lbl")+":"},{type:"separator",label:""},{name:"content_ar",type:"editor",label:CDictionary.get_text("SectionForm_ContentAr_lbl")+":"},{name:"content_en",type:"editor",label:CDictionary.get_text("SectionForm_ContentEn_lbl")+":"},{type:"separator",label:""},{name:"icon",type:"file",label:CDictionary.get_text("SectionForm_Icon_lbl")+":"},{type:"separator",label:""},{name:"format",type:"select",label:CDictionary.get_text("SectionForm_Format_lbl")+":"},{type:"separator",label:""},{type:"clear",label:""},{name:"top_menu",type:"checkbox",label:CDictionary.get_text("SectionForm_TopMenu_lbl")+":",value:"1"},{name:"main_menu",type:"checkbox",label:CDictionary.get_text("SectionForm_MainMenu_lbl")+":",value:"1"},{name:"foot_menu",type:"checkbox",label:CDictionary.get_text("SectionForm_FootMenu_lbl")+":",value:"1"},{type:"separator",label:""},{name:"show_menu",type:"checkbox",label:CDictionary.get_text("SectionForm_ShowMenu_lbl")+":",value:"1"},{name:"show_text",type:"checkbox",label:CDictionary.get_text("SectionForm_ShowText_lbl")+":",value:"1"},{type:"separator",label:""},{type:"clear",label:""},{name:"sitemap_exclude",type:"checkbox",label:CDictionary.get_text("SectionForm_SitemapExclude_lbl")+":",value:"1"},{name:"special",type:"checkbox",label:CDictionary.get_text("SectionForm_Special_lbl")+":",value:"1"},{type:"separator",label:""},{type:"clear",label:""},{name:"order",type:"text",label:CDictionary.get_text("SectionForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("SectionForm_Active_lbl")+":",value:"1"},{type:"separator",label:""},{name:"editable",type:"hidden",label:"",ignore_preview:true},{name:"removable",type:"hidden",label:"",ignore_preview:true},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"section_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.log("Error in : ManageSection - get form properties :["+b+"]")}return d};ManageSection.add=function(){try{CMSExtraUtil.show_form(ManageSectionChilds);var d=ManageSectionChilds.form_div;var a=ManageSection.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_section",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageSection.prepare,validate_func:ManageSection.validate,validate_notes_func:ManageSection.validate_notes};CMSUtil.create_form(b)}catch(c){console.log("Error in : ManageSection - add :["+c+"]")}};ManageSection.edit=function(d){try{CMSExtraUtil.show_form(ManageSectionChilds);var c=ManageSectionChilds.form_div;var a={cont_div:c,form_div:ManageSection.get_form_properties().get_form_div(),form_action:g_request_url+"?action=update_section",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageSection.prepare,post_func:ManageSection.post_edit,post_args:d,validate_func:ManageSection.validate,validate_notes_func:ManageSection.validate_notes};CMSUtil.create_form(a)}catch(b){console.log("Error in : ManageSection - edit :["+b+"]")}};ManageSection.remove=function(d){try{var c=ManageSectionChildsOutput.get_object(d);var a=c.section_id;CMSExtraUtil.delete_popup(function(){var e=ManageSectionChilds.list_div;var f="action=remove_section&section_id="+a;RequestUtil.quick_post_request(e,f,ManageSectionChilds.callback)})}catch(b){console.log("Error in : ManageSection - delete :["+b+"]")}};ManageSection.view=function(e){try{var c=ManageSectionChildsOutput.get_object(e);var b=ManageSection.get_form_properties();var d=b.get_preview_div();d.find("div[name=section_id]").html(c.section_id);d.find("div[name=title_ar]").html(c.title_ar);d.find("div[name=title_en]").html(c.title_en);d.find("div[name=keys_ar]").html(c.keys_ar);d.find("div[name=keys_en]").html(c.keys_en);d.find("div[name=desc_ar]").html(c.desc_ar);d.find("div[name=desc_en]").html(c.desc_en);d.find("div[name=content_ar]").html(c.content_ar);d.find("div[name=content_en]").html(c.content_en);d.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/sections/"+c.icon+'" />');d.find("div[name=image]").html('<img src="'+g_root_url+"uploads/sections/"+c.image+'" />');d.find("div[name=format]").html(c.format);d.find("div[name=top_menu]").html((c.top_menu>0)?gYes:gNo);d.find("div[name=main_menu]").html((c.main_menu>0)?gYes:gNo);d.find("div[name=foot_menu]").html((c.foot_menu>0)?gYes:gNo);d.find("div[name=show_menu]").html((c.show_menu>0)?gYes:gNo);d.find("div[name=show_text]").html((c.show_text>0)?gYes:gNo);d.find("div[name=sitemap_exclude]").html((c.sitemap_exclude>0)?gYes:gNo);d.find("div[name=special]").html((c.special>0)?gYes:gNo);d.find("div[name=order]").html(c.order);d.find("div[name=active]").html((c.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(d).html(),"Section Info")}catch(a){console.log("Error in : ManageSection - view :["+a+"]")}};ManageSection.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.log("Error in : ManageSection - print :["+b+"]")}};ManageSection.prepare=function(b){try{var a=ManageSection.get_format_select();b.find("select[name=format]").html(a);if(ManageSectionChilds.parent_id>0){b.find("input[name=top_menu]").attr("disabled",true);b.find("input[name=main_menu]").attr("disabled",true);b.find("input[name=side_menu]").attr("disabled",true);b.find("input[name=foot_menu]").attr("disabled",true);b.find("input[name=top_menu]").hide();b.find("input[name=main_menu]").hide();b.find("input[name=side_menu]").hide();b.find("input[name=foot_menu]").hide();b.find("label[for^=top_menu_checkbox]").hide();b.find("label[for^=main_menu_checkbox]").hide();b.find("label[for^=side_menu_checkbox]").hide();b.find("label[for^=foot_menu_checkbox]").hide()}else{}b.find("input[name=parent_id]").val(ManageSectionChilds.parent_id)}catch(c){console.log("Error in : ManageSection - prepare :["+c+"]")}};ManageSection.post_edit=function(f){try{var d=ManageSectionChildsOutput.get_object(f);var a=ManageSectionChilds.form_div;a.find("input[name=section_id]").val(d.section_id);a.find("input[name=title_ar]").val(d.title_ar);a.find("input[name=title_en]").val(d.title_en);a.find("textarea[name=keys_ar]").val(d.keys_ar);a.find("textarea[name=keys_en]").val(d.keys_en);a.find("textarea[name=desc_ar]").val(d.desc_ar);a.find("textarea[name=desc_en]").val(d.desc_en);a.find("input[name=content_ar]").val(d.content_ar);a.find("input[name=content_en]").val(d.content_en);a.find("div[name=content_ar]").html(d.content_ar);a.find("div[name=content_en]").html(d.content_en);a.find("select[name=format]").find("option[value="+d.format+"]").attr("selected",true);a.find("input[name=top_menu]").attr("checked",(d.top_menu>0)?true:false);a.find("input[name=side_menu]").attr("checked",(d.side_menu>0)?true:false);a.find("input[name=main_menu]").attr("checked",(d.main_menu>0)?true:false);a.find("input[name=foot_menu]").attr("checked",(d.foot_menu>0)?true:false);a.find("input[name=editable]").val(d.editable);a.find("input[name=removable]").val(d.removable);a.find("input[name=show_menu]").attr("checked",(d.show_menu>0)?true:false);a.find("input[name=show_text]").attr("checked",(d.show_text>0)?true:false);a.find("input[name=sitemap_exclude]").attr("checked",(d.sitemap_exclude>0)?true:false);a.find("input[name=special]").attr("checked",(d.special>0)?true:false);a.find("input[name=order]").val(d.order);a.find("input[name=active]").attr("checked",(d.active>0)?true:false);a.find("input[name=parent_id]").val(d.parent_id);var e=g_root_url+"uploads/sections/"+d.icon;var b=g_root_url+"uploads/sections/"+d.image;if((a.find("input[name=icon]").length>0)&&RequestUtil.image_exists(e)){a.find(".image-upload[data-name=icon]").find(".preview").html('<img src="'+e+'" />')}if((a.find("input[name=image]").length>0)&&RequestUtil.image_exists(b)){a.find(".image-upload[data-name=image]").find(".preview").html('<img src="'+b+'" />')}}catch(c){console.log("Error in : ManageSection - post edit :["+c+"]")}};ManageSection.validate=function(a){var c=0;try{a.find(".error").html("").remove();if(c>0){console.log("validate found : "+c+" errors")}}catch(b){console.log("Error in : ManageSection - validate :["+b+"]")}return c};ManageSection.validate_notes=function(b){try{b.find(".error").html("").remove();var a=null;var d=null}catch(c){console.log("Error in : ManageSection - validate notes :["+c+"]")}};ManageSection.get_format_select=function(){var a="";a+='<option value="">Please select style</option><option value="'+STYLE_DEFAULT+'" selected>Default</option><option value="'+STYLE_MEDIA+'">Media</option>';return a};

    /*! targets */
    function ManageTarget(){}ManageTarget.get_form_properties=function(){var d=null;try{var a="target";var c={name:a,params:[{name:"title_ar",type:"text",label:CDictionary.get_text("TargetForm_TitleAr_lbl")+":"},{name:"title_en",type:"text",label:CDictionary.get_text("TargetForm_TitleEn_lbl")+":"},{type:"separator",label:""},{name:"keys_ar",type:"textarea",label:CDictionary.get_text("TargetForm_KeysAr_lbl")+":"},{name:"keys_en",type:"textarea",label:CDictionary.get_text("TargetForm_KeysEn_lbl")+":"},{name:"desc_ar",type:"textarea",label:CDictionary.get_text("TargetForm_DescAr_lbl")+":"},{name:"desc_en",type:"textarea",label:CDictionary.get_text("TargetForm_DescEn_lbl")+":"},{type:"separator",label:""},{name:"content_ar",type:"editor",label:CDictionary.get_text("TargetForm_ContentAr_lbl")+":"},{name:"content_en",type:"editor",label:CDictionary.get_text("TargetForm_ContentEn_lbl")+":"},{type:"separator",label:""},{name:"icon",type:"image",label:CDictionary.get_text("TargetForm_Icon_lbl")+":"},{name:"image",type:"image",label:CDictionary.get_text("TargetForm_Image_lbl")+":"},{type:"separator",label:""},{name:"format",type:"select",label:CDictionary.get_text("TargetForm_Format_lbl")+":"},{type:"separator",label:""},{name:"top_menu",type:"checkbox",label:CDictionary.get_text("TargetForm_TopMenu_lbl"),value:"1"},{name:"main_menu",type:"checkbox",label:CDictionary.get_text("TargetForm_MainMenu_lbl"),value:"1"},{name:"foot_menu",type:"checkbox",label:CDictionary.get_text("TargetForm_FootMenu_lbl"),value:"1"},{type:"separator",label:""},{name:"order",type:"text",label:CDictionary.get_text("TargetForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("TargetForm_Active_lbl"),value:"1"},{type:"separator",label:""},{name:"editable",type:"hidden",label:"",ignore_preview:true},{name:"removable",type:"hidden",label:"",ignore_preview:true},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"target_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.log("Error in : ManageTarget - get form properties :["+b+"]")}return d};ManageTarget.add=function(){try{CMSExtraUtil.show_form(ManageSectionChilds);var d=ManageSectionChilds.form_div;var a=ManageTarget.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_target",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageTarget.prepare,validate_func:ManageTarget.validate,validate_notes_func:ManageTarget.validate_notes};CMSUtil.create_form(b)}catch(c){console.log("Error in : ManageTarget - add :["+c+"]")}};ManageTarget.edit=function(d){try{CMSExtraUtil.show_form(ManageSectionChilds);var c=ManageSectionChilds.form_div;var a={cont_div:c,form_div:ManageTarget.get_form_properties().get_form_div(),form_action:g_request_url+"?action=update_target",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageTarget.prepare,post_func:ManageTarget.post_edit,post_args:d,validate_func:ManageTarget.validate,validate_notes_func:ManageTarget.validate_notes};CMSUtil.create_form(a)}catch(b){console.log("Error in : ManageTarget - edit :["+b+"]")}};ManageTarget.remove=function(d){try{var c=ManageSectionChildsOutput.get_object(d);var a=c.target_id;CMSExtraUtil.delete_popup(function(){var e=ManageSectionChilds.list_div;var f="action=remove_target&target_id="+a;RequestUtil.quick_post_request(e,f,ManageSectionChilds.callback)})}catch(b){console.log("Error in : ManageTarget - delete :["+b+"]")}};ManageTarget.view=function(e){try{var c=ManageSectionChildsOutput.get_object(e);var b=ManageTarget.get_form_properties();var d=b.get_preview_div();d.find("div[name=target_id]").html(c.target_id);d.find("div[name=title_ar]").html(c.title_ar);d.find("div[name=title_en]").html(c.title_en);d.find("div[name=keys_ar]").html(c.keys_ar);d.find("div[name=keys_en]").html(c.keys_en);d.find("div[name=desc_ar]").html(c.desc_ar);d.find("div[name=desc_en]").html(c.desc_en);d.find("div[name=content_ar]").html(c.content_ar);d.find("div[name=content_en]").html(c.content_en);d.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/targets/"+c.icon+'" />');d.find("div[name=image]").html('<img src="'+g_root_url+"uploads/targets/"+c.image+'" />');d.find("div[name=format]").html(c.format);d.find("div[name=top_menu]").html((c.top_menu>0)?gYes:gNo);d.find("div[name=main_menu]").html((c.main_menu>0)?gYes:gNo);d.find("div[name=foot_menu]").html((c.foot_menu>0)?gYes:gNo);d.find("div[name=show_menu]").html((c.show_menu>0)?gYes:gNo);d.find("div[name=show_text]").html((c.show_text>0)?gYes:gNo);d.find("div[name=order]").html(c.order);d.find("div[name=active]").html((c.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(d).html(),"Target Info")}catch(a){console.log("Error in : ManageTarget - view :["+a+"]")}};ManageTarget.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.log("Error in : ManageTarget - print :["+b+"]")}};ManageTarget.prepare=function(b){try{var a=ManageTarget.get_format_select();b.find("select[name=format]").html(a);if(ManageSectionChilds.parent_id>0){b.find("input[name=top_menu]").attr("disabled",true);b.find("input[name=main_menu]").attr("disabled",true);b.find("input[name=side_menu]").attr("disabled",true);b.find("input[name=foot_menu]").attr("disabled",true);b.find("input[name=top_menu]").hide();b.find("input[name=main_menu]").hide();b.find("input[name=side_menu]").hide();b.find("input[name=foot_menu]").hide();b.find("label[for^=top_menu_checkbox]").hide();b.find("label[for^=main_menu_checkbox]").hide();b.find("label[for^=side_menu_checkbox]").hide();b.find("label[for^=foot_menu_checkbox]").hide()}else{}b.find("input[name=parent_id]").val(ManageSectionChilds.parent_id)}catch(c){console.log("Error in : ManageTarget - prepare :["+c+"]")}};ManageTarget.post_edit=function(f){try{var d=ManageSectionChildsOutput.get_object(f);var a=ManageSectionChilds.form_div;a.find("input[name=target_id]").val(d.target_id);a.find("input[name=title_ar]").val(d.title_ar);a.find("input[name=title_en]").val(d.title_en);a.find("textarea[name=keys_ar]").val(d.keys_ar);a.find("textarea[name=keys_en]").val(d.keys_en);a.find("textarea[name=desc_ar]").val(d.desc_ar);a.find("textarea[name=desc_en]").val(d.desc_en);a.find("input[name=content_ar]").val(d.content_ar);a.find("input[name=content_en]").val(d.content_en);a.find("div[name=content_ar]").html(d.content_ar);a.find("div[name=content_en]").html(d.content_en);a.find("select[name=style]").find("option[value="+d.style+"]").attr("selected",true);a.find("input[name=top_menu]").attr("checked",(d.top_menu>0)?true:false);a.find("input[name=main_menu]").attr("checked",(d.main_menu>0)?true:false);a.find("input[name=foot_menu]").attr("checked",(d.foot_menu>0)?true:false);a.find("input[name=editable]").val(d.editable);a.find("input[name=removable]").val(d.removable);a.find("input[name=order]").val(d.order);a.find("input[name=active]").attr("checked",(d.active>0)?true:false);a.find("input[name=parent_id]").val(d.parent_id);a.find("input[name=parent_id]").val(d.parent_id);var e=g_root_url+"uploads/targets/"+d.icon;var b=g_root_url+"uploads/targets/"+d.image;if((a.find("input[name=icon]").length>0)&&RequestUtil.image_exists(e)){a.find(".image-upload[data-name=icon]").find(".preview").html('<img src="'+e+'" />')}if((a.find("input[name=image]").length>0)&&RequestUtil.image_exists(b)){a.find(".image-upload[data-name=image]").find(".preview").html('<img src="'+b+'" />')}}catch(c){console.log("Error in : ManageTarget - post edit :["+c+"]")}};ManageTarget.validate=function(a){var c=0;try{a.find(".error").html("").remove();if(c>0){console.log("validate found : "+c+" errors")}}catch(b){console.log("Error in : ManageTarget - validate :["+b+"]")}return c};ManageTarget.validate_notes=function(b){try{b.find(".error").html("").remove();var a=null;var d=null}catch(c){console.log("Error in : ManageTarget - validate notes :["+c+"]")}};ManageTarget.get_format_select=function(){var a="";a+='<option value="">Please select style</option><option value="'+STYLE_DEFAULT+'" selected>Default</option>';return a};

    /*! embeds */
    function ManageEmbed(){}ManageEmbed.get_form_properties=function(){var d=null;try{var a="embed";var c={name:a,params:[{name:"title_ar",type:"text",label:CDictionary.get_text("EmbedForm_TitleAr_lbl")+":"},{name:"title_en",type:"text",label:CDictionary.get_text("EmbedForm_TitleEn_lbl")+":"},{type:"separator",label:""},{name:"icon",type:"image",label:CDictionary.get_text("EmbedForm_Icon_lbl")+":"},{name:"type",type:"select",label:CDictionary.get_text("EmbedForm_Type_lbl")+":"},{name:"file",type:"div",label:CDictionary.get_text("EmbedForm_File_lbl")+":"},{type:"separator",label:""},{name:"order",type:"text",label:CDictionary.get_text("EmbedForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("EmbedForm_Active_lbl")+":",value:"1"},{type:"separator",label:""},{name:"parent_type",type:"hidden",label:"",ignore_preview:true},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"embed_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.log("Error in : ManageEmbed -  get form properties :["+b+"]")}return d};ManageEmbed.add=function(){try{CMSExtraUtil.show_form(ManageSectionChilds);var d=ManageSectionChilds.form_div;var a=ManageEmbed.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_embed",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageEmbed.prepare,validate_func:ManageEmbed.validate,validate_notes_func:ManageEmbed.validate_notes};CMSUtil.create_form(b)}catch(c){console.log("Error in : ManageEmbed -  add :["+c+"]")}};ManageEmbed.edit=function(d){try{CMSExtraUtil.show_form(ManageSectionChilds);var c=ManageSectionChilds.form_div;var a={cont_div:c,form_div:ManageEmbed.get_form_properties().get_form_div(),form_action:g_request_url+"?action=update_embed",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageEmbed.prepare,post_func:ManageEmbed.post_edit,post_args:d,validate_func:ManageEmbed.validate,validate_notes_func:ManageEmbed.validate_notes};CMSUtil.create_form(a)}catch(b){console.log("Error in : ManageEmbed -  edit :["+b+"]")}};ManageEmbed.remove=function(d){try{var c=ManageSectionChildsOutput.get_object(d);var a=c.embed_id;CMSExtraUtil.delete_popup(function(){var e=ManageSectionChilds.list_div;var f="action=remove_embed&embed_id="+a;RequestUtil.quick_post_request(e,f,ManageSectionChilds.callback)})}catch(b){console.log("Error in : ManageEmbed -  delete :["+b+"]")}};ManageEmbed.view=function(e){try{var d=ManageSectionChildsOutput.get_object(e);var b=ManageEmbed.get_form_properties();var c=b.get_preview_div();c.find("div[name=embed_id]").html(d.embed_id);c.find("div[name=title_ar]").html(d.title_ar);c.find("div[name=title_en]").html(d.title_en);c.find("div[name=keys_ar]").html(d.keys_ar);c.find("div[name=keys_en]").html(d.keys_en);c.find("div[name=desc_ar]").html(d.desc_ar);c.find("div[name=desc_en]").html(d.desc_en);c.find("div[name=content_ar]").html(d.content_ar);c.find("div[name=content_en]").html(d.content_en);c.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/embeds/"+d.icon+'" />');c.find("div[name=file]").html(ManageEmbed.get_file(d.file,d.type));c.find("div[name=type]").html(ManageEmbed.get_type(d.type));c.find("div[name=style]").html(d.style);c.find("div[name=top_menu]").html((d.top_menu>0)?gYes:gNo);c.find("div[name=side_menu]").html((d.side_menu>0)?gYes:gNo);c.find("div[name=foot_menu]").html((d.foot_menu>0)?gYes:gNo);c.find("div[name=show_menu]").html((d.show_menu>0)?gYes:gNo);c.find("div[name=show_text]").html((d.show_text>0)?gYes:gNo);c.find("div[name=order]").html(d.order);c.find("div[name=active]").html((d.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(c).html(),"Embed Info")}catch(a){console.log("Error in : ManageEmbed -  view :["+a+"]")}};ManageEmbed.print=function(b){try{CMSExtraUtil.print_div_popup(b.html(),"",950,700)}catch(a){console.log("Error in : ManageEmbed -  print :["+a+"]")}};ManageEmbed.prepare=function(b){try{var a=ManageEmbed.get_style_select();b.find("select[name=style]").html(a);if(ManageSectionChilds.parent_id>0){b.find("input[name=top_menu]").attr("disabled",true);b.find("input[name=main_menu]").attr("disabled",true);b.find("input[name=side_menu]").attr("disabled",true);b.find("input[name=foot_menu]").attr("disabled",true);b.find("input[name=top_menu]").hide();b.find("input[name=main_menu]").hide();b.find("input[name=side_menu]").hide();b.find("input[name=foot_menu]").hide();b.find("label[for^=top_menu_checkbox]").hide();b.find("label[for^=main_menu_checkbox]").hide();b.find("label[for^=side_menu_checkbox]").hide();b.find("label[for^=foot_menu_checkbox]").hide()}else{}b.find("input[name=parent_id]").val(ManageSectionChilds.parent_id);ManageEmbed.form_settings(b)}catch(c){console.log("Error in : ManageEmbed -  prepare :["+c+"]")}};ManageEmbed.post_edit=function(e){try{var d=ManageSectionChildsOutput.get_object(e);var a=ManageSectionChilds.form_div;a.find("input[name=embed_id]").val(d.embed_id);a.find("input[name=title_ar]").val(d.title_ar);a.find("input[name=title_en]").val(d.title_en);a.find("textarea[name=desc_ar]").val(d.desc_ar);a.find("textarea[name=desc_en]").val(d.desc_en);a.find("select[name=type]").find("option[value="+d.type+"]").attr("selected",true);a.find("input[name=order]").val(d.order);a.find("input[name=active]").attr("checked",(d.active>0)?"checked":"");a.find("input[name=parent_id]").val(d.parent_id);ManageEmbed.change_file_type(a,d.type);ManageEmbed.set_file_value(a,d.type,d.file);var c=g_root_url+"uploads/embeds/"+d.icon;if((a.find("input[name=icon]").length>0)&&RequestUtil.image_exists(c)){a.find(".image-upload[data-name=icon]").find(".preview").html('<img src="'+c+'" />')}}catch(b){console.log("Error in : ManageEmbed -  post edit :["+b+"]")}};ManageEmbed.validate=function(a){var c=0;try{a.find(".error").html("").remove();if(c>0){console.log("validate found : "+c+" errors")}}catch(b){console.log("Error in : ManageEmbed -  validate :["+b+"]")}return c};ManageEmbed.validate_notes=function(b){try{b.find(".error").html("").remove();var a=null;var d=null}catch(c){console.log("Error in : ManageEmbed -  validate notes :["+c+"]")}};ManageEmbed.get_format_select=function(){var a="";a+='<option value="">Please select style</option><option value="'+STYLE_DEFAULT+'" selected>Default</option>';return a};ManageEmbed.form_settings=function(a){try{a.find("select[name=type]").html('<option value="1">Download</option><option value="2">Image</option><option value="3">Flash</option><option value="5">Video</option><option value="6">Youtube</option><option value="7">Vimeo</option><option value="8">Embed Code</option><option value="9">Sound Cloud</option>');a.find("select[name=type]").change(function(){ManageEmbed.change_file_type(a,$(this).val())});a.find("select[name=type]").find("option[value="+TYPE_IMAGE+"]").attr("selected",true);ManageEmbed.change_file_type(a,TYPE_IMAGE);a.find("input[name=parent_id]").val(g_parent_id)}catch(b){console.log("Error in : ManageEmbed - form setting:["+b+"]")}};ManageEmbed.change_file_type=function(b,a){try{var c=Utils.get_int(a);switch(c){case TYPE_DOWNLOAD:b.find("div[name=file]").html('<input type="file" name="file" value="" />');break;case TYPE_IMAGE:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="image/x-png, image/gif, image/jpeg" />');break;case TYPE_FLASH:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="application/x-shockwave-flash swf" />');break;case TYPE_VIDEO:b.find("div[name=file]").html('<input type="file" name="file1" value="" accept="video/mp4"  /> mp4  <br /><input type="file" name="file2" value="" accept="video/ogg"  /> ogv  <br /><input type="file" name="file3" value="" accept="video/webm" /> webm <br />');break;case TYPE_YOUTUBE:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;case TYPE_VIMEO:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;case TYPE_EMBED_CODE:b.find("div[name=file]").html('<textarea name="file" cols="45" rows="5"></textarea>');break;case TYPE_SOUND_CLOUD:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;default:break}}catch(d){console.log("Error in : ManageEmbed - change file type :["+d+"]")}};ManageEmbed.set_file_value=function(c,b,a){try{var d=Utils.get_int(b);switch(d){case TYPE_DOWNLOAD:c.find("div[name=file]").append(a);break;case TYPE_IMAGE:c.find("div[name=file]").append(a);break;case TYPE_FLASH:c.find("div[name=file]").append(a);break;case TYPE_VIDEO:c.find("div[name=file]").append(a);break;case TYPE_YOUTUBE:c.find("input[name=file]").val("http://www.youtube.com/watch?v="+a);break;case TYPE_VIMEO:c.find("input[name=file]").val("http://vimeo.com/"+a);break;case TYPE_EMBED_CODE:c.find("textarea[name=file]").html(a);break;case TYPE_SOUND_CLOUD:c.find("input[name=file]").val(a);break;default:break}}catch(e){console.log("Error in : ManageEmbed - set file value :["+e+"]")}};ManageEmbed.get_file=function(b,d){var g="";try{d=parseInt(d);var f=""+g_root_url+"uploads/embeds";var c=350;var a=300;switch(d){case TYPE_DOWNLOAD:g=DisplayUtil.get_download_embed(f+"/"+b);break;case TYPE_IMAGE:g=DisplayUtil.get_image_embed(f+"/"+b,c,a);break;case TYPE_FLASH:g=DisplayUtil.get_flash_embed(f+"/"+b,c,a);break;case TYPE_SOUND:g=DisplayUtil.get_jsplayer_sound_embed(b,c,a,f);break;case TYPE_VIDEO:g=DisplayUtil.get_jsplayer_video_embed(b,c,a,f);break;case TYPE_YOUTUBE:g=DisplayUtil.get_youtube_video_embed(b,c,a,false);break;case TYPE_VIMEO:g=DisplayUtil.get_vimeo_video_embed(b,c,a,false);break;case TYPE_EMBED_CODE:g=b;break;case TYPE_SOUND_CLOUD:g=DisplayUtil.get_sound_cloud_embed(b,c,a,false);break;default:break}}catch(e){console.log("Error in : ManageEmbed - get file :["+e+"]")}return g};ManageEmbed.get_type=function(a){var c="";try{a=parseInt(a);switch(a){case TYPE_DOWNLOAD:c=CDictionary.get_text("File_Type_Download_lbl");break;case TYPE_IMAGE:c=CDictionary.get_text("File_Type_Image_lbl");break;case TYPE_FLASH:c=CDictionary.get_text("File_Type_Flash_lbl");break;case TYPE_SOUND:c=CDictionary.get_text("File_Type_Sound_lbl");break;case TYPE_VIDEO:c=CDictionary.get_text("File_Type_Video_lbl");break;case TYPE_YOUTUBE:c=CDictionary.get_text("File_Type_Youtube_lbl");break;case TYPE_VIMEO:c=CDictionary.get_text("File_Type_Vimeo_lbl");break;case TYPE_EMBED_CODE:c=CDictionary.get_text("File_Type_Embed_Code_lbl");break;case TYPE_SOUND_CLOUD:c=CDictionary.get_text("File_Type_SoundCloud_lbl");break}}catch(b){console.log("Error in : ManageEmbed - get type :["+b+"]")}return c};

    /*! links */
    function ManageLink(){}ManageLink.get_form_properties=function(){var d=null;try{var a="link";var c={name:a,params:[{name:"title_ar",type:"text",label:CDictionary.get_text("LinkForm_TitleAr_lbl")+":"},{name:"title_en",type:"text",label:CDictionary.get_text("LinkForm_TitleEn_lbl")+":"},{type:"separator",label:""},{name:"desc_ar",type:"textarea",label:CDictionary.get_text("LinkForm_DescAr_lbl")+":"},{name:"desc_en",type:"textarea",label:CDictionary.get_text("LinkForm_DescEn_lbl")+":"},{type:"separator",label:""},{name:"icon",type:"image",label:CDictionary.get_text("LinkForm_Icon_lbl")+":"},{type:"separator",label:""},{name:"url_ar",type:"text",label:CDictionary.get_text("LinkForm_UrlAr_lbl")+":"},{name:"url_en",type:"text",label:CDictionary.get_text("LinkForm_UrlEn_lbl")+":"},{type:"separator",label:""},{name:"top_menu",type:"checkbox",label:CDictionary.get_text("LinkForm_TopMenu_lbl")+":",value:"1"},{name:"main_menu",type:"checkbox",label:CDictionary.get_text("LinkForm_MainMenu_lbl")+":",value:"1"},{name:"foot_menu",type:"checkbox",label:CDictionary.get_text("LinkForm_FootMenu_lbl")+":",value:"1"},{type:"separator",label:""},{name:"new_window",type:"checkbox",label:CDictionary.get_text("LinkForm_NewWindow_lbl")+":",value:"1"},{type:"separator",label:""},{name:"order",type:"text",label:CDictionary.get_text("LinkForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("LinkForm_Active_lbl")+":",value:"1"},{type:"separator",label:""},{name:"editable",type:"hidden",label:"",ignore_preview:true},{name:"removable",type:"hidden",label:"",ignore_preview:true},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"link_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.log("Error in : ManageLink - get form properties :["+b+"]")}return d};ManageLink.add=function(){try{CMSExtraUtil.show_form(ManageSectionChilds);var d=ManageSectionChilds.form_div;var a=ManageLink.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_link",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageLink.prepare,validate_func:ManageLink.validate,validate_notes_func:ManageLink.validate_notes};CMSUtil.create_form(b)}catch(c){console.log("Error in : ManageLink - add :["+c+"]")}};ManageLink.edit=function(d){try{CMSExtraUtil.show_form(ManageSectionChilds);var c=ManageSectionChilds.form_div;var a={cont_div:c,form_div:ManageLink.get_form_properties().get_form_div(),form_action:g_request_url+"?action=update_link",complete_callback:ManageSectionChilds.callback,cancel_callback:ManageSectionChilds.cancel,prepare_func:ManageLink.prepare,post_func:ManageLink.post_edit,post_args:d,validate_func:ManageLink.validate,validate_notes_func:ManageLink.validate_notes};CMSUtil.create_form(a)}catch(b){console.log("Error in : ManageLink - edit :["+b+"]")}};ManageLink.remove=function(d){try{var b=ManageSectionChildsOutput.get_object(d);var c=b.link_id;CMSExtraUtil.delete_popup(function(){var e=ManageSectionChilds.list_div;var f="action=remove_link&link_id="+c;RequestUtil.quick_post_request(e,f,ManageSectionChilds.callback)})}catch(a){console.log("Error in : ManageLink - delete :["+a+"]")}};ManageLink.view=function(e){try{var b=ManageSectionChildsOutput.get_object(e);var c=ManageLink.get_form_properties();var d=c.get_preview_div();d.find("div[name=link_id]").html(b.link_id);d.find("div[name=title_ar]").html(b.title_ar);d.find("div[name=title_en]").html(b.title_en);d.find("div[name=keys_ar]").html(b.keys_ar);d.find("div[name=keys_en]").html(b.keys_en);d.find("div[name=desc_ar]").html(b.desc_ar);d.find("div[name=desc_en]").html(b.desc_en);d.find("div[name=content_ar]").html(b.content_ar);d.find("div[name=content_en]").html(b.content_en);d.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/links/"+b.icon+'" />');d.find("div[name=image]").html('<img src="'+g_root_url+"uploads/links/"+b.image+'" />');d.find("div[name=url_ar]").html(b.url_ar);d.find("div[name=url_en]").html(b.url_en);d.find("div[name=style]").html(b.style);d.find("div[name=top_menu]").html((b.top_menu>0)?gYes:gNo);d.find("div[name=main_menu]").html((b.main_menu>0)?gYes:gNo);d.find("div[name=foot_menu]").html((b.foot_menu>0)?gYes:gNo);d.find("div[name=new_window]").html((b.new_window>0)?gYes:gNo);d.find("div[name=show_menu]").html((b.show_menu>0)?gYes:gNo);d.find("div[name=show_text]").html((b.show_text>0)?gYes:gNo);d.find("div[name=order]").html(b.order);d.find("div[name=active]").html((b.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(d).html(),"Link Info")}catch(a){console.log("Error in : ManageLink - view :["+a+"]")}};ManageLink.print=function(b){try{CMSExtraUtil.print_div_popup(b.html(),"",950,700)}catch(a){console.log("Error in : ManageLink - print :["+a+"]")}};ManageLink.prepare=function(b){try{var a=ManageLink.get_style_select();b.find("select[name=style]").html(a);if(ManageSectionChilds.parent_id>0){b.find("input[name=top_menu]").attr("disabled",true);b.find("input[name=main_menu]").attr("disabled",true);b.find("input[name=side_menu]").attr("disabled",true);b.find("input[name=foot_menu]").attr("disabled",true);b.find("input[name=top_menu]").hide();b.find("input[name=main_menu]").hide();b.find("input[name=side_menu]").hide();b.find("input[name=foot_menu]").hide();b.find("label[for^=top_menu_checkbox]").hide();b.find("label[for^=main_menu_checkbox]").hide();b.find("label[for^=side_menu_checkbox]").hide();b.find("label[for^=foot_menu_checkbox]").hide()}else{}b.find("input[name=parent_id]").val(ManageSectionChilds.parent_id)}catch(c){console.log("Error in : ManageLink - prepare :["+c+"]")}};ManageLink.post_edit=function(f){try{var d=ManageSectionChildsOutput.get_object(f);var a=ManageSectionChilds.form_div;a.find("input[name=link_id]").val(d.link_id);a.find("input[name=title_ar]").val(d.title_ar);a.find("input[name=title_en]").val(d.title_en);a.find("textarea[name=keys_ar]").val(d.keys_ar);a.find("textarea[name=keys_en]").val(d.keys_en);a.find("textarea[name=desc_ar]").val(d.desc_ar);a.find("textarea[name=desc_en]").val(d.desc_en);a.find("input[name=url_ar]").val(d.url_ar);a.find("input[name=url_en]").val(d.url_en);a.find("select[name=style]").find("option[value="+d.style+"]").attr("selected",true);a.find("input[name=top_menu]").attr("checked",(d.top_menu>0)?true:false);a.find("input[name=main_menu]").attr("checked",(d.main_menu>0)?true:false);a.find("input[name=foot_menu]").attr("checked",(d.foot_menu>0)?true:false);a.find("input[name=editable]").val(d.editable);a.find("input[name=removable]").val(d.removable);a.find("input[name=show_menu]").attr("checked",(d.show_menu>0)?true:false);a.find("input[name=show_text]").attr("checked",(d.show_text>0)?true:false);a.find("input[name=order]").val(d.order);a.find("input[name=active]").attr("checked",(d.active>0)?true:false);a.find("input[name=parent_id]").val(d.parent_id);var e=g_root_url+"uploads/links/"+d.icon;var b=g_root_url+"uploads/links/"+d.image;if((a.find("input[name=icon]").length>0)&&RequestUtil.image_exists(e)){a.find(".image-upload[data-name=icon]").find(".preview").html('<img src="'+e+'" />')}if((a.find("input[name=image]").length>0)&&RequestUtil.image_exists(b)){a.find(".image-upload[data-name=image]").find(".preview").html('<img src="'+b+'" />')}}catch(c){console.log("Error in : ManageLink - post edit :["+c+"]")}};ManageLink.validate=function(a){var c=0;try{a.find(".error").html("").remove();if(c>0){console.log("validate found : "+c+" errors")}}catch(b){console.log("Error in : ManageLink - validate :["+b+"]")}return c};ManageLink.validate_notes=function(b){try{b.find(".error").html("").remove();var a=null;var d=null}catch(c){console.log("Error in : ManageLink - validate notes :["+c+"]")}};ManageLink.get_format_select=function(){var a="";a+='<option value="">Please select style</option><option value="'+STYLE_DEFAULT+'" selected>Default</option>';return a};

    /*! category childs */
    var COLOR_PATTERN=/#[a-fA-F0-9]{6}/;var CHILD_TYPE_CATEGORY=1;var CHILD_TYPE_PRODUCT=2;var CHILD_TYPE_EMBED=3;var CHILD_TYPE_LINK=4;var STYLE_DEFAULT=1;var STYLE_MEDIA=2;function ManageCategoryChilds(){}ManageCategoryChilds.parent_id=-1;ManageCategoryChilds.array=[];ManageCategoryChilds.init=function(e){try{ManageCategoryChilds.parent_id=Utils.get_int(e);ManageCategoryChilds.parent_id=(ManageCategoryChilds.parent_id>0)?ManageCategoryChilds.parent_id:0;var f=$("#body").find("#content");f.html("");f.append('<div class="top_label_main"         onclick="ManageCategoryChilds.init('+ManageCategoryChilds.parent_id+'); return false;">'+CDictionary.get_text("Categories_lbl")+'</div><div class="top_label new_label"    onclick="ManageCategory.add(); return false;">'+CDictionary.get_text("New_lbl")+" "+CDictionary.get_text("Category_lbl")+'</div><div class="top_label new_label"    onclick="ManageProduct.add();  return false;">'+CDictionary.get_text("New_lbl")+" "+CDictionary.get_text("Product_lbl")+"</div>");f.append('<div class="clearfix"></div>');f.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="path"></div><div id="list"></div></div>');var b=$("#body").find("#content").find("#form");var c=$("#body").find("#content").find("#path");var a=$("#body").find("#content").find("#list");ManageCategoryChilds.form_div=b;ManageCategoryChilds.path_div=c;ManageCategoryChilds.list_div=a;ManageCategoryChilds.index=0;ManageCategoryChilds.count=10;CMSExtraUtil.show_list(ManageCategoryChilds);ManageCategoryChilds.load();ManageCategoryChilds.load_path()}catch(d){console.error("Error in : ManageCategoryChilds - ManageCategoryChilds.init :["+d+"]")}};ManageCategoryChilds.load_path=function(){try{var c=ManageCategoryChilds.parent_id;var d={action:"category_path",index:-1,count:-1,category_id:c};var a=ManageCategoryChilds.path_div;a.html("");RequestUtil.quick_post_request(a,d,function(j){var e=j.status;if(e>0){var f=j.categories;var h="";h+='<a href="javascript:ManageCategoryChilds.init(0);" class="cell">'+CDictionary.get_text("Categories_lbl")+"</a>";for(var g=0;g<f.length;g++){var k=f[g];var l=CDictionary.get_text_by_lang(k,"title");h+='<a href="javascript:ManageCategoryChilds.init('+k.category_id+');" class="cell">'+l+"</a>"}a.html(h)}})}catch(b){console.error("Error in : ManageCategoryChilds - load_path :["+b+"]")}};ManageCategoryChilds.cancel=function(){try{CMSExtraUtil.show_list(ManageCategoryChilds);ManageCategoryChilds.load()}catch(a){console.error("Error in : ManageCategoryChilds - cancel :["+a+"]")}};ManageCategoryChilds.load=function(b,d){try{ManageCategoryChilds.index=(b==null)?ManageCategoryChilds.index:b;ManageCategoryChilds.count=(d==null)?ManageCategoryChilds.count:d;var a=ManageCategoryChilds.list_div;var e="action=category_childs&parent_id="+ManageCategoryChilds.parent_id+"&index="+ManageCategoryChilds.index+"&count="+ManageCategoryChilds.count;RequestUtil.quick_post_request(a,e,function(g){try{var f=g.status;if(f>0){var h=g.category_childs;var j=g.result_count;ManageCategoryChilds.display_list(h,j,SOURCE_LIST)}}catch(i){console.log("error in load category childs :["+i+"]")}})}catch(c){console.error("Error in : ManageCategoryChilds - load :["+c+"]")}};ManageCategoryChilds.display_list=function(h,i,a){try{ManageCategoryChilds.array=h;var b=ManageCategoryChilds.list_div;var f=CDictionary.get_labels(["CategoryChildsList_ChildId_lbl","CategoryChildsList_Title_lbl","CategoryChildsList_Order_lbl","CategoryChildsList_Active_lbl"]);var g=["ManageCategoryChildsOutput.get_id(child_index)","ManageCategoryChildsOutput.get_link(title_ar,title_en,child_type,child_id)","order","active"];var c="child_index";CMSUtil.show_list(b,f,g,h,c,"ManageCategoryChilds.edit","ManageCategoryChilds.remove","ManageCategoryChilds.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageCategoryChilds.search":"ManageCategoryChilds.load";CMSUtil.show_pagination(b,d,[],i,ManageCategoryChilds.index,ManageCategoryChilds.count,(ManageCategoryChilds.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageCategoryChilds - display list :["+e+"]")}};ManageCategoryChilds.edit=function(d){try{var c=ManageCategoryChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_CATEGORY:ManageCategory.edit(c.child_index);break;case CHILD_TYPE_PRODUCT:ManageProduct.edit(c.child_index);break}}catch(b){console.error("Error in : ManageCategoryChilds - edit category child :["+b+"]")}};ManageCategoryChilds.remove=function(d){try{var c=ManageCategoryChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_CATEGORY:ManageCategory.remove(c.child_index);break;case CHILD_TYPE_PRODUCT:ManageProduct.remove(c.child_index);break}}catch(b){console.error("Error in : ManageCategoryChilds - remove :["+b+"]")}};ManageCategoryChilds.view=function(d){try{var c=ManageCategoryChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_CATEGORY:ManageCategory.view(c.child_index);break;case CHILD_TYPE_PRODUCT:ManageProduct.view(c.child_index);break}}catch(b){console.error("Error in : ManageCategoryChilds - view :["+b+"]")}};ManageCategoryChilds.print=function(d){try{var c=ManageCategoryChildsOutput.get_object(d);var a=Utils.get_int(c.child_type);switch(a){case CHILD_TYPE_CATEGORY:ManageCategory.print(c.child_index);break;case CHILD_TYPE_PRODUCT:ManageProduct.print(c.child_index);break}}catch(b){console.error("Error in : ManageCategoryChilds - print :["+b+"]")}};ManageCategoryChilds.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}CMSExtraUtil.show_list(ManageCategoryChilds);ManageCategoryChilds.load();$("body").trigger("categorys_updated")}catch(c){console.error("Error in : ManageCategoryChilds - callback :["+c+"]")}};ManageCategoryChilds.get_search_form_properties=function(){var a="category";var b={name:a,params:[{name:"category_id",type:"text",label:CDictionary.get_text("CategoryForm_CategoryId_lbl")+":"},{name:"title",type:"text",label:CDictionary.get_text("CategoryForm_Title_lbl")+":"},{name:"child_type",type:"select",label:CDictionary.get_text("CategoryForm_ChildType_lbl")+":"},{type:"separator",label:""}],action:"",method:"post",enctype:"application/x-www-form-urlencoded",style:"style2"};var c=new CForm(b);return c};ManageCategoryChilds.search_form=function(){$("#body").find("#content").find("#form_cell_new").html("");$("#body").find("#content").find("#form_cell_import").html("");var c=$("#body").find("#content").find("#form_cell_search");c.html("");var a=ManageCategoryChilds.get_search_form_properties().get_form_div();var b={cont_div:c,form_div:a,form_action:g_request_url+"?action=search_category_childs&index="+ManageCategoryChilds.index+"&count="+ManageCategoryChilds.count,complete_callback:null,prepare_func:ManageCategoryChilds.prepare_search_form,animated:false};CMSUtil.create_form(b)};ManageCategoryChilds.prepare_search_form=function(a){var b=ManageCategoryChildsOutput.get_object_type_select_options();a.find("select[name=child_type]").html(b);a.find("input[type=submit]").click(function(c){c.preventDefault();var d={action:"ManageCategoryChilds.search",index:ManageCategoryChilds.index,count:ManageCategoryChilds.count,category_id:a.find("input[name=category_id]").val(),title:a.find("input[name=title]").val(),child_type:a.find("select[name=child_type]").val()};g_search_object=d;ManageCategoryChilds.search(ManageCategoryChilds.index,ManageCategoryChilds.count);return false})};ManageCategoryChilds.search=function(b,c){ManageCategoryChilds.index=(b==null)?ManageCategoryChilds.index:b;ManageCategoryChilds.count=(c==null)?ManageCategoryChilds.count:c;var a=ManageCategoryChilds.list_div;var d=ManageCategoryChilds.search_object;d.index=ManageCategoryChilds.index;d.count=ManageCategoryChilds.count;RequestUtil.quick_post_request(a,d,function(g){var e=g.status;if(e>0){var f=g.categorys;var h=g.result_count;ManageCategoryChilds.display_list(f,h,SOURCE_SEARCH)}})};function ManageCategoryChildsOutput(){}ManageCategoryChildsOutput.get_id=function(a){return number_pad(a,6)};ManageCategoryChildsOutput.get_object=function(d){var c=null;try{for(var a=0;a<ManageCategoryChilds.array.length;a++){if(ManageCategoryChilds.array[a].child_index==d){c=ManageCategoryChilds.array[a];break}}}catch(b){console.log("Error in : ManageCategoryChildsOutput - get object :["+b+"]")}return c};ManageCategoryChildsOutput.get_link=function(f,g,b,h){var d="";var c=(CDictionary.lang=="ar")?f:g;b=Utils.get_int(b);switch(b){case CHILD_TYPE_CATEGORY:var e=h;d='<img src="'+g_root_url+'images/manage/icons/category.png"> <a href="#" onclick="ManageCategoryChilds.init('+e+')">'+c+"</a>";break;case CHILD_TYPE_PRODUCT:var a=h;d='<img src="'+g_root_url+'images/manage/icons/product.png"> <a href="#" onclick="ManageProduct.view('+a+')">'+c+'</a> [ <a href="#" onclick="ManageShot.init('+a+')">'+CDictionary.get_text("Shots_lbl")+"</a> ] ";break}return d};ManageCategoryChildsOutput.get_icon=function(a){var b="";a=Utils.get_int(a);switch(a){case CHILD_TYPE_CATEGORY:b='<img src="'+g_root_url+'images/cms/category.png">';break;case CHILD_TYPE_PRODUCT:b='<img src="'+g_root_url+'images/cms/product.png">';break}return b};

    /*! categories */
    function ManageCategory(){}ManageCategory.get_form_properties=function(){var d=null;try{var a="category";var c={name:a,params:[{name:"title_ar",type:"text",label:CDictionary.get_text("CategoryForm_TitleAr_lbl")+":"},{name:"title_en",type:"text",label:CDictionary.get_text("CategoryForm_TitleEn_lbl")+":"},{type:"separator",label:""},{name:"keys_ar",type:"textarea",label:CDictionary.get_text("CategoryForm_KeysAr_lbl")+":"},{name:"keys_en",type:"textarea",label:CDictionary.get_text("CategoryForm_KeysEn_lbl")+":"},{name:"desc_ar",type:"textarea",label:CDictionary.get_text("CategoryForm_DescAr_lbl")+":"},{name:"desc_en",type:"textarea",label:CDictionary.get_text("CategoryForm_DescEn_lbl")+":"},{type:"separator",label:""},{type:"separator",label:""},{name:"icon",type:"image",label:CDictionary.get_text("CategoryForm_Icon_lbl")+":"},{type:"separator",label:""},{name:"format",type:"select",label:CDictionary.get_text("CategoryForm_Format_lbl")+":"},{type:"separator",label:""},{name:"top_menu",type:"checkbox",label:CDictionary.get_text("CategoryForm_TopMenu_lbl")+":",value:"1"},{name:"foot_menu",type:"checkbox",label:CDictionary.get_text("CategoryForm_FootMenu_lbl")+":",value:"1"},{type:"separator",label:""},{name:"show_menu",type:"checkbox",label:CDictionary.get_text("CategoryForm_ShowMenu_lbl")+":",value:"1"},{name:"show_text",type:"checkbox",label:CDictionary.get_text("CategoryForm_ShowText_lbl")+":",value:"1"},{type:"separator",label:""},{name:"order",type:"text",label:CDictionary.get_text("CategoryForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("CategoryForm_Active_lbl")+":",value:"1"},{type:"separator",label:""},{name:"editable",type:"hidden",label:"",ignore_preview:true},{name:"removable",type:"hidden",label:"",ignore_preview:true},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"category_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.log("Error in : ManageCategory - get form properties :["+b+"]")}return d};ManageCategory.add=function(){try{CMSExtraUtil.show_form(ManageCategoryChilds);var d=ManageCategoryChilds.form_div;var a=ManageCategory.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_category",complete_callback:ManageCategoryChilds.callback,cancel_callback:ManageCategoryChilds.cancel,prepare_func:ManageCategory.prepare,validate_func:ManageCategory.validate,validate_notes_func:ManageCategory.validate_notes};CMSUtil.create_form(b)}catch(c){console.log("Error in : ManageCategory - add :["+c+"]")}};ManageCategory.edit=function(d){try{CMSExtraUtil.show_form(ManageCategoryChilds);var c=ManageCategoryChilds.form_div;var a={cont_div:c,form_div:ManageCategory.get_form_properties().get_form_div(),form_action:g_request_url+"?action=update_category",complete_callback:ManageCategoryChilds.callback,cancel_callback:ManageCategoryChilds.cancel,prepare_func:ManageCategory.prepare,post_func:ManageCategory.post_edit,post_args:d,validate_func:ManageCategory.validate,validate_notes_func:ManageCategory.validate_notes};CMSUtil.create_form(a)}catch(b){console.log("Error in : ManageCategory - edit :["+b+"]")}};ManageCategory.remove=function(d){try{var c=ManageCategoryChildsOutput.get_object(d);var b=c.category_id;CMSExtraUtil.delete_popup(function(){var e=ManageCategoryChilds.list_div;var f="action=remove_category&category_id="+b;RequestUtil.quick_post_request(e,f,ManageCategoryChilds.callback)})}catch(a){console.log("Error in : ManageCategory - delete :["+a+"]")}};ManageCategory.view=function(e){try{var b=ManageCategoryChildsOutput.get_object(e);var c=ManageCategory.get_form_properties();var d=c.get_preview_div();d.find("div[name=category_id]").html(b.category_id);d.find("div[name=title_ar]").html(b.title_ar);d.find("div[name=title_en]").html(b.title_en);d.find("div[name=keys_ar]").html(b.keys_ar);d.find("div[name=keys_en]").html(b.keys_en);d.find("div[name=desc_ar]").html(b.desc_ar);d.find("div[name=desc_en]").html(b.desc_en);d.find("div[name=content_ar]").html(b.content_ar);d.find("div[name=content_en]").html(b.content_en);d.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/categories/"+b.icon+'" />');d.find("div[name=image]").html('<img src="'+g_root_url+"uploads/categories/"+b.image+'" />');d.find("div[name=format]").html(b.format);d.find("div[name=top_menu]").html((b.top_menu>0)?gYes:gNo);d.find("div[name=side_menu]").html((b.side_menu>0)?gYes:gNo);d.find("div[name=foot_menu]").html((b.foot_menu>0)?gYes:gNo);d.find("div[name=show_menu]").html((b.show_menu>0)?gYes:gNo);d.find("div[name=show_text]").html((b.show_text>0)?gYes:gNo);d.find("div[name=order]").html(b.order);d.find("div[name=active]").html((b.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(d).html(),"Category Info")}catch(a){console.log("Error in : ManageCategory - view :["+a+"]")}};ManageCategory.print=function(b){try{CMSExtraUtil.print_div_popup(b.html(),"",950,700)}catch(a){console.log("Error in : ManageCategory - print :["+a+"]")}};ManageCategory.prepare=function(b){try{var a=ManageCategory.get_format_select();b.find("select[name=format]").html(a);if(ManageCategoryChilds.parent_id>0){b.find("input[name=top_menu]").attr("disabled",true);b.find("input[name=main_menu]").attr("disabled",true);b.find("input[name=side_menu]").attr("disabled",true);b.find("input[name=foot_menu]").attr("disabled",true);b.find("input[name=top_menu]").hide();b.find("input[name=main_menu]").hide();b.find("input[name=side_menu]").hide();b.find("input[name=foot_menu]").hide();b.find("label[for^=top_menu_checkbox]").hide();b.find("label[for^=main_menu_checkbox]").hide();b.find("label[for^=side_menu_checkbox]").hide();b.find("label[for^=foot_menu_checkbox]").hide()}else{}b.find("input[name=parent_id]").val(ManageCategoryChilds.parent_id)}catch(c){console.log("Error in : ManageCategory - prepare :["+c+"]")}};ManageCategory.post_edit=function(f){try{var d=ManageCategoryChildsOutput.get_object(f);var a=ManageCategoryChilds.form_div;a.find("input[name=category_id]").val(d.category_id);a.find("input[name=title_ar]").val(d.title_ar);a.find("input[name=title_en]").val(d.title_en);a.find("textarea[name=keys_ar]").val(d.keys_ar);a.find("textarea[name=keys_en]").val(d.keys_en);a.find("textarea[name=desc_ar]").val(d.desc_ar);a.find("textarea[name=desc_en]").val(d.desc_en);a.find("input[name=content_ar]").val(d.content_ar);a.find("input[name=content_en]").val(d.content_en);a.find("div[name=content_ar]").html(d.content_ar);a.find("div[name=content_en]").html(d.content_en);a.find("select[name=format]").find("option[value="+d.format+"]").attr("selected",true);a.find("input[name=top_menu]").attr("checked",(d.top_menu>0)?true:false);a.find("input[name=main_menu]").attr("checked",(d.main_menu>0)?true:false);a.find("input[name=foot_menu]").attr("checked",(d.foot_menu>0)?true:false);a.find("input[name=editable]").val(d.editable);a.find("input[name=removable]").val(d.removable);a.find("input[name=show_menu]").attr("checked",(d.show_menu>0)?true:false);a.find("input[name=show_text]").attr("checked",(d.show_text>0)?true:false);a.find("input[name=order]").val(d.order);a.find("input[name=active]").attr("checked",(d.active>0)?true:false);a.find("input[name=parent_id]").val(d.parent_id);var e=g_root_url+"uploads/categories/"+d.icon;var b=g_root_url+"uploads/categories/"+d.image;if((a.find("input[name=icon]").length>0)&&RequestUtil.image_exists(e)){a.find(".image-upload[data-name=icon]").find(".preview").html('<img src="'+e+'" />')}if((a.find("input[name=image]").length>0)&&RequestUtil.image_exists(b)){a.find(".image-upload[data-name=image]").find(".preview").html('<img src="'+b+'" />')}}catch(c){console.log("Error in : ManageCategory - post edit :["+c+"]")}};ManageCategory.validate=function(a){var c=0;try{a.find(".error").html("").remove();if(c>0){console.log("validate found : "+c+" errors")}}catch(b){console.log("Error in : ManageCategory - validate :["+b+"]")}return c};ManageCategory.validate_notes=function(b){try{b.find(".error").html("").remove();var a=null;var d=null}catch(c){console.log("Error in : ManageCategory - validate notes :["+c+"]")}};ManageCategory.get_format_select=function(){var a="";a+='<option value="">Please select style</option><option value="'+STYLE_DEFAULT+'" selected>Default</option>';return a};

    /*! products */
    function ManageProduct(){}ManageProduct.get_form_properties=function(){var d=null;try{var a="product";var c={name:a,params:[{name:"title_ar",type:"text",label:CDictionary.get_text("ProductForm_TitleAr_lbl")+":"},{name:"title_en",type:"text",label:CDictionary.get_text("ProductForm_TitleEn_lbl")+":"},{type:"seprator",label:""},{name:"keys_ar",type:"textarea",label:CDictionary.get_text("ProductForm_KeysAr_lbl")+":"},{name:"keys_en",type:"textarea",label:CDictionary.get_text("ProductForm_KeysEn_lbl")+":"},{name:"desc_ar",type:"textarea",label:CDictionary.get_text("ProductForm_DescAr_lbl")+":"},{name:"desc_en",type:"textarea",label:CDictionary.get_text("ProductForm_DescEn_lbl")+":"},{type:"seprator",label:""},{name:"content_ar",type:"editor",label:CDictionary.get_text("ProductForm_ContentAr_lbl")+":"},{name:"content_en",type:"editor",label:CDictionary.get_text("ProductForm_ContentEn_lbl")+":"},{type:"seprator",label:""},{name:"icon",type:"image",label:CDictionary.get_text("ProductForm_Icon_lbl")+":"},{type:"seprator",label:""},{name:"style",type:"select",label:CDictionary.get_text("ProductForm_Style_lbl")+":"},{type:"seprator",label:""},{name:"featured",type:"checkbox",label:CDictionary.get_text("ProductForm_Featured_lbl")+":",value:"1"},{name:"offer",type:"checkbox",label:CDictionary.get_text("ProductForm_Offer_lbl")+":",value:"1"},{name:"recent",type:"checkbox",label:CDictionary.get_text("ProductForm_Recent_lbl")+":",value:"1"},{name:"sale",type:"checkbox",label:CDictionary.get_text("ProductForm_Sale_lbl")+":",value:"1"},{type:"seprator",label:""},{name:"price",type:"text",label:CDictionary.get_text("ProductForm_Price_lbl")+":"},{name:"discount",type:"slider",label:CDictionary.get_text("ProductForm_Discount_lbl")+":",min:"0",max:"1",step:"0.1"},{name:"available",type:"text",label:CDictionary.get_text("ProductForm_Available_lbl")+":"},{type:"seprator",label:""},{name:"order",type:"text",label:CDictionary.get_text("ProductForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("ProductForm_Active_lbl")+":",value:"1"},{type:"seprator",label:""},{name:"editable",type:"hidden",label:"",ignore_preview:true},{name:"removable",type:"hidden",label:"",ignore_preview:true},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"product_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.log("Error in : ManageProduct - get form properties :["+b+"]")}return d};ManageProduct.add=function(){try{CMSExtraUtil.show_form(ManageCategoryChilds);var d=ManageCategoryChilds.form_div;var a=ManageProduct.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_product",complete_callback:ManageCategoryChilds.callback,cancel_callback:ManageCategoryChilds.cancel,prepare_func:ManageProduct.prepare,validate_func:ManageProduct.validate,validate_notes_func:ManageProduct.validate_notes};CMSUtil.create_form(b)}catch(c){console.log("Error in : ManageProduct - add :["+c+"]")}};ManageProduct.edit=function(d){try{CMSExtraUtil.show_form(ManageCategoryChilds);var c=ManageCategoryChilds.form_div;var a={cont_div:c,form_div:ManageProduct.get_form_properties().get_form_div(),form_action:g_request_url+"?action=update_product",complete_callback:ManageCategoryChilds.callback,cancel_callback:ManageCategoryChilds.cancel,prepare_func:ManageProduct.prepare,post_func:ManageProduct.post_edit,post_args:d,validate_func:ManageProduct.validate,validate_notes_func:ManageProduct.validate_notes};CMSUtil.create_form(a)}catch(b){console.log("Error in : ManageProduct - edit :["+b+"]")}};ManageProduct.remove=function(d){try{var c=ManageCategoryChildsOutput.get_object(d);var a=c.product_id;CMSExtraUtil.delete_popup(function(){var e=ManageCategoryChilds.list_div;var f="action=remove_product&product_id="+a;RequestUtil.quick_post_request(e,f,ManageCategoryChilds.callback)})}catch(b){console.log("Error in : ManageProduct - delete :["+b+"]")}};ManageProduct.view=function(e){try{var c=ManageCategoryChildsOutput.get_object(e);var b=ManageProduct.get_form_properties();var d=b.get_preview_div();d.find("div[name=product_id]").html(c.product_id);d.find("div[name=title_ar]").html(c.title_ar);d.find("div[name=title_en]").html(c.title_en);d.find("div[name=keys_ar]").html(c.keys_ar);d.find("div[name=keys_en]").html(c.keys_en);d.find("div[name=desc_ar]").html(c.desc_ar);d.find("div[name=desc_en]").html(c.desc_en);d.find("div[name=content_ar]").html(c.content_ar);d.find("div[name=content_en]").html(c.content_en);d.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/products/"+c.icon+'" />');d.find("div[name=image]").html('<img src="'+g_root_url+"uploads/products/"+c.image+'" />');d.find("div[name=style]").html(c.style);d.find("div[name=price]").html(c.price);d.find("div[name=discount]").html(c.discount);d.find("div[name=available]").html(c.available);d.find("div[name=featured]").html((c.featured>0)?gYes:gNo);d.find("div[name=offer]").html((c.offer>0)?gYes:gNo);d.find("div[name=recent]").html((c.recent>0)?gYes:gNo);d.find("div[name=sale]").html((c.sale>0)?gYes:gNo);d.find("div[name=order]").html(c.order);d.find("div[name=active]").html((c.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(d).html(),"Product Info")}catch(a){console.log("Error in : ManageProduct - view :["+a+"]")}};ManageProduct.print=function(b){try{CMSExtraUtil.print_div_popup(b.html(),"",950,700)}catch(a){console.log("Error in : ManageProduct - print :["+a+"]")}};ManageProduct.prepare=function(b){try{var a=ManageProduct.get_format_select();b.find("select[name=format]").html(a);if(ManageCategoryChilds.parent_id>0){b.find("input[name=top_menu]").attr("disabled",true);b.find("input[name=main_menu]").attr("disabled",true);b.find("input[name=side_menu]").attr("disabled",true);b.find("input[name=foot_menu]").attr("disabled",true);b.find("input[name=top_menu]").parent().parent().hide();b.find("input[name=main_menu]").parent().parent().hide();b.find("input[name=side_menu]").parent().parent().hide();b.find("input[name=foot_menu]").parent().parent().hide()}else{}b.find("input[name=parent_id]").val(ManageCategoryChilds.parent_id)}catch(c){console.log("Error in : ManageProduct - prepare :["+c+"]")}};ManageProduct.post_edit=function(f){try{var d=ManageCategoryChildsOutput.get_object(f);var a=ManageCategoryChilds.form_div;a.find("input[name=product_id]").val(d.product_id);a.find("input[name=title_ar]").val(d.title_ar);a.find("input[name=title_en]").val(d.title_en);a.find("textarea[name=keys_ar]").val(d.keys_ar);a.find("textarea[name=keys_en]").val(d.keys_en);a.find("textarea[name=desc_ar]").val(d.desc_ar);a.find("textarea[name=desc_en]").val(d.desc_en);a.find("input[name=content_ar]").val(d.content_ar);a.find("input[name=content_en]").val(d.content_en);a.find("div[name=content_ar]").html(d.content_ar);a.find("div[name=content_en]").html(d.content_en);a.find("select[name=format]").find("option[value="+d.format+"]").attr("selected",true);a.find("input[name=featured]").attr("checked",(d.featured>0)?true:false);a.find("input[name=offer]").attr("checked",(d.offer>0)?true:false);a.find("input[name=recent]").attr("checked",(d.recent>0)?true:false);a.find("input[name=sale]").attr("checked",(d.sale>0)?true:false);a.find("input[name=price]").val(d.price);a.find("input[name=discount]").val(d.discount);a.find("input[name=available]").val(d.available);a.find("input[name=editable]").val(d.editable);a.find("input[name=removable]").val(d.removable);a.find("input[name=order]").val(d.order);a.find("input[name=active]").attr("checked",(d.active>0)?true:false);a.find("input[name=parent_id]").val(d.parent_id);var e=g_root_url+"uploads/products/"+d.icon;var b=g_root_url+"uploads/products/"+d.image;if((a.find("input[name=icon]").length>0)&&RequestUtil.image_exists(e)){a.find(".image-upload[data-name=icon]").find(".preview").html('<img src="'+e+'" />')}if((a.find("input[name=image]").length>0)&&RequestUtil.image_exists(b)){a.find(".image-upload[data-name=image]").find(".preview").html('<img src="'+b+'" />')}}catch(c){console.log("Error in : ManageProduct - post edit :["+c+"]")}};ManageProduct.validate=function(a){var c=0;try{a.find(".error").html("").remove();if(c>0){console.log("validate found : "+c+" errors")}}catch(b){console.log("Error in : ManageProduct - validate :["+b+"]")}return c};ManageProduct.validate_notes=function(b){try{b.find(".error").html("").remove();var a=null;var d=null}catch(c){console.log("Error in : ManageProduct - validate notes :["+c+"]")}};ManageProduct.get_format_select=function(){var a="";a+='<option value="">Please select style</option><option value="'+STYLE_DEFAULT+'" selected>Default</option>';return a};

    /*! shots */
    function ManageShot(){}ManageShot.init=function(c){try{ManageShot.parent_id=Utils.get_int(c);ManageShot.parent_id=(ManageShot.parent_id>0)?ManageShot.parent_id:0;var a=$("#body").find("#menu");var d=$("#body").find("#content");a.find("a").removeClass();a.find("a[data-module=shots]").addClass("active");d.html("");ManageShotList.init()}catch(b){console.error("Error in : ManageShot - init : ["+b+"]")}};function ManageShotList(){}ManageShotList.index=0;ManageShotList.count=10;ManageShotList.init=function(){try{var d=$("#body").find("#content");d.html("");d.append('<div class="controls clearfix"><div class="top_label_main" onclick="return false;">'+CDictionary.get_text("Shots_lbl")+'</div><div class="top_button" onclick="ManageShotForm.add(); return false;"><i class="fa fa-plus-square" aria-hidden="true"></i>'+CDictionary.get_text("New_lbl")+'</div><div class="top_button" onclick="ManageShotForm.search(); return false;"><i class="fa fa-search" aria-hidden="true"></i>'+CDictionary.get_text("Search_lbl")+"</div></div>");d.append('<div class="clearfix"></div>');d.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="list"></div></div>');var b=$("#body").find("#content").find("#form");var a=$("#body").find("#content").find("#list");ManageShotList.form_div=b;ManageShotList.list_div=a;ManageShotList.load()}catch(c){console.error("Error in : ManageShot - init : ["+c+"]")}};ManageShotList.load=function(b,e){try{var a=ManageShotList.list_div;var c=ManageShotList.form_div;$(a).fadeIn(1000);$(c).fadeOut(1000);b=(b===undefined)?ManageShotList.index:Utils.get_int(b);e=(e===undefined)?ManageShotList.count:Utils.get_int(e);ManageShotList.index=b;ManageShotList.count=e;var g=ManageShot.parent_id;var f="action=shots&parent_id="+g+"&index="+b+"&count="+e;RequestUtil.quick_post_request(a,f,function(j){try{var h=j.status;if(h>0){var l=j.shots;var i=j.shots_count;ManageShotList.display_list(l,i,CMSUtil.PAGINATION_LIST)}}catch(k){console.error("error in request :["+k+"]")}})}catch(d){console.error("Error in : ManageShotList - load :["+d+"]")}};ManageShotList.search=function(b,d){try{var a=ManageShotList.list_div;ManageShotList.index=Utils.get_int(b);ManageShotList.count=Utils.get_int(d);ManageShotList.count=(ManageShotList.count>0)?ManageShotList.count:10;var e=ManageShotList.search_object;e.index=ManageShotList.index;e.count=ManageShotList.count;RequestUtil.quick_post_request(a,e,function(h){try{var f=h.status;if(f>0){var j=h.shots;var g=h.shots_count;ManageShotList.display_list(j,g,CMSUtil.PAGINATION_SEARCH)}}catch(i){console.error("error in request :["+i+"]")}})}catch(c){console.error("Error in : ManageShotList - search :["+c+"]")}};ManageShotList.display_list=function(h,i,a){try{ManageShotList.array=h;var b=ManageShotList.list_div;var f=CDictionary.get_labels(["ShotList_ShotId_lbl","ShotList_Icon_lbl","ShotList_Type_lbl","ShotList_Order_lbl","ShotList_Active_lbl"]);var g=["ManageShotOutput.get_id(shot_id)","ManageShotOutput.get_icon(icon)","ManageShotOutput.get_type(type)","order","active"];var c="shot_id";CMSUtil.show_list(b,f,g,h,c,"ManageShotForm.edit","ManageShotForm.remove","ManageShotForm.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageShotList.search":"ManageShotList.load";CMSUtil.show_pagination(b,d,[],i,ManageShotList.index,ManageShotList.count,(ManageShotList.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageShotList - display list :["+e+"]")}};function ManageShotForm(){}ManageShotForm.import_form=function(){try{var d=$("#body").find("#content");d.find("#form_cell_new").html("");d.find("#form_cell_search").html("");var e=d.find("#form_cell_import");e.html("");var a=CForm.get_form_div_from_tpl(g_template_url+"?tpl=import_form");var b={cont_div:e,form_div:a,form_action:g_request_url+"?action=import_form_shots",complete_callback:ManageShotForm.callback,prepare_func:null,animated:true};CMSUtil.create_form(b);a.find("input[name=download]").click(function(){window.location=g_request_url+"?action=export_shots_sample"})}catch(c){console.error("Error in : ManageShotForm - import_form :["+c+"]")}};ManageShotForm.export_form=function(){try{var c=ManageShotList.search_object;if(c===null){c={}}var a=Math.floor(Math.random()*1000);var c="action=export_shots&shot_id="+Utils.get_int(c.shot_id)+"&title="+get_string(c.title)+"&date="+get_string(c.date)+"&status="+Utils.get_int(c.status)+"&seqId="+a;window.location=g_request_url+"?"+c}catch(b){console.error("Error in : ManageShotForm - export :["+b+"]")}};ManageShotForm.get_form_properties=function(){var d={};try{var a="shot";var c={name:a,params:[{name:"icon",type:"image",label:CDictionary.get_text("ShotForm_Icon_lbl")+":"},{name:"type",type:"select",label:CDictionary.get_text("ShotForm_Type_lbl")+":"},{name:"file",type:"div",label:CDictionary.get_text("ShotForm_File_lbl")+":"},{type:"seprator",label:""},{name:"order",type:"text",label:CDictionary.get_text("ShotForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("ShotForm_Active_lbl"),value:"1"},{type:"seprator",label:""},{name:"parent_type",type:"hidden",label:"",ignore_preview:true,value:"1"},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"shot_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.error("Error in : ManageShotForm - get form properties :["+b+"]")}return d};ManageShotForm.search=function(){try{var a=ManageShotList.list_div;var c=ManageShotList.form_div;$(a).fadeIn(1000);$(c).fadeIn(1000);c.html("");var b=TplUtil.get_hidden_div("shot_search_tpl",true);c.append(b);c.find("select[name=country]").html(ManageShotForm.get_country_select());c.find("select[name=status]").html(ManageShotForm.get_rule_select());c.find("input[type=submit]").click(function(f){try{f.preventDefault();var g={action:"search_shots",cvc:c.find("input[name=cvc]").val(),name:c.find("input[name=name]").val(),number:c.find("input[name=number]").val(),type:c.find("select[name=type]").val(),graduation_date:c.find("input[name=graduation_date]").val(),qr_key:c.find("input[name=qr_key]").val(),country:c.find("select[name=country]").val()};ManageShotList.search_object=g;ManageShotList.search(0,ManageShotList.count);return false}catch(e){console.error("Error in : ManageOrganizationForm - search - submit : ["+e+"]")}});c.find("input[type=reset]").click(function(f){try{f.preventDefault();c.find("form").get(0).reset();c.hide().fadeOut(1000)}catch(e){console.error("Error in : ManageOrganizationForm - search - reset : ["+e+"]")}})}catch(d){console.error("Error in : ManageOrganizationForm - add :["+d+"]")}};ManageShotForm.add=function(){try{var a=ManageShotList.list_div;var c=ManageShotList.form_div;$(a).fadeOut(1000);$(c).fadeIn(1000);c.html("");var b=ManageShotForm.get_form_properties().get_form_div();var d={cont_div:c,form_div:b,form_action:g_request_url+"?action=add_shot",complete_callback:ManageShotForm.callback,cancel_callback:ManageShotForm.cancel,prepare_func:ManageShotForm.prepare,validate_func:ManageShotForm.validate,validate_notes_func:ManageShotForm.validate_notes};CMSUtil.create_form(d)}catch(e){console.error("Error in : ManageShotForm - add :["+e+"]")}};ManageShotForm.edit=function(e){try{e=Utils.get_int(e);var a=ManageShotList.list_div;var c=ManageShotList.form_div;$(a).fadeOut(1000);$(c).fadeIn(1000);c.html("");var b=ManageShotForm.get_form_properties().get_form_div();var d={cont_div:c,form_div:b,form_action:g_request_url+"?action=update_shot",complete_callback:ManageShotForm.callback,cancel_callback:ManageShotForm.cancel,prepare_func:ManageShotForm.prepare,post_func:ManageShotForm.post_edit,post_args:e,validate_func:ManageShotForm.validate,validate_notes_func:ManageShotForm.validate_notes};CMSUtil.create_form(d)}catch(f){console.error("Error in : ManageShotForm - edit :["+f+"]")}};ManageShotForm.view=function(b){try{b=Utils.get_int(b);var a=ManageShotForm.get_object(b);var d=ManageShotForm.get_form_properties().get_preview_div();d.find("div[name=shot_id]").html(a.shot_id);d.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/shots/"+a.icon+'" />');d.find("div[name=file]").html(ManageShotOutput.get_file(a.file,a.type));d.find("div[name=type]").html(ManageShotOutput.get_type(a.type));d.find("div[name=order]").html(a.order);d.find("div[name=active]").html((a.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(d).html(),"Shot Info")}catch(c){console.error("Error in : ManageShotForm - view :["+c+"]")}};ManageShotForm.remove=function(a){try{CMSExtraUtil.delete_popup(function(){var c=ManageShotList.list_div;var d="action=remove_shot&shot_id="+a;RequestUtil.quick_post_request(c,d,ManageShotForm.callback)})}catch(b){console.error("Error in : ManageShotForm - delete :["+b+"]")}};ManageShotForm.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.error("Error in : ManageShotForm - print :["+b+"]")}};ManageShotForm.prepare=function(a){try{a.find("select[name=type]").html('<option value="1">Download</option><option value="2">Image</option><option value="3">Flash</option><option value="5">Video</option><option value="6">Youtube</option><option value="7">Vimeo</option>');a.find("select[name=type]").change(function(){ManageShotForm.change_file_type(a,$(this).val())});a.find("select[name=type]").find("option[value="+TYPE_IMAGE+"]").attr("selected",true);ManageShotForm.change_file_type(a,TYPE_IMAGE);a.find("input[name=parent_id]").val(ManageShot.parent_id)}catch(b){console.error("Error in : ManageShotForm - prepare form :["+b+"]")}};ManageShotForm.post_edit=function(c){try{var b=ManageShotForm.get_object(c);var a=ManageShotList.form_div;a=a.find("form");a.find("input[name=shot_id]").val(b.shot_id);a.find("select[name=type]").find("option[value="+b.type+"]").attr("selected","selected");a.find("input[name=order]").val(b.order);a.find("input[name=active]").attr("checked",(b.active>0)?true:false);a.find("input[name=parent_id]").val(b.parent_id);ManageShotForm.change_file_type(a,b.type);ManageShotForm.set_file_value(a,b.type,b.file);var e=g_root_url+"uploads/shots/"+b.icon;if(RequestUtil.image_exists(e)){a.find("input[name=icon]").parent().find(".preview").html('<img src="'+e+'" />')}}catch(d){console.error("Error in : ManageShotForm - post edit :["+d+"]")}};ManageShotForm.validate=function(b){var d=0;try{b.find(".error").html("");b.find("*").removeClass("required");var a=null;if(d>0){console.log("validate found : "+d+" errors")}}catch(c){console.error("Error in : ManageShotForm - validate form :["+c+"]")}return d};ManageShotForm.validate_notes=function(c){try{c.find(".error").html("").remove();var a="";var b=null;c.append('<div class="clearfix"></div>');c.append('<div class="error alert-error">'+a+"</div>")}catch(d){console.error("Error in : ManageShotForm - show validate notes :["+d+"]")}};ManageShotForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}ManageShotList.load();$("body").trigger("shots_updated")}catch(c){console.error("Error in : ManageShotForm - callback :["+c+"]")}};ManageShotForm.cancel=function(){try{ManageShotList.load()}catch(a){console.error("Error in : ManageShotForm - cancel :["+a+"]")}};ManageShotForm.get_object=function(c){var a=null;try{var e=ManageShotList.array;for(var b=0;b<e.length;b++){if(e[b].shot_id==c){a=e[b];break}}}catch(d){console.error("Error in : ManageShotForm - get object :["+d+"]")}return a};ManageShotForm.change_file_type=function(b,a){var c=Utils.get_int(a);switch(c){case TYPE_DOWNLOAD:b.find("div[name=file]").html('<input type="file" name="file" value="" />');break;case TYPE_IMAGE:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="image/x-png, image/gif, image/jpeg" />');break;case TYPE_FLASH:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="application/x-shockwave-flash swf" />');break;case TYPE_VIDEO:b.find("div[name=file]").html('<input type="file" name="file1" value="" accept="video/mp4"  /> mp4  <br /><input type="file" name="file2" value="" accept="video/ogg"  /> ogv  <br /><input type="file" name="file3" value="" accept="video/webm" /> webm <br />');break;case TYPE_YOUTUBE:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;case TYPE_VIMEO:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;default:break}};ManageShotForm.set_file_value=function(c,b,a){var d=Utils.get_int(b);switch(d){case TYPE_DOWNLOAD:c.find("div[name=file]").append(a);break;case TYPE_IMAGE:c.find("div[name=file]").append(a);break;case TYPE_FLASH:c.find("div[name=file]").append(a);break;case TYPE_VIDEO:c.find("div[name=file]").append(a);break;case TYPE_YOUTUBE:c.find("input[name=file]").val("http://www.youtube.com/watch?v="+a);break;case TYPE_VIMEO:c.find("input[name=file]").val("http://vimeo.com/"+a);break;default:break}};function ManageShotOutput(){}ManageShotOutput.get_id=function(a){return number_pad(a,6)};ManageShotOutput.get_icon=function(a){var b="";var c=g_root_url+"uploads/shots/"+a;b+='<img src="'+c+'" alt="" width="80px" height="80px" />';return b};ManageShotOutput.get_type=function(a){var b="";a=Utils.get_int(a);switch(a){case TYPE_DOWNLOAD:b=CDictionary.get_text("File_Type_Download_lbl");break;case TYPE_IMAGE:b=CDictionary.get_text("File_Type_Image_lbl");break;case TYPE_FLASH:b=CDictionary.get_text("File_Type_Flash_lbl");break;case TYPE_SOUND:b=CDictionary.get_text("File_Type_Sound_lbl");break;case TYPE_VIDEO:b=CDictionary.get_text("File_Type_Video_lbl");break;case TYPE_YOUTUBE:b=CDictionary.get_text("File_Type_Youtube_lbl");break;case TYPE_VIMEO:b=CDictionary.get_text("File_Type_Vimeo_lbl");break;case TYPE_EMBED_CODE:b=CDictionary.get_text("File_Type_Embed_Code_lbl");break}return b};ManageShotOutput.get_file=function(b,e){var d="";e=Utils.get_int(e);var f=""+g_root_url+"uploads/shots";var c=350;var a=300;switch(e){case TYPE_DOWNLOAD:d=DisplayUtil.get_download_embed(f+"/"+b);break;case TYPE_IMAGE:d=DisplayUtil.get_image_embed(f+"/"+b,c,a);break;case TYPE_FLASH:d=DisplayUtil.get_flash_embed(f+"/"+b,c,a);break;case TYPE_SOUND:d=DisplayUtil.get_jsplayer_sound_embed(b,c,a,f);break;case TYPE_VIDEO:d=DisplayUtil.get_jsplayer_video_embed(b,c,a,f);break;case TYPE_YOUTUBE:d=DisplayUtil.get_youtube_video_embed(b,c,a,false);break;case TYPE_VIMEO:d=DisplayUtil.get_vimeo_video_embed(b,c,a,false);break;case TYPE_EMBED_CODE:d=escapeHTML(b);break;default:break}return d};

    /*! slides */
    function ManageSlide(){}ManageSlide.init=function(){try{var a=$("#body").find("#menu");var c=$("#body").find("#content");a.find("a").removeClass();a.find("a[data-module=slides]").addClass("active");c.html("");ManageSlideList.init()}catch(b){console.error("Error in : ManageSlide - init : ["+b+"]")}};function ManageSlideList(){}ManageSlideList.index=0;ManageSlideList.count=10;ManageSlideList.init=function(){try{var d=$("#body").find("#content");d.html("");d.append('<div class="controls clearfix"><div class="top_label_main" onclick="return false;">'+CDictionary.get_text("Slides_lbl")+'</div><div class="top_button" onclick="ManageSlideForm.add(); return false;"><i class="fa fa-plus-square" aria-hidden="true"></i>'+CDictionary.get_text("New_lbl")+'</div><div class="top_button" onclick="ManageSlideForm.search(); return false;"><i class="fa fa-search" aria-hidden="true"></i>'+CDictionary.get_text("Search_lbl")+"</div></div>");d.append('<div class="clearfix"></div>');d.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="list"></div></div>');var b=$("#body").find("#content").find("#form");var a=$("#body").find("#content").find("#list");ManageSlideList.form_div=b;ManageSlideList.list_div=a;ManageSlideList.load()}catch(c){console.error("Error in : ManageSlide - init : ["+c+"]")}};ManageSlideList.load=function(b,e){try{var a=ManageSlideList.list_div;var c=ManageSlideList.form_div;$(a).fadeIn(1000);$(c).fadeOut(1000);b=(b===undefined)?ManageSlideList.index:Utils.get_int(b);e=(e===undefined)?ManageSlideList.count:Utils.get_int(e);ManageSlideList.index=b;ManageSlideList.count=e;var f="action=slides&index="+b+"&count="+e;RequestUtil.quick_post_request(a,f,function(h){try{var g=h.status;if(g>0){var j=h.slides;var i=h.slides_count;ManageSlideList.display_list(j,i,CMSUtil.PAGINATION_LIST)}}catch(k){console.error("error in request :["+k+"]")}})}catch(d){console.error("Error in : ManageSlideList - load :["+d+"]")}};ManageSlideList.search=function(b,d){try{var a=ManageSlideList.list_div;ManageSlideList.index=Utils.get_int(b);ManageSlideList.count=Utils.get_int(d);ManageSlideList.count=(ManageSlideList.count>0)?ManageSlideList.count:10;var e=ManageSlideList.search_object;e.index=ManageSlideList.index;e.count=ManageSlideList.count;RequestUtil.quick_post_request(a,e,function(g){try{var f=g.status;if(f>0){var i=g.slides;var h=g.slides_count;ManageSlideList.display_list(i,h,CMSUtil.PAGINATION_SEARCH)}}catch(j){console.error("error in request :["+j+"]")}})}catch(c){console.error("Error in : ManageSlideList - search :["+c+"]")}};ManageSlideList.display_list=function(h,i,a){try{ManageSlideList.array=h;var b=ManageSlideList.list_div;var f=CDictionary.get_labels(["SlideList_SlideId_lbl","SlideList_File_lbl","SlideList_Type_lbl","SlideList_Order_lbl","SlideList_Active_lbl"]);var g=["ManageSlideOutput.get_id(slide_id)","ManageSlideOutput.get_file(icon)","ManageSlideOutput.get_type(type)","order","active"];var c="slide_id";CMSUtil.show_list(b,f,g,h,c,"ManageSlideForm.edit","ManageSlideForm.remove","ManageSlideForm.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageSlideList.search":"ManageSlideList.load";CMSUtil.show_pagination(b,d,[],i,ManageSlideList.index,ManageSlideList.count,(ManageSlideList.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageSlideList - display list :["+e+"]")}};function ManageSlideForm(){}ManageSlideForm.import_form=function(){try{var d=$("#body").find("#content");d.find("#form_cell_new").html("");d.find("#form_cell_search").html("");var e=d.find("#form_cell_import");e.html("");var a=CForm.get_form_div_from_tpl(g_template_url+"?tpl=import_form");var b={cont_div:e,form_div:a,form_action:g_request_url+"?action=import_form_slides",complete_callback:ManageSlideForm.callback,prepare_func:null,animated:true};CMSUtil.create_form(b);a.find("input[name=download]").click(function(){window.location=g_request_url+"?action=export_slides_sample"})}catch(c){console.error("Error in : ManageSlideForm - import_form :["+c+"]")}};ManageSlideForm.export_form=function(){try{var c=ManageSlideList.search_object;if(c===null){c={}}var a=Math.floor(Math.random()*1000);var c="action=export_slides&slide_id="+Utils.get_int(c.slide_id)+"&title="+get_string(c.title)+"&date="+get_string(c.date)+"&status="+Utils.get_int(c.status)+"&seqId="+a;window.location=g_request_url+"?"+c}catch(b){console.error("Error in : ManageSlideForm - export :["+b+"]")}};ManageSlideForm.get_form_properties=function(){var d={};try{var a="slide";var c={name:a,params:[{name:"title_ar",type:"hidden",label:"",ignore_preview:true},{name:"title_en",type:"hidden",label:"",ignore_preview:true},{name:"desc_ar",type:"hidden",label:"",ignore_preview:true},{name:"desc_en",type:"hidden",label:"",ignore_preview:true},{name:"type",type:"select",label:CDictionary.get_text("SlideForm_Type_lbl")+":"},{name:"file",type:"div",label:CDictionary.get_text("SlideForm_File_lbl")+":"},{type:"separator",label:""},{name:"link_ar",type:"text",label:CDictionary.get_text("SlideForm_LinkAr_lbl")+":"},{name:"link_en",type:"text",label:CDictionary.get_text("SlideForm_LinkEn_lbl")+":"},{type:"separator",label:""},{name:"order",type:"text",label:CDictionary.get_text("SlideForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("SlideForm_Active_lbl")+":",value:"1"},{type:"separator",label:""},{name:"parent_type",type:"hidden",label:"",ignore_preview:true},{name:"parent_id",type:"hidden",label:"",ignore_preview:true},{name:"slide_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.error("Error in : ManageSlideForm - get form properties :["+b+"]")}return d};ManageSlideForm.search=function(){try{var a=ManageSlideList.list_div;var c=ManageSlideList.form_div;$(a).fadeIn(1000);$(c).fadeIn(1000);c.html("");var b=TplUtil.get_hidden_div("slide_search_tpl",true);c.append(b);c.find("select[name=country]").html(ManageSlideForm.get_country_select());c.find("select[name=status]").html(ManageSlideForm.get_rule_select());c.find("input[type=submit]").click(function(f){try{f.preventDefault();var g={action:"search_slides",cvc:c.find("input[name=cvc]").val(),name:c.find("input[name=name]").val(),number:c.find("input[name=number]").val(),type:c.find("select[name=type]").val(),graduation_date:c.find("input[name=graduation_date]").val(),qr_key:c.find("input[name=qr_key]").val(),country:c.find("select[name=country]").val()};ManageSlideList.search_object=g;ManageSlideList.search(0,ManageSlideList.count);return false}catch(e){console.error("Error in : ManageOrganizationForm - search - submit : ["+e+"]")}});c.find("input[type=reset]").click(function(f){try{f.preventDefault();c.find("form").get(0).reset();c.hide().fadeOut(1000)}catch(e){console.error("Error in : ManageOrganizationForm - search - reset : ["+e+"]")}})}catch(d){console.error("Error in : ManageOrganizationForm - add :["+d+"]")}};ManageSlideForm.add=function(){try{var a=ManageSlideList.list_div;var c=ManageSlideList.form_div;$(a).fadeOut(1000);$(c).fadeIn(1000);c.html("");var b=ManageSlideForm.get_form_properties().get_form_div();var d={cont_div:c,form_div:b,form_action:g_request_url+"?action=add_slide",complete_callback:ManageSlideForm.callback,cancel_callback:ManageSlideForm.cancel,prepare_func:ManageSlideForm.prepare,validate_func:ManageSlideForm.validate,validate_notes_func:ManageSlideForm.validate_notes};CMSUtil.create_form(d)}catch(e){console.error("Error in : ManageSlideForm - add :["+e+"]")}};ManageSlideForm.edit=function(f){try{f=Utils.get_int(f);var a=ManageSlideList.list_div;var c=ManageSlideList.form_div;$(a).fadeOut(1000);$(c).fadeIn(1000);c.html("");var b=ManageSlideForm.get_form_properties().get_form_div();var d={cont_div:c,form_div:b,form_action:g_request_url+"?action=update_slide",complete_callback:ManageSlideForm.callback,cancel_callback:ManageSlideForm.cancel,prepare_func:ManageSlideForm.prepare,post_func:ManageSlideForm.post_edit,post_args:f,validate_func:ManageSlideForm.validate,validate_notes_func:ManageSlideForm.validate_notes};CMSUtil.create_form(d)}catch(e){console.error("Error in : ManageSlideForm - edit :["+e+"]")}};ManageSlideForm.view=function(c){try{c=Utils.get_int(c);var a=ManageSlideForm.get_object(c);var d=ManageSlideForm.get_form_properties().get_preview_div();d.find("div[name=slide_id]").html(a.slide_id);d.find("div[name=title_ar]").html(a.title_ar);d.find("div[name=title_en]").html(a.title_en);d.find("div[name=desc_ar]").html(a.desc_ar);d.find("div[name=desc_en]").html(a.desc_en);d.find("div[name=file]").html(ManageSlideOutput.get_file(a.file,a.type));d.find("div[name=type]").html(ManageSlideOutput.get_type(a.type));d.find("div[name=link_ar]").html(a.link_ar);d.find("div[name=link_en]").html(a.link_en);d.find("div[name=order]").html(a.order);d.find("div[name=active]").html((a.active>0)?gYes:gNo);d.find("div[name=parent_type]").html(a.parent_type);d.find("div[name=parent_id]").html(a.parent_id);CPopup.display($("<div></div>").append(d).html(),"Slide Info")}catch(b){console.error("Error in : ManageSlideForm - view :["+b+"]")}};ManageSlideForm.remove=function(b){try{CMSExtraUtil.delete_popup(function(){var c=ManageSlideList.list_div;var d="action=remove_slide&slide_id="+b;RequestUtil.quick_post_request(c,d,ManageSlideForm.callback)})}catch(a){console.error("Error in : ManageSlideForm - delete :["+a+"]")}};ManageSlideForm.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.error("Error in : ManageSlideForm - print :["+b+"]")}};ManageSlideForm.prepare=function(a){try{a.find("select[name=type]").html('<option value="1">Download</option><option value="2">Image</option><option value="3">Flash</option><option value="5">Video</option><option value="6">Youtube</option><option value="7">Vimeo</option>');a.find("select[name=type]").change(function(){ManageSlideForm.change_file_type(a,$(this).val())});a.find("select[name=type]").find("option[value="+TYPE_IMAGE+"]").attr("selected",true);ManageSlideForm.change_file_type(a,TYPE_IMAGE)}catch(b){console.error("Error in : ManageSlideForm - prepare form :["+b+"]")}};ManageSlideForm.post_edit=function(e){try{var a=ManageSlideForm.get_object(e);var b=ManageSlideList.form_div;b=b.find("form");b.find("input[name=slide_id]").val(a.slide_id);b.find("input[name=title_ar]").val(a.title_ar);b.find("input[name=title_en]").val(a.title_en);b.find("textarea[name=desc_ar]").val(a.desc_ar);b.find("textarea[name=desc_en]").val(a.desc_en);b.find("input[name=link_ar]").val(a.link_ar);b.find("input[name=link_en]").val(a.link_en);b.find("select[name=type]").find("option[value="+a.type+"]").attr("selected",true);b.find("input[name=order]").val(a.order);b.find("input[name=active]").attr("checked",(a.active>0)?"checked":"");b.find("select[name=parent_type]").find("option[value="+a.parent_type+"]").attr("selected",true);b.find("select[name=parent_id]").find("option[value="+a.parent_id+"]").attr("selected",true);b.find("input[name=parent_type]").val(a.parent_type);b.find("input[name=parent_id]").val(a.parent_id);ManageSlideForm.change_file_type(b,a.type);ManageSlideForm.set_file_value(b,a.type,a.file);var d=g_root_url+"uploads/slides/"+a.icon;if(RequestUtil.image_exists(d)){b.find("input[name=icon]").parent().find(".preview").html('<img src="'+d+'" />')}}catch(c){console.error("Error in : ManageSlideForm - post edit :["+c+"]")}};ManageSlideForm.validate=function(b){var d=0;try{b.find(".error").html("");b.find("*").removeClass("required");var a=null;if(d>0){console.log("validate found : "+d+" errors")}}catch(c){console.error("Error in : ManageSlideForm - validate form :["+c+"]")}return d};ManageSlideForm.validate_notes=function(c){try{c.find(".error").html("").remove();var a="";var b=null;c.append('<div class="clearfix"></div>');c.append('<div class="error alert-error">'+a+"</div>")}catch(d){console.error("Error in : ManageSlideForm - show validate notes :["+d+"]")}};ManageSlideForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}ManageSlideList.load();$("body").trigger("slides_updated")}catch(c){console.error("Error in : ManageSlideForm - callback :["+c+"]")}};ManageSlideForm.cancel=function(){try{ManageSlideList.load()}catch(a){console.error("Error in : ManageSlideForm - cancel :["+a+"]")}};ManageSlideForm.get_object=function(e){var a=null;try{var d=ManageSlideList.array;for(var b=0;b<d.length;b++){if(d[b].slide_id==e){a=d[b];break}}}catch(c){console.error("Error in : ManageSlideForm - get object :["+c+"]")}return a};ManageSlideForm.change_file_type=function(b,a){var c=Utils.get_int(a);switch(c){case TYPE_DOWNLOAD:b.find("div[name=file]").html('<input type="file" name="file" value="" />');break;case TYPE_IMAGE:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="image/x-png, image/gif, image/jpeg" />');break;case TYPE_FLASH:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="application/x-shockwave-flash swf" />');break;case TYPE_VIDEO:b.find("div[name=file]").html('<input type="file" name="file1" value="" accept="video/mp4"  /> mp4  <br /><input type="file" name="file2" value="" accept="video/ogg"  /> ogv  <br /><input type="file" name="file3" value="" accept="video/webm" /> webm <br />');break;case TYPE_YOUTUBE:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;case TYPE_VIMEO:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;default:break}};ManageSlideForm.set_file_value=function(c,b,a){var d=Utils.get_int(b);switch(d){case TYPE_DOWNLOAD:c.find("div[name=file]").append(a);break;case TYPE_IMAGE:c.find("div[name=file]").append(a);break;case TYPE_FLASH:c.find("div[name=file]").append(a);break;case TYPE_VIDEO:c.find("div[name=file]").append(a);break;case TYPE_YOUTUBE:c.find("input[name=file]").val("http://www.youtube.com/watch?v="+a);break;case TYPE_VIMEO:c.find("input[name=file]").val("http://vimeo.com/"+a);break;default:break}};function ManageSlideOutput(){}ManageSlideOutput.get_id=function(a){return number_pad(a,6)};ManageSlideOutput.get_icon=function(a){var b="";var c=g_root_url+"uploads/slides/"+a;b+='<img src="'+c+'" alt="" width="80px" height="80px" />';return b};ManageSlideOutput.get_type=function(a){var b="";a=Utils.get_int(a);switch(a){case TYPE_DOWNLOAD:b=CDictionary.get_text("File_Type_Download_lbl");break;case TYPE_IMAGE:b=CDictionary.get_text("File_Type_Image_lbl");break;case TYPE_FLASH:b=CDictionary.get_text("File_Type_Flash_lbl");break;case TYPE_SOUND:b=CDictionary.get_text("File_Type_Sound_lbl");break;case TYPE_VIDEO:b=CDictionary.get_text("File_Type_Video_lbl");break;case TYPE_YOUTUBE:b=CDictionary.get_text("File_Type_Youtube_lbl");break;case TYPE_VIMEO:b=CDictionary.get_text("File_Type_Vimeo_lbl");break;case TYPE_EMBED_CODE:b=CDictionary.get_text("File_Type_Embed_Code_lbl");break}return b};ManageSlideOutput.get_file=function(b,e){var d="";e=Utils.get_int(e);var f=""+g_root_url+"uploads/slides";var c=350;var a=300;switch(e){case TYPE_DOWNLOAD:d=DisplayUtil.get_download_embed(f+"/"+b);break;case TYPE_IMAGE:d=DisplayUtil.get_image_embed(f+"/"+b,c,a);break;case TYPE_FLASH:d=DisplayUtil.get_flash_embed(f+"/"+b,c,a);break;case TYPE_SOUND:d=DisplayUtil.get_jsplayer_sound_embed(b,c,a,f);break;case TYPE_VIDEO:d=DisplayUtil.get_jsplayer_video_embed(b,c,a,f);break;case TYPE_YOUTUBE:d=DisplayUtil.get_youtube_video_embed(b,c,a,false);break;case TYPE_VIMEO:d=DisplayUtil.get_vimeo_video_embed(b,c,a,false);break;case TYPE_EMBED_CODE:d=escapeHTML(b);break;default:break}return d};

    /*! ads */
    function ManageAd(){}ManageAd.init=function(){try{var a=$("#body").find("#menu");var c=$("#body").find("#content");a.find("a").removeClass();a.find("a[data-module=ads]").addClass("active");c.html("");ManageAdList.init()}catch(b){console.error("Error in : ManageAd - init : ["+b+"]")}};function ManageAdList(){}ManageAdList.index=0;ManageAdList.count=10;ManageAdList.init=function(){try{var d=$("#body").find("#content");d.html("");d.append('<div class="controls clearfix"><div class="top_label_main" onclick="return false;">'+CDictionary.get_text("Ads_lbl")+'</div><div class="top_button" onclick="ManageAdForm.add(); return false;"><i class="fa fa-plus-square" aria-hidden="true"></i>'+CDictionary.get_text("New_lbl")+'</div><div class="top_button" onclick="ManageAdForm.search(); return false;"><i class="fa fa-search" aria-hidden="true"></i>'+CDictionary.get_text("Search_lbl")+"</div></div>");d.append('<div class="clearfix"></div>');d.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="list"></div></div>');var b=$("#body").find("#content").find("#form");var a=$("#body").find("#content").find("#list");ManageAdList.form_div=b;ManageAdList.list_div=a;ManageAdList.load()}catch(c){console.error("Error in : ManageAd - init : ["+c+"]")}};ManageAdList.load=function(b,e){try{var a=ManageAdList.list_div;var c=ManageAdList.form_div;$(a).fadeIn(1000);$(c).fadeOut(1000);b=(b===undefined)?ManageAdList.index:Utils.get_int(b);e=(e===undefined)?ManageAdList.count:Utils.get_int(e);ManageAdList.index=b;ManageAdList.count=e;var f="action=ads&index="+b+"&count="+e;RequestUtil.quick_post_request(a,f,function(j){try{var g=j.status;if(g>0){var i=j.ads;var h=j.ads_count;ManageAdList.display_list(i,h,CMSUtil.PAGINATION_LIST)}}catch(k){console.error("error in request :["+k+"]")}})}catch(d){console.error("Error in : ManageAdList - load :["+d+"]")}};ManageAdList.search=function(b,d){try{var a=ManageAdList.list_div;ManageAdList.index=Utils.get_int(b);ManageAdList.count=Utils.get_int(d);ManageAdList.count=(ManageAdList.count>0)?ManageAdList.count:10;var e=ManageAdList.search_object;e.index=ManageAdList.index;e.count=ManageAdList.count;RequestUtil.quick_post_request(a,e,function(i){try{var f=i.status;if(f>0){var h=i.ads;var g=i.ads_count;ManageAdList.display_list(h,g,CMSUtil.PAGINATION_SEARCH)}}catch(j){console.error("error in request :["+j+"]")}})}catch(c){console.error("Error in : ManageAdList - search :["+c+"]")}};ManageAdList.display_list=function(h,i,a){try{ManageAdList.array=h;var b=ManageAdList.list_div;var f=CDictionary.get_labels(["AdList_AdId_lbl","AdList_File_lbl","AdList_Type_lbl","AdList_Order_lbl","AdList_Active_lbl"]);var g=["ManageAdOutput.get_id(ad_id)","ManageAdOutput.get_file(icon)","ManageAdOutput.get_type(type)","order","active"];var c="ad_id";CMSUtil.show_list(b,f,g,h,c,"ManageAdForm.edit","ManageAdForm.remove","ManageAdForm.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageAdList.search":"ManageAdList.load";CMSUtil.show_pagination(b,d,[],i,ManageAdList.index,ManageAdList.count,(ManageAdList.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageAdList - display list :["+e+"]")}};function ManageAdForm(){}ManageAdForm.import_form=function(){try{var d=$("#body").find("#content");d.find("#form_cell_new").html("");d.find("#form_cell_search").html("");var e=d.find("#form_cell_import");e.html("");var a=CForm.get_form_div_from_tpl(g_template_url+"?tpl=import_form");var b={cont_div:e,form_div:a,form_action:g_request_url+"?action=import_form_ads",complete_callback:ManageAdForm.callback,prepare_func:null,animated:true};CMSUtil.create_form(b);a.find("input[name=download]").click(function(){window.location=g_request_url+"?action=export_ads_sample"})}catch(c){console.error("Error in : ManageAdForm - import_form :["+c+"]")}};ManageAdForm.export_form=function(){try{var c=ManageAdList.search_object;if(c===null){c={}}var a=Math.floor(Math.random()*1000);var c="action=export_ads&ad_id="+Utils.get_int(c.ad_id)+"&title="+get_string(c.title)+"&date="+get_string(c.date)+"&status="+Utils.get_int(c.status)+"&seqId="+a;window.location=g_request_url+"?"+c}catch(b){console.error("Error in : ManageAdForm - export :["+b+"]")}};ManageAdForm.get_form_properties=function(){var d={};try{var a="ad";var c={name:a,params:[{name:"file",type:"div",label:CDictionary.get_text("AdForm_File_lbl")+":"},{name:"type",type:"select",label:CDictionary.get_text("AdForm_Type_lbl")+":"},{name:"link",type:"text",label:CDictionary.get_text("AdForm_Link_lbl")+":"},{name:"order",type:"text",label:CDictionary.get_text("AdForm_Order_lbl")+":"},{name:"active",type:"checkbox",label:CDictionary.get_text("AdForm_Active_lbl")+":",value:"1"},{type:"seprator",label:""},{name:"ad_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.error("Error in : ManageAdForm - get form properties :["+b+"]")}return d};ManageAdForm.search=function(){try{var a=ManageAdList.list_div;var c=ManageAdList.form_div;$(a).fadeIn(1000);$(c).fadeIn(1000);c.html("");var b=TplUtil.get_hidden_div("ad_search_tpl",true);c.append(b);c.find("select[name=country]").html(ManageAdForm.get_country_select());c.find("select[name=status]").html(ManageAdForm.get_rule_select());c.find("input[type=submit]").click(function(f){try{f.preventDefault();var g={action:"search_ads",cvc:c.find("input[name=cvc]").val(),name:c.find("input[name=name]").val(),number:c.find("input[name=number]").val(),type:c.find("select[name=type]").val(),graduation_date:c.find("input[name=graduation_date]").val(),qr_key:c.find("input[name=qr_key]").val(),country:c.find("select[name=country]").val()};ManageAdList.search_object=g;ManageAdList.search(0,ManageAdList.count);return false}catch(e){console.error("Error in : ManageOrganizationForm - search - submit : ["+e+"]")}});c.find("input[type=reset]").click(function(f){try{f.preventDefault();c.find("form").get(0).reset();c.hide().fadeOut(1000)}catch(e){console.error("Error in : ManageOrganizationForm - search - reset : ["+e+"]")}})}catch(d){console.error("Error in : ManageOrganizationForm - add :["+d+"]")}};ManageAdForm.add=function(){try{var a=ManageAdList.list_div;var c=ManageAdList.form_div;$(a).fadeOut(1000);$(c).fadeIn(1000);c.html("");var b=ManageAdForm.get_form_properties().get_form_div();var d={cont_div:c,form_div:b,form_action:g_request_url+"?action=add_ad",complete_callback:ManageAdForm.callback,cancel_callback:ManageAdForm.cancel,prepare_func:ManageAdForm.prepare,validate_func:ManageAdForm.validate,validate_notes_func:ManageAdForm.validate_notes};CMSUtil.create_form(d)}catch(e){console.error("Error in : ManageAdForm - add :["+e+"]")}};ManageAdForm.edit=function(a){try{a=Utils.get_int(a);var b=ManageAdList.list_div;var d=ManageAdList.form_div;$(b).fadeOut(1000);$(d).fadeIn(1000);d.html("");var c=ManageAdForm.get_form_properties().get_form_div();var e={cont_div:d,form_div:c,form_action:g_request_url+"?action=update_ad",complete_callback:ManageAdForm.callback,cancel_callback:ManageAdForm.cancel,prepare_func:ManageAdForm.prepare,post_func:ManageAdForm.post_edit,post_args:a,validate_func:ManageAdForm.validate,validate_notes_func:ManageAdForm.validate_notes};CMSUtil.create_form(e)}catch(f){console.error("Error in : ManageAdForm - edit :["+f+"]")}};ManageAdForm.view=function(a){try{a=Utils.get_int(a);var b=ManageAdForm.get_object(a);var d=ManageAdForm.get_form_properties().get_preview_div();d.find("div[name=ad_id]").html(b.ad_id);d.find("div[name=file]").html(ManageAdOutput.get_file(b.file,b.type));d.find("div[name=type]").html(ManageAdOutput.get_type(b.type));d.find("div[name=width]").html(b.width);d.find("div[name=height]").html(b.height);d.find("div[name=link]").html(b.link);d.find("div[name=order]").html(b.order);d.find("div[name=active]").html((b.active>0)?gYes:gNo);CPopup.display($("<div></div>").append(d).html(),"Ad Info")}catch(c){console.error("Error in : ManageAdForm - view :["+c+"]")}};ManageAdForm.remove=function(a){try{CMSExtraUtil.delete_popup(function(){var c=ManageAdList.list_div;var d="action=remove_ad&ad_id="+a;RequestUtil.quick_post_request(c,d,ManageAdForm.callback)})}catch(b){console.error("Error in : ManageAdForm - delete :["+b+"]")}};ManageAdForm.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.error("Error in : ManageAdForm - print :["+b+"]")}};ManageAdForm.prepare=function(a){try{a.find("select[name=type]").html('<option value="1">Download</option><option value="2">Image</option><option value="3">Flash</option><option value="5">Video</option><option value="6">Youtube</option><option value="7">Vimeo</option>');a.find("select[name=type]").change(function(){ManageAdForm.change_file_type(a,$(this).val())});a.find("select[name=type]").find("option[value="+TYPE_IMAGE+"]").attr("selected",true);ManageAdForm.change_file_type(a,TYPE_IMAGE)}catch(b){console.error("Error in : ManageAdForm - prepare form :["+b+"]")}};ManageAdForm.post_edit=function(a){try{var c=ManageAdForm.get_object(a);var b=ManageAdList.form_div;b=b.find("form");b.find("input[name=ad_id]").val(c.ad_id);b.find("input[name=link]").val(c.link);b.find("select[name=type]").find("option[value="+c.type+"]").attr("selected",true);b.find("input[name=width]").val(c.width);b.find("input[name=height]").val(c.height);b.find("input[name=order]").val(c.order);b.find("input[name=active]").attr("checked",(c.active>0)?true:false);ManageAdForm.change_file_type(b,c.type);ManageAdForm.set_file_value(b,c.type,c.file)}catch(d){console.error("Error in : ManageAdForm - post edit :["+d+"]")}};ManageAdForm.validate=function(b){var d=0;try{b.find(".error").html("");b.find("*").removeClass("required");var a=null;if(d>0){console.log("validate found : "+d+" errors")}}catch(c){console.error("Error in : ManageAdForm - validate form :["+c+"]")}return d};ManageAdForm.validate_notes=function(c){try{c.find(".error").html("").remove();var a="";var b=null;c.append('<div class="clearfix"></div>');c.append('<div class="error alert-error">'+a+"</div>")}catch(d){console.error("Error in : ManageAdForm - show validate notes :["+d+"]")}};ManageAdForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}ManageAdList.load();$("body").trigger("ads_updated")}catch(c){console.error("Error in : ManageAdForm - callback :["+c+"]")}};ManageAdForm.cancel=function(){try{ManageAdList.load()}catch(a){console.error("Error in : ManageAdForm - cancel :["+a+"]")}};ManageAdForm.get_object=function(a){var b=null;try{var e=ManageAdList.array;for(var c=0;c<e.length;c++){if(e[c].ad_id==a){b=e[c];break}}}catch(d){console.error("Error in : ManageAdForm - get object :["+d+"]")}return b};ManageAdForm.change_file_type=function(b,a){var c=Utils.get_int(a);switch(c){case TYPE_DOWNLOAD:b.find("div[name=file]").html('<input type="file" name="file" value="" />');break;case TYPE_IMAGE:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="image/x-png, image/gif, image/jpeg" />');break;case TYPE_FLASH:b.find("div[name=file]").html('<input type="file" name="file" value="" accept="application/x-shockwave-flash swf" />');break;case TYPE_VIDEO:b.find("div[name=file]").html('<input type="file" name="file1" value="" accept="video/mp4"  /> mp4  <br /><input type="file" name="file2" value="" accept="video/ogg"  /> ogv  <br /><input type="file" name="file3" value="" accept="video/webm" /> webm <br />');break;case TYPE_YOUTUBE:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;case TYPE_VIMEO:b.find("div[name=file]").html('<input type="text" name="file" value="" size="40" />');break;default:break}};ManageAdForm.set_file_value=function(c,b,a){var d=Utils.get_int(b);switch(d){case TYPE_DOWNLOAD:c.find("div[name=file]").append(a);break;case TYPE_IMAGE:c.find("div[name=file]").append(a);break;case TYPE_FLASH:c.find("div[name=file]").append(a);break;case TYPE_VIDEO:c.find("div[name=file]").append(a);break;case TYPE_YOUTUBE:c.find("input[name=file]").val("http://www.youtube.com/watch?v="+a);break;case TYPE_VIMEO:c.find("input[name=file]").val("http://vimeo.com/"+a);break;default:break}};function ManageAdOutput(){}ManageAdOutput.get_id=function(a){return number_pad(a,6)};ManageAdOutput.get_icon=function(a){var b="";var c=g_root_url+"uploads/ads/"+a;b+='<img src="'+c+'" alt="" width="80px" height="80px" />';return b};ManageAdOutput.get_type=function(a){var b="";a=Utils.get_int(a);switch(a){case TYPE_DOWNLOAD:b=CDictionary.get_text("File_Type_Download_lbl");break;case TYPE_IMAGE:b=CDictionary.get_text("File_Type_Image_lbl");break;case TYPE_FLASH:b=CDictionary.get_text("File_Type_Flash_lbl");break;case TYPE_SOUND:b=CDictionary.get_text("File_Type_Sound_lbl");break;case TYPE_VIDEO:b=CDictionary.get_text("File_Type_Video_lbl");break;case TYPE_YOUTUBE:b=CDictionary.get_text("File_Type_Youtube_lbl");break;case TYPE_VIMEO:b=CDictionary.get_text("File_Type_Vimeo_lbl");break;case TYPE_EMBED_CODE:b=CDictionary.get_text("File_Type_Embed_Code_lbl");break}return b};ManageAdOutput.get_file=function(b,e){var d="";e=Utils.get_int(e);var f=""+g_root_url+"uploads/ads";var c=350;var a=300;switch(e){case TYPE_DOWNLOAD:d=DisplayUtil.get_download_embed(f+"/"+b);break;case TYPE_IMAGE:d=DisplayUtil.get_image_embed(f+"/"+b,c,a);break;case TYPE_FLASH:d=DisplayUtil.get_flash_embed(f+"/"+b,c,a);break;case TYPE_SOUND:d=DisplayUtil.get_jsplayer_sound_embed(b,c,a,f);break;case TYPE_VIDEO:d=DisplayUtil.get_jsplayer_video_embed(b,c,a,f);break;case TYPE_YOUTUBE:d=DisplayUtil.get_youtube_video_embed(b,c,a,false);break;case TYPE_VIMEO:d=DisplayUtil.get_vimeo_video_embed(b,c,a,false);break;case TYPE_EMBED_CODE:d=escapeHTML(b);break;default:break}return d};

    /*! users */
    var USER_STATUS_NOT_VERIFIED=0;var USER_STATUS_EMAIL_VERIFIED=1;var USER_STATUS_PHONE_VERIFIED=2;var USER_RULE_NORMAL=1;var USER_RULE_PRIVATE=2;var USER_RULE_SUSPENDED=3;var USER_RULE_BLOCKED=4;var USER_GENDER_MALE=1;var USER_GENDER_FEMALE=2;function ManageUser(){}ManageUser.init=function(){try{var a=$("#body").find("#menu");var c=$("#body").find("#content");a.find("a").removeClass();a.find("a[data-module=users]").addClass("active");c.html("");ManageUserList.init();BackgroundRequests.load_countries()}catch(b){console.error("Error in : ManageUser - init : ["+b+"]")}};function ManageUserList(){}ManageUserList.index=0;ManageUserList.count=10;ManageUserList.init=function(){try{var d=$("#body").find("#content");d.html("");d.append('<div class="top_label_main" onclick="return false;">'+CDictionary.get_text("Users_lbl")+'</div><div class="top_label new_label" onclick="ManageUserForm.add(); return false;">'+CDictionary.get_text("New_lbl")+'</div><div class="top_label search_label" onclick="ManageUserForm.search(); return false;">'+CDictionary.get_text("Search_lbl")+'</div><div class="clearfix" style="margin-top: 30px; clear: both;"><br /></div>');d.append('<div class="clearfix"></div>');d.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="list"></div></div>');var b=$("#body").find("#content").find("#form");var a=$("#body").find("#content").find("#list");ManageUserList.form_div=b;ManageUserList.list_div=a;ManageUserList.load()}catch(c){console.error("Error in : ManageUser - init : ["+c+"]")}};ManageUserList.load=function(b,e){try{var a=ManageUserList.list_div;var c=ManageUserList.form_div;$(a).fadeIn(1000);$(c).fadeOut(1000);b=(b===undefined)?ManageUserList.index:Utils.get_int(b);e=(e===undefined)?ManageUserList.count:Utils.get_int(e);ManageUserList.index=b;ManageUserList.count=e;var f="action=users&index="+b+"&count="+e;RequestUtil.quick_post_request(a,f,function(i){try{var g=i.status;if(g>0){var k=i.users;var h=i.users_count;ManageUserList.display_list(k,h,CMSUtil.PAGINATION_LIST)}}catch(j){console.error("error in request :["+j+"]")}})}catch(d){console.error("Error in : ManageUserList - load :["+d+"]")}};ManageUserList.search=function(b,d){try{var a=ManageUserList.list_div;ManageUserList.index=Utils.get_int(b);ManageUserList.count=Utils.get_int(d);ManageUserList.count=(ManageUserList.count>0)?ManageUserList.count:10;var e=ManageUserList.search_object;e.index=ManageUserList.index;e.count=ManageUserList.count;RequestUtil.quick_post_request(a,e,function(h){try{var f=h.status;if(f>0){var j=h.users;var g=h.users_count;ManageUserList.display_list(j,g,CMSUtil.PAGINATION_SEARCH)}}catch(i){console.error("error in request :["+i+"]")}})}catch(c){console.error("Error in : ManageUserList - load :["+c+"]")}};ManageUserList.display_list=function(h,i,a){try{ManageUserList.array=h;var b=ManageUserList.list_div;var f=CDictionary.get_labels(["UserList_UserId_lbl","UserList_Username_lbl","UserList_Password_lbl","UserList_Email_lbl","UserList_Phone_lbl","UserList_Payments_lbl","UserList_Wishlist_lbl","UserList_Status_lbl","UserList_Rule_lbl"]);var g=["ManageUserOutput.get_id(user_id)","name","password","email","phone","ManageUserOutput.get_payments(user_id)","ManageUserOutput.get_wishlist(user_id)","ManageUserOutput.get_status(status)","ManageUserOutput.get_rule(rule)"];var c="user_id";CMSUtil.show_list(b,f,g,h,c,"ManageUserForm.edit","ManageUserForm.remove","ManageUserForm.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageUserList.search":"ManageUserList.load";CMSUtil.show_pagination(b,d,[],i,ManageUserList.index,ManageUserList.count,(ManageUserList.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageUserList - display list :["+e+"]")}};function ManageUserForm(){}ManageUserForm.get_search_form_properties=function(){var d={};try{var a="user_search";var c={name:a,params:[{name:"user_id",type:"text",label:CDictionary.get_text("UserForm_UserId_lbl")+":"},{name:"name",type:"text",label:CDictionary.get_text("UserForm_Name_lbl")+":"},{type:"seprator",label:""},{name:"email",type:"text",label:CDictionary.get_text("UserForm_Email_lbl")+":"},{name:"phone",type:"text",label:CDictionary.get_text("UserForm_Phone_lbl")+":"},{type:"seprator",label:""},{name:"country",type:"select",label:CDictionary.get_text("UserForm_Country_lbl")+":"},{type:"seprator",label:""},{name:"status",type:"select",label:CDictionary.get_text("UserForm_Status_lbl")+":"},{name:"rule_id",type:"select",label:CDictionary.get_text("UserForm_RuleId_lbl")+":"}],action:"",method:"post",enctype:"application/x-www-form-urlencoded",style:"style2"};d=new CForm(c)}catch(b){console.error("Error in : ManageUserForm - get search form properties :["+b+"]")}return d};ManageUserForm.search_form=function(){try{var c=$("#body").find("#content");c.find("#form_cell_new").html("");c.find("#form_cell_import").html("");var e=c.find("#form_cell_search");e.html("");var d=ManageUserForm.get_search_form_properties();var a=d.get_form_div();a.find("select[name=country]").html(ManageUserForm.get_country_select());a.find("select[name=status]").html(ManageUserForm.get_status_select());a.find("select[name=rule_id]").html(ManageUserForm.get_rule_select());e.html(a);a.find("input[type=submit]").click(function(f){f.preventDefault();var g={action:"search_users",user_id:a.find("input[name=user_id]").val(),name:a.find("input[name=name]").val(),email:a.find("input[name=email]").val(),phone:a.find("input[name=phone]").val(),country:a.find("select[name=country]").val(),status:a.find("select[name=status]").val(),rule_id:a.find("select[name=rule_id]").val()};ManageUserList.search_object=g;ManageUserList.search(0,ManageUserList.count);return false});a.find("input[type=reset]").click(function(g){try{g.preventDefault();a.get(0).reset();a.removeClass("open");a.hide("slide",{direction:"up"},1000,function(){a.user().html("")})}catch(f){console.error("Error in : ManageUserForm - search_form - reset : ["+f+"]")}})}catch(b){console.error("Error in : ManageUserForm - search :["+b+"]")}};ManageUserForm.get_form_properties=function(){var d={};try{var a="user";var c={name:a,params:[{name:"name",type:"text",label:CDictionary.get_text("UserForm_Username_lbl")+":"},{name:"password",type:"password",label:CDictionary.get_text("UserForm_Password_lbl")+":"},{name:"email",type:"text",label:CDictionary.get_text("UserForm_Email_lbl")+":"},{type:"seprator",label:""},{name:"phone",type:"text",label:CDictionary.get_text("UserForm_Phone_lbl")+":"},{name:"key",type:"text",label:CDictionary.get_text("UserForm_Key_lbl")+":"},{name:"code",type:"text",label:CDictionary.get_text("UserForm_Code_lbl")+":"},{type:"seprator",label:""},{name:"icon",type:"image",label:CDictionary.get_text("UserForm_Icon_lbl")+":"},{name:"birth_date",type:"date",format:"yy-mm-dd",label:CDictionary.get_text("UserForm_BirthDate_lbl")+":"},{type:"clear",label:""},{name:"",type:"label",label:CDictionary.get_text("UserForm_Gender_Select_lbl"),grid:"cell-x"},{name:"gender",postfix:"radio_m",type:"radio",label:CDictionary.get_text("UserForm_Gender_Male_lbl"),grid:"cell-x",value:"1"},{name:"gender",postfix:"radio_f",type:"radio",label:CDictionary.get_text("UserForm_Gender_Female_lbl"),grid:"cell-x",value:"2"},{type:"clear",label:""},{type:"seprator",label:""},{name:"created",type:"datetime",format:"yy-mm-dd hh:mm:ss",label:CDictionary.get_text("UserForm_Created_lbl")+":"},{name:"updated",type:"datetime",format:"yy-mm-dd hh:mm:ss",label:CDictionary.get_text("UserForm_Updated_lbl")+":"},{type:"seprator",label:""},{name:"status",type:"select",label:CDictionary.get_text("UserForm_Status_lbl")+":"},{name:"rule_id",type:"select",label:CDictionary.get_text("UserForm_RuleId_lbl")+":"},{name:"suspend_date",type:"datetime",format:"yy-mm-dd hh:mm:ss",label:CDictionary.get_text("UserForm_SuspendDate_lbl")+":"},{type:"seprator",label:""},{name:"country",type:"select",label:CDictionary.get_text("UserForm_Country_lbl")+":"},{name:"user_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.error("Error in : ManageUserForm - get form properties :["+b+"]")}return d};ManageUserForm.add=function(){try{var a=ManageUserList.list_div;var c=ManageUserList.form_div;$(a).fadeOut(1000);$(c).fadeIn(1000);c.html("");var b=ManageUserForm.get_form_properties().get_form_div();var d={cont_div:c,form_div:b,form_action:g_request_url+"?action=add_user",complete_callback:ManageUserForm.callback,cancel_callback:ManageUserForm.cancel,prepare_func:ManageUserForm.prepare,validate_func:ManageUserForm.validate,validate_notes_func:ManageUserForm.validate_notes};CMSUtil.create_form(d)}catch(e){console.error("Error in : ManageUserForm - add :["+e+"]")}};ManageUserForm.edit=function(a){try{a=Utils.get_int(a);var b=ManageUserList.list_div;var d=ManageUserList.form_div;$(b).fadeOut(1000);$(d).fadeIn(1000);d.html("");var c=ManageUserForm.get_form_properties().get_form_div();var e={cont_div:d,form_div:c,form_action:g_request_url+"?action=update_user",complete_callback:ManageUserForm.callback,cancel_callback:ManageUserForm.cancel,prepare_func:ManageUserForm.prepare,post_func:ManageUserForm.post_edit,post_args:a,validate_func:ManageUserForm.validate,validate_notes_func:ManageUserForm.validate_notes};CMSUtil.create_form(e)}catch(f){console.error("Error in : ManageUserForm - edit :["+f+"]")}};ManageUserForm.view=function(a){try{a=Utils.get_int(a);var b=ManageUserForm.get_object(a);var d=ManageUserForm.get_form_properties();var e=d.get_preview_div();e.find("div[name=user_id]").html(b.user_id);e.find("div[name=name]").html(b.name);e.find("div[name=password]").html(b.password);e.find("div[name=email]").html(b.email);e.find("div[name=phone]").html(b.phone);e.find("div[name=key]").html(b.key);e.find("div[name=code]").html(b.code);e.find("div[name=fname]").html(b.fname);e.find("div[name=lname]").html(b.lname);e.find("div[name=icon]").html('<img src="'+g_root_url+"uploads/users/"+b.icon+'"  />');e.find("div[name=birth_date]").html(b.birth_date);e.find("div[name=gender]").html(ManageUserOutput.get_gender(b.gender));e.find("div[name=country]").html(ManageUserOutput.get_country(b.country));e.find("div[name=created]").html(b.created);e.find("div[name=updated]").html(b.updated);e.find("div[name=suspend_date]").html(b.suspend_date);e.find("div[name=status]").html(ManageUserOutput.get_status(b.status));e.find("div[name=rule_id]").html(ManageUserOutput.get_rule(b.rule_id));CPopup.display($("<div></div>").append(e).html(),"User Info")}catch(c){console.error("Error in : ManageUserForm - view :["+c+"]")}};ManageUserForm.remove=function(a){try{CMSExtraUtil.delete_popup(function(){var c=ManageUserList.list_div;var d="action=remove_user&user_id="+a;RequestUtil.quick_post_request(c,d,ManageUserForm.callback)})}catch(b){console.error("Error in : ManageUserForm - delete :["+b+"]")}};ManageUserForm.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.error("Error in : ManageUserForm - print :["+b+"]")}};ManageUserForm.prepare=function(a){try{a.find("select[name=status]").html(ManageUserForm.get_status_select());a.find("select[name=rule_id]").html(ManageUserForm.get_rule_select());a.find("select[name=gender]").html(ManageUserForm.get_gender_select());a.find("select[name=country]").html(ManageUserForm.get_country_select());a.find("input[name=suspend_date]").prop("disabled",true);a.find("select[name=rule_id]").change(function(){if($(this).val()==USER_RULE_SUSPENDED){a.find("input[name=suspend_date]").prop("disabled",false)}else{a.find("input[name=suspend_date]").prop("disabled",true)}})}catch(b){console.error("Error in : ManageUserForm - prepare form :["+b+"]")}};ManageUserForm.post_edit=function(a){try{var b=ManageUserForm.get_object(a);var c=ManageUserList.form_div;c=c.find("form");c.find("input[name=user_id]").val(b.user_id);c.find("input[name=name]").val(b.name);c.find("input[name=password]").val(b.password);c.find("input[name=email]").val(b.email);c.find("input[name=phone]").val(b.phone);c.find("input[name=key]").val(b.key);c.find("input[name=code]").val(b.code);c.find("input[name=birth_date]").val(b.birth_date);c.find("input[name=gender]").filter("[value="+b.gender+"]").attr("checked",true);c.find("select[name=country]").find("option[value="+b.country+"]").attr("selected",true);c.find("input[name=created]").val(b.created);c.find("input[name=updated]").val(b.updated);c.find("input[name=suspend_date]").val(b.suspend_date);c.find("select[name=status]").find("option[value="+b.status+"]").attr("selected",true);c.find("select[name=rule_id]").find("option[value="+b.rule_id+"]").attr("selected",true);var e=g_root_url+"uploads/users/"+b.icon;if(RequestUtil.image_exists(e)){c.find(".image-upload[data-name=icon]").find(".preview").html('<img src="'+e+'" />')}}catch(d){console.error("Error in : ManageUserForm - post edit :["+d+"]")}};ManageUserForm.validate=function(b){var d=0;try{b.find(".error").html("");b.find("*").removeClass("required");var a=null;a=b.find("input[name=email]");if(!Validate.required(a.val())){a.addClass("required");d++}a=b.find("select[name=status]");if(!Validate.required(a.val())){a.addClass("required");d++}a=b.find("select[name=rule_id]");if(!Validate.required(a.val())){a.addClass("required");d++}a=b.find("select[name=country]");if(!Validate.required(a.val())){a.addClass("required");d++}if(d>0){console.log("validate found : "+d+" errors")}}catch(c){console.error("Error in : ManageUserForm - validate form :["+c+"]")}return d};ManageUserForm.validate_notes=function(c){try{c.find(".error").html("").remove();var e=0;var a="";var b=null;b=c.find("input[name=email]");if(!Validate.required(b.val())){a+="Email required ! <br />";e++}c.append('<div class="clearfix"></div>');c.append('<div class="error alert-error">'+a+"</div>")}catch(d){console.error("Error in : ManageUserForm - show validate notes :["+d+"]")}};ManageUserForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}ManageUserList.load();$("body").trigger("users_updated")}catch(c){console.error("Error in : ManageUserForm - callback :["+c+"]")}};ManageUserForm.cancel=function(){try{ManageUserList.load()}catch(a){console.error("Error in : ManageUserForm - cancel :["+a+"]")}};ManageUserForm.get_object=function(a){var b=null;try{var e=ManageUserList.array;for(var c=0;c<e.length;c++){if(e[c].user_id==a){b=e[c];break}}}catch(d){console.error("Error in : ManageUserForm - get object :["+d+"]")}return b};ManageUserForm.get_status_select=function(){var a="";a+='<option value="">'+CDictionary.get_text("UserForm_Status_Select_lbl")+'</option><option value="'+USER_STATUS_NOT_VERIFIED+'">'+CDictionary.get_text("UserForm_Status_NotVerified_lbl")+'</option><option value="'+USER_STATUS_EMAIL_VERIFIED+'">'+CDictionary.get_text("UserForm_Status_EmailVerified_lbl")+'</option><option value="'+USER_STATUS_PHONE_VERIFIED+'">'+CDictionary.get_text("UserForm_Status_PhoneVerified_lbl")+"</option>";return a};ManageUserForm.get_rule_select=function(){var a="";a+='<option value="">'+CDictionary.get_text("UserForm_Rule_Select_lbl")+'</option><option value="'+USER_RULE_NORMAL+'">'+CDictionary.get_text("UserForm_Rule_Normal_lbl")+'</option><option value="'+USER_RULE_PRIVATE+'">'+CDictionary.get_text("UserForm_Rule_Private_lbl")+'</option><option value="'+USER_RULE_SUSPENDED+'">'+CDictionary.get_text("UserForm_Rule_Suspended_lbl")+'</option><option value="'+USER_RULE_BLOCKED+'">'+CDictionary.get_text("UserForm_Rule_Blocked_lbl")+"</option>";return a};ManageUserForm.get_gender_select=function(){var a="";a+='<option value="">'+CDictionary.get_text("UserForm_Gender_Select_lbl")+'</option><option value="'+USER_GENDER_MALE+'">'+CDictionary.get_text("UserForm_Gender_Male_lbl")+'</option><option value="'+USER_GENDER_FEMALE+'">'+CDictionary.get_text("UserForm_Gender_Female_lbl")+"</option>";return a};ManageUserForm.get_country_select=function(){var d="";d+='<option value="">'+CDictionary.get_text("UserForm_Country_Select_lbl")+"</option>";var a=MainGlobals.countries;for(var c=0;c<a.length;c++){var e=a[c];var b=CDictionary.get_text_by_lang(e,"name");d+='<option value="'+e.country_id+'">'+b+"</option>"}return d};function ManageUserOutput(){}ManageUserOutput.get_id=function(a){return number_pad(a,6)};ManageUserOutput.get_payments=function(a){var b="";var c=CDictionary.get_text("Payments_lbl");b='<a href="#" onclick="ManagePayment.init('+a+');">'+c+"</a>";return b};ManageUserOutput.get_wishlist=function(a){var b="";var c=CDictionary.get_text("Wishlist_lbl");b='<a href="#" onclick="ManageWishlist.init('+a+');">'+c+"</a>";return b};ManageUserOutput.get_status=function(a){var b="";a=Utils.get_int(a);switch(a){case USER_STATUS_NOT_VERIFIED:b=CDictionary.get_text("UserForm_Status_NotVerified_lbl");break;case USER_STATUS_EMAIL_VERIFIED:b=CDictionary.get_text("UserForm_Status_EmailVerified_lbl");break;case USER_STATUS_PHONE_VERIFIED:b=CDictionary.get_text("UserForm_Status_PhoneVerified_lbl");break;default:b=CDictionary.get_text("UserForm_Status_NotVerified_lbl");break}return b};ManageUserOutput.get_rule=function(b){var a="";b=Utils.get_int(b);switch(b){case USER_RULE_NORMAL:a=CDictionary.get_text("UserForm_Rule_Normal_lbl");break;case USER_RULE_PRIVATE:a=CDictionary.get_text("UserForm_Rule_Private_lbl");break;case USER_RULE_SUSPENDED:a=CDictionary.get_text("UserForm_Rule_Suspended_lbl");break;case USER_RULE_BLOCKED:a=CDictionary.get_text("UserForm_Rule_Blocked_lbl");break;default:a=CDictionary.get_text("UserForm_Rule_Normal_lbl");break}return a};ManageUserOutput.get_gender=function(a){var b="";a=Utils.get_int(a);switch(a){case USER_GENDER_MALE:b=CDictionary.get_text("UserForm_Gender_Male_lbl");break;case USER_GENDER_FEMALE:b=CDictionary.get_text("UserForm_Gender_Female_lbl");break;default:b=CDictionary.get_text("UserForm_Gender_Male_lbl");break}return b};ManageUserOutput.get_country=function(b){var d={};var a=MainGlobals.countries;for(var c=0;c<a.length;c++){var e=a[c];if(b==e.name){d=CDictionary.get_text_by_lang(e,"name")}}return d};

    /*! payments */
    function ManagePayment(){}ManagePayment.STATUS_NO_ACTION=0;ManagePayment.STATUS_NOT_COMPLETED=1;ManagePayment.STATUS_COMPLETED=2;ManagePayment.init=function(a){try{ManagePayment.user_id=Utils.get_int(a);ManagePayment.user_id=(ManagePayment.user_id>0)?ManagePayment.user_id:0;var b=$("#body").find("#menu");var f=$("#body").find("#content");b.find("a").removeClass();b.find("a[data-module=payments]").addClass("active");f.html("");f.append('<div class="controls clearfix"><div class="top_label_main" onclick="return false;">'+CDictionary.get_text("Payments_lbl")+'</div><div class="top_button" onclick="ManagePaymentForm.add(); return false;"><i class="fa fa-plus-square" aria-hidden="true"></i>'+CDictionary.get_text("New_lbl")+'</div><div class="top_button" onclick="ManagePaymentForm.search(); return false;"><i class="fa fa-search" aria-hidden="true"></i>'+CDictionary.get_text("Search_lbl")+"</div></div>");f.append('<div class="clearfix"></div>');f.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="list"></div></div>');var d=f.find("#form");var c=f.find("#list");ManagePayment.form_div=d;ManagePayment.list_div=c;ManagePaymentList.load()}catch(e){console.error("Error in : ManagePayment - init : ["+e+"]")}};function ManagePaymentList(){}ManagePaymentList.index=0;ManagePaymentList.count=10;ManagePaymentList.load=function(c,e){try{CMSExtraUtil.show_list(ManagePayment);var b=ManagePayment.list_div;var a=ManagePayment.user_id;c=(c===undefined)?ManagePaymentList.index:Utils.get_int(c);e=(e===undefined)?ManagePaymentList.count:Utils.get_int(e);ManagePaymentList.index=c;ManagePaymentList.count=e;var f="action=payments&user_id="+a+"&index="+c+"&count="+e;RequestUtil.quick_post_request(b,f,function(i){try{var h=i.status;if(h>0){var k=i.payments;var g=i.payments_count;ManagePaymentList.display_list(k,g,CMSUtil.PAGINATION_LIST)}}catch(j){console.error("error in request :["+j+"]")}})}catch(d){console.error("Error in : ManagePaymentList - load :["+d+"]")}};ManagePaymentList.search=function(b,d){try{CMSExtraUtil.show_list(ManagePayment);var a=ManagePayment.list_div;ManagePaymentList.index=Utils.get_int(b);ManagePaymentList.count=Utils.get_int(d);ManagePaymentList.count=(ManagePaymentList.count>0)?ManagePaymentList.count:10;var e=ManagePaymentList.search_object;e.index=ManagePaymentList.index;e.count=ManagePaymentList.count;RequestUtil.quick_post_request(a,e,function(h){try{var g=h.status;if(g>0){var j=h.payments;var f=h.payments_count;ManagePaymentList.display_list(j,f,CMSUtil.PAGINATION_SEARCH)}}catch(i){console.error("error in request :["+i+"]")}})}catch(c){console.error("Error in : ManagePaymentList - search :["+c+"]")}};ManagePaymentList.display_list=function(h,i,a){try{ManagePaymentList.array=h;var b=ManagePayment.list_div;var f=CDictionary.get_labels(["PaymentList_PaymentId_lbl","PaymentList_Amount_lbl","PaymentList_Status_lbl","PaymentList_Date_lbl","PaymentList_TnxId_lbl","PaymentList_Product_lbl","PaymentList_User_lbl"]);var g=["ManagePaymentOutput.get_id(payment_id)","amount","ManagePaymentOutput.get_status(status)","date","tnx_id","ManagePaymentOutput.get_product(product_ar,product_en)","user"];var c="payment_id";CMSUtil.show_list(b,f,g,h,c,"ManagePaymentForm.edit","ManagePaymentForm.remove","ManagePaymentForm.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManagePaymentList.search":"ManagePaymentList.load";CMSUtil.show_pagination(b,d,[],i,ManagePaymentList.index,ManagePaymentList.count,(ManagePaymentList.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManagePaymentList - display list :["+e+"]")}};function ManagePaymentForm(){}ManagePaymentForm.import_form=function(){try{CMSExtraUtil.show_form(ManagePayment);var d=ManagePayment.form_div;var a=CForm.get_form_div_from_tpl(g_template_url+"?tpl=import_form");var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=import_form_payments",complete_callback:ManagePaymentForm.callback,prepare_func:null,animated:true};CMSUtil.create_form(b);a.find("input[name=download]").click(function(){window.location=g_request_url+"?action=export_payments_sample"})}catch(c){console.error("Error in : ManagePaymentForm - import_form :["+c+"]")}};ManagePaymentForm.export_form=function(){try{var c=ManagePaymentList.search_object;if(c===null){c={}}var a=Math.floor(Math.random()*1000);var c="action=export_payments&payment_id="+Utils.get_int(c.payment_id)+"&title="+get_string(c.title)+"&date="+get_string(c.date)+"&status="+Utils.get_int(c.status)+"&seqId="+a;window.location=g_request_url+"?"+c}catch(b){console.error("Error in : ManagePaymentForm - export :["+b+"]")}};ManagePaymentForm.get_form_properties=function(){var d={};try{var a="payment";var c={name:a,params:[{name:"amount",type:"text",label:CDictionary.get_text("PaymentForm_Amount_lbl")+":"},{type:"seprator",label:""},{name:"tnx_id",type:"text",label:CDictionary.get_text("PaymentForm_TnxId_lbl")+":"},{name:"date",type:"date",format:"yy-mm-dd",label:CDictionary.get_text("PaymentForm_Date_lbl")+":"},{type:"seprator",label:""},{name:"status",type:"select",label:CDictionary.get_text("PaymentForm_Status_lbl")+":"},{type:"seprator",label:""},{name:"product_id",type:"div",label:CDictionary.get_text("PaymentForm_ProductId_lbl")+":"},{name:"user_id",type:"div",label:CDictionary.get_text("PaymentForm_UserId_lbl")+":"},{type:"seprator",label:""},{name:"product_id",type:"hidden",label:"",ignore_preview:true},{name:"user_id",type:"hidden",label:"",ignore_preview:true},{name:"payment_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.error("Error in : ManagePaymentForm - get form properties :["+b+"]")}return d};ManagePaymentForm.search=function(){try{CMSExtraUtil.show_form(ManagePayment);var c=ManagePayment.form_div;var a=TplUtil.get_hidden_div("payment_search_tpl",true);c.append(a);a=c.find("form");a.find("select[name=country]").html(ManagePaymentForm.get_country_select());a.find("select[name=status]").html(ManagePaymentForm.get_rule_select());a.find("input[type=submit]").click(function(e){try{e.preventDefault();var f={action:"search_payments",cvc:a.find("input[name=cvc]").val(),name:a.find("input[name=name]").val(),number:a.find("input[name=number]").val(),type:a.find("select[name=type]").val(),graduation_date:a.find("input[name=graduation_date]").val(),qr_key:a.find("input[name=qr_key]").val(),country:a.find("select[name=country]").val()};ManagePaymentList.search_object=f;ManagePaymentList.search(0,ManagePaymentList.count);return false}catch(d){console.error("Error in : ManageOrganizationForm - search - submit : ["+d+"]")}});a.find("input[type=reset]").click(function(e){try{e.preventDefault();a.find("form").get(0).reset();a.hide().fadeOut(1000)}catch(d){console.error("Error in : ManageOrganizationForm - search - reset : ["+d+"]")}})}catch(b){console.error("Error in : ManageOrganizationForm - add :["+b+"]")}};ManagePaymentForm.add=function(){try{CMSExtraUtil.show_form(ManagePayment);var d=ManagePayment.form_div;var a=ManagePaymentForm.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_payment",complete_callback:ManagePaymentForm.callback,cancel_callback:ManagePaymentForm.cancel,prepare_func:ManagePaymentForm.prepare,validate_func:ManagePaymentForm.validate,validate_notes_func:ManagePaymentForm.validate_notes};CMSUtil.create_form(b)}catch(c){console.error("Error in : ManagePaymentForm - add :["+c+"]")}};ManagePaymentForm.edit=function(d){try{d=Utils.get_int(d);CMSExtraUtil.show_form(ManagePayment);var e=ManagePayment.form_div;var a=ManagePaymentForm.get_form_properties().get_form_div();var b={cont_div:e,form_div:a,form_action:g_request_url+"?action=update_payment",complete_callback:ManagePaymentForm.callback,cancel_callback:ManagePaymentForm.cancel,prepare_func:ManagePaymentForm.prepare,post_func:ManagePaymentForm.post_edit,post_args:d,validate_func:ManagePaymentForm.validate,validate_notes_func:ManagePaymentForm.validate_notes};CMSUtil.create_form(b)}catch(c){console.error("Error in : ManagePaymentForm - edit :["+c+"]")}};ManagePaymentForm.view=function(c){try{c=Utils.get_int(c);var a=ManagePaymentForm.get_object(c);var d=ManagePaymentForm.get_form_properties().get_preview_div();d.find("div[name=payment_id]").html(a.payment_id);d.find("div[name=amount]").html(a.amount);d.find("div[name=status]").html(ManagePaymentOutput.get_status(a.status));d.find("div[name=date]").html(a.date);d.find("div[name=tnx_id]").html(a.tnx_id);d.find("div[name=user_id]").val(a.user);d.find("div[name=product_id]").val(ManagePaymentOutput.get_product(a.product_ar,a.product_en));CPopup.display($("<div></div>").append(d).html(),"Payment Info")}catch(b){console.error("Error in : ManagePaymentForm - view :["+b+"]")}};ManagePaymentForm.remove=function(b){try{CMSExtraUtil.delete_popup(function(){var c=ManagePayment.list_div;var d="action=remove_payment&payment_id="+b;RequestUtil.quick_post_request(c,d,ManagePaymentForm.callback)})}catch(a){console.error("Error in : ManagePaymentForm - delete :["+a+"]")}};ManagePaymentForm.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.error("Error in : ManagePaymentForm - print :["+b+"]")}};ManagePaymentForm.prepare=function(a){try{a.find("select[name=status]").html(ManagePaymentForm.get_status_select());a.find("input[name=user_id]").val(ManagePayment.user_id);a.find("input[name=product_id]").val(ManagePayment.product_id)}catch(b){console.error("Error in : ManagePaymentForm - prepare form :["+b+"]")}};ManagePaymentForm.post_edit=function(e){try{var a=ManagePaymentForm.get_object(e);var b=ManagePayment.form_div;var c=b.find("form");c.find("input[name=payment_id]").val(a.payment_id);c.find("input[name=amount]").val(a.amount);c.find("select[name=status]").find("option[value="+a.status+"]").attr("selected",true);c.find("input[name=date]").val(a.date);c.find("input[name=tnx_id]").val(a.tnx_id);c.find("input[name=user_id]").val(a.user_id);c.find("input[name=product_id]").val(a.product_id)}catch(d){console.error("Error in : ManagePaymentForm - post edit :["+d+"]")}};ManagePaymentForm.validate=function(b){var d=0;try{b.find(".error").html("");b.find("*").removeClass("required");var a=null;if(d>0){console.log("validate found : "+d+" errors")}}catch(c){console.error("Error in : ManagePaymentForm - validate form :["+c+"]")}return d};ManagePaymentForm.validate_notes=function(c){try{c.find(".error").html("").remove();var a="";var b=null;c.append('<div class="clearfix"></div>');c.append('<div class="error alert-error">'+a+"</div>")}catch(d){console.error("Error in : ManagePaymentForm - show validate notes :["+d+"]")}};ManagePaymentForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}ManagePaymentList.load();$("body").trigger("payments_updated")}catch(c){console.error("Error in : ManagePaymentForm - callback :["+c+"]")}};ManagePaymentForm.cancel=function(){try{ManagePaymentList.load()}catch(a){console.error("Error in : ManagePaymentForm - cancel :["+a+"]")}};ManagePaymentForm.get_object=function(e){var a=null;try{var d=ManagePaymentList.array;for(var b=0;b<d.length;b++){if(d[b].payment_id==e){a=d[b];break}}}catch(c){console.error("Error in : ManagePaymentForm - get object :["+c+"]")}return a};ManagePaymentForm.get_status_select=function(){var a="";a+='<option value="-1">Please select status</option><option value="'+ManagePayment.STATUS_NO_ACTION+'">'+CDictionary.get_text("PaymentForm_Status_NoAction_lbl")+'</option><option value="'+ManagePayment.STATUS_NOT_COMPLETED+'">'+CDictionary.get_text("PaymentForm_Status_NotCompleted_lbl")+'</option><option value="'+ManagePayment.STATUS_COMPLETED+'">'+CDictionary.get_text("PaymentForm_Status_Completed_lbl")+"</option>";return a};function ManagePaymentOutput(){}ManagePaymentOutput.get_id=function(a){return number_pad(a,6)};ManagePaymentOutput.get_status=function(b){var a="";b=Utils.get_int(b);switch(b){case ManagePayment.STATUS_NO_ACTION:a=CDictionary.get_text("PaymentForm_Status_NoAction_lbl");break;case ManagePayment.STATUS_NOT_COMPLETED:a=CDictionary.get_text("PaymentForm_Status_NotCompleted_lbl");break;case ManagePayment.STATUS_COMPLETED:a=CDictionary.get_text("PaymentForm_Status_Completed_lbl");break}return a};ManagePaymentOutput.get_product=function(b,c){var a="";a=(CDictionary.lang=="ar")?b:c;return a};

    /*! wished items */
    function ManageWishedItem(){}ManageWishedItem.STATUS_NO_ACTION=0;ManageWishedItem.STATUS_NOT_COMPLETED=1;ManageWishedItem.STATUS_COMPLETED=2;ManageWishedItem.init=function(a){try{ManageWishedItem.user_id=Utils.get_int(a);ManageWishedItem.user_id=(ManageWishedItem.user_id>0)?ManageWishedItem.user_id:0;var b=$("#body").find("#menu");var f=$("#body").find("#content");b.find("a").removeClass();b.find("a[data-module=items]").addClass("active");f.html("");f.append('<div class="controls clearfix"><div class="top_label_main" onclick="return false;">'+CDictionary.get_text("WishedItems_lbl")+'</div><div class="top_button" onclick="ManageWishedItemForm.add(); return false;"><i class="fa fa-plus-square" aria-hidden="true"></i>'+CDictionary.get_text("New_lbl")+'</div><div class="top_button" onclick="ManageWishedItemForm.search(); return false;"><i class="fa fa-search" aria-hidden="true"></i>'+CDictionary.get_text("Search_lbl")+"</div></div>");f.append('<div class="clearfix"></div>');f.append('<div id="show-area" class="clearfix"><div id="form"></div><div id="list"></div></div>');var d=f.find("#form");var c=f.find("#list");ManageWishedItem.form_div=d;ManageWishedItem.list_div=c;ManageWishedItemList.load()}catch(e){console.error("Error in : ManageWishedItem - init : ["+e+"]")}};function ManageWishedItemList(){}ManageWishedItemList.index=0;ManageWishedItemList.count=10;ManageWishedItemList.load=function(b,d){try{CMSExtraUtil.show_list(ManageWishedItem);var a=ManageWishedItem.list_div;b=(b===undefined)?ManageWishedItemList.index:Utils.get_int(b);d=(d===undefined)?ManageWishedItemList.count:Utils.get_int(d);ManageWishedItemList.index=b;ManageWishedItemList.count=d;var e="action=wished_items&index="+b+"&count="+d;RequestUtil.quick_post_request(a,e,function(h){try{var f=h.status;if(f>0){var g=h.wished_items;var j=h.wished_items_count;ManageWishedItemList.display_list(g,j,CMSUtil.PAGINATION_LIST)}}catch(i){console.error("error in request :["+i+"]")}})}catch(c){console.error("Error in : ManageWishedItemList - load :["+c+"]")}};ManageWishedItemList.search=function(b,d){try{CMSExtraUtil.show_list(ManageWishedItem);var a=ManageWishedItem.list_div;ManageWishedItemList.index=Utils.get_int(b);ManageWishedItemList.count=Utils.get_int(d);ManageWishedItemList.count=(ManageWishedItemList.count>0)?ManageWishedItemList.count:10;var e=ManageWishedItemList.search_object;e.index=ManageWishedItemList.index;e.count=ManageWishedItemList.count;RequestUtil.quick_post_request(a,e,function(h){try{var f=h.status;if(f>0){var g=h.items;var j=h.items_count;ManageWishedItemList.display_list(g,j,CMSUtil.PAGINATION_SEARCH)}}catch(i){console.error("error in request :["+i+"]")}})}catch(c){console.error("Error in : ManageWishedItemList - search :["+c+"]")}};ManageWishedItemList.display_list=function(h,i,a){try{ManageWishedItemList.array=h;var b=ManageWishedItem.list_div;var f=CDictionary.get_labels(["WishItemList_ItemId_lbl","WishItemList_Count_lbl","WishItemList_Date_lbl","WishItemList_Product_lbl","WishItemList_User_lbl"]);var g=["ManageWishedItemOutput.get_id(item_id)","count","date","ManageWishedItemOutput.get_product(product_ar,product_en)","user"];var c="item_id";CMSUtil.show_list(b,f,g,h,c,"ManageWishedItemForm.edit","ManageWishedItemForm.remove","ManageWishedItemForm.view");var d=(a===CMSUtil.PAGINATION_SEARCH)?"ManageWishedItemList.search":"ManageWishedItemList.load";CMSUtil.show_pagination(b,d,[],i,ManageWishedItemList.index,ManageWishedItemList.count,(ManageWishedItemList.count*10));Utils.scroll_to_element(b,300)}catch(e){console.error("Error in : ManageWishedItemList - display list :["+e+"]")}};function ManageWishedItemForm(){}ManageWishedItemForm.import_form=function(){try{CMSExtraUtil.show_form(ManageWishedItem);var d=ManageWishedItem.form_div;var a=CForm.get_form_div_from_tpl(g_template_url+"?tpl=import_form");var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=import_form_items",complete_callback:ManageWishedItemForm.callback,prepare_func:null,animated:true};CMSUtil.create_form(b);a.find("input[name=download]").click(function(){window.location=g_request_url+"?action=export_items_sample"})}catch(c){console.error("Error in : ManageWishedItemForm - import_form :["+c+"]")}};ManageWishedItemForm.export_form=function(){try{var c=ManageWishedItemList.search_object;if(c===null){c={}}var a=Math.floor(Math.random()*1000);var c="action=export_items&item_id="+Utils.get_int(c.item_id)+"&title="+get_string(c.title)+"&date="+get_string(c.date)+"&status="+Utils.get_int(c.status)+"&seqId="+a;window.location=g_request_url+"?"+c}catch(b){console.error("Error in : ManageWishedItemForm - export :["+b+"]")}};ManageWishedItemForm.get_form_properties=function(){var d={};try{var a="wished_item";var c={name:a,params:[{name:"date",type:"date",format:"yy-mm-dd",label:CDictionary.get_text("WishedItemForm_Date_lbl")+":"},{name:"count",type:"text",label:CDictionary.get_text("WishedItemForm_Count_lbl")+":"},{type:"seprator",label:""},{name:"product_id",type:"div",label:CDictionary.get_text("WishedItemForm_ProductId_lbl")+":"},{name:"user_id",type:"div",label:CDictionary.get_text("WishedItemForm_UserId_lbl")+":"},{type:"seprator",label:""},{name:"product_id",type:"hidden",label:"",ignore_preview:true},{name:"user_id",type:"hidden",label:"",ignore_preview:true},{name:"item_id",type:"hidden",label:"",ignore_preview:true}],action:"",method:"post",enctype:"multipart/form-data",style:"style1"};d=new CForm(c)}catch(b){console.error("Error in : ManageWishedItemForm - get form properties :["+b+"]")}return d};ManageWishedItemForm.search=function(){try{var a=ManageWishedItem.list_div;var c=ManageWishedItem.form_div;$(a).fadeIn(1000);$(c).fadeIn(1000);c.html("");var b=TplUtil.get_hidden_div("item_search_tpl",true);c.append(b);c.find("select[name=country]").html(ManageWishedItemForm.get_country_select());c.find("select[name=status]").html(ManageWishedItemForm.get_rule_select());c.find("input[type=submit]").click(function(f){try{f.preventDefault();var g={action:"search_items",cvc:c.find("input[name=cvc]").val(),name:c.find("input[name=name]").val(),number:c.find("input[name=number]").val(),type:c.find("select[name=type]").val(),graduation_date:c.find("input[name=graduation_date]").val(),qr_key:c.find("input[name=qr_key]").val(),country:c.find("select[name=country]").val()};ManageWishedItemList.search_object=g;ManageWishedItemList.search(0,ManageWishedItemList.count);return false}catch(e){console.error("Error in : ManageOrganizationForm - search - submit : ["+e+"]")}});c.find("input[type=reset]").click(function(f){try{f.preventDefault();c.find("form").get(0).reset();c.hide().fadeOut(1000)}catch(e){console.error("Error in : ManageOrganizationForm - search - reset : ["+e+"]")}})}catch(d){console.error("Error in : ManageOrganizationForm - add :["+d+"]")}};ManageWishedItemForm.add=function(){try{CMSExtraUtil.show_form(ManageWishedItem);var d=ManageWishedItem.form_div;var a=ManageWishedItemForm.get_form_properties().get_form_div();var b={cont_div:d,form_div:a,form_action:g_request_url+"?action=add_wished_item",complete_callback:ManageWishedItemForm.callback,cancel_callback:ManageWishedItemForm.cancel,prepare_func:ManageWishedItemForm.prepare,validate_func:ManageWishedItemForm.validate,validate_notes_func:ManageWishedItemForm.validate_notes};CMSUtil.create_form(b)}catch(c){console.error("Error in : ManageWishedItemForm - add :["+c+"]")}};ManageWishedItemForm.edit=function(a){try{a=Utils.get_int(a);CMSExtraUtil.show_form(ManageWishedItem);var e=ManageWishedItem.form_div;var b=ManageWishedItemForm.get_form_properties().get_form_div();var c={cont_div:e,form_div:b,form_action:g_request_url+"?action=update_wished_item",complete_callback:ManageWishedItemForm.callback,cancel_callback:ManageWishedItemForm.cancel,prepare_func:ManageWishedItemForm.prepare,post_func:ManageWishedItemForm.post_edit,post_args:a,validate_func:ManageWishedItemForm.validate,validate_notes_func:ManageWishedItemForm.validate_notes};CMSUtil.create_form(c)}catch(d){console.error("Error in : ManageWishedItemForm - edit :["+d+"]")}};ManageWishedItemForm.view=function(a){try{a=Utils.get_int(a);var c=ManageWishedItemForm.get_object(a);var d=ManageWishedItemForm.get_form_properties().get_preview_div();d.find("div[name=item_id]").html(c.item_id);d.find("div[name=date]").html(c.date);d.find("div[name=count]").html(c.count);d.find("div[name=user_id]").val(c.user);d.find("div[name=product_id]").val(ManageWishedItemOutput.get_product(c.product_ar,c.product_en));CPopup.display($("<div></div>").append(d).html(),"Wished Item Info")}catch(b){console.error("Error in : ManageWishedItemForm - view :["+b+"]")}};ManageWishedItemForm.remove=function(a){try{CMSExtraUtil.delete_popup(function(){var c=ManageWishedItem.list_div;var d="action=remove_wished_item&item_id="+a;RequestUtil.quick_post_request(c,d,ManageWishedItemForm.callback)})}catch(b){console.error("Error in : ManageWishedItemForm - delete :["+b+"]")}};ManageWishedItemForm.print=function(a){try{CMSExtraUtil.print_div_popup(a.html(),"",950,700)}catch(b){console.error("Error in : ManageWishedItemForm - print :["+b+"]")}};ManageWishedItemForm.prepare=function(a){try{a.find("select[name=status]").html(ManageWishedItemForm.get_status_select());a.find("input[name=user_id]").val(ManageWishedItem.user_id);a.find("input[name=user_id]").val(ManageWishedItem.user_id)}catch(b){console.error("Error in : ManageWishedItemForm - prepare form :["+b+"]")}};ManageWishedItemForm.post_edit=function(b){try{var e=ManageWishedItemForm.get_object(b);var a=ManageWishedItem.form_div;var c=a.find("form");c.find("input[name=item_id]").val(e.item_id);c.find("input[name=date]").val(e.date);c.find("input[name=count]").val(e.count);c.find("input[name=user_id]").val(e.user);c.find("input[name=product_id]").val(ManageWishedItemOutput.get_product(e.product_ar,e.product_en));c.find("div[name=user_id]").html(e.user);c.find("div[name=product_id]").html(ManageWishedItemOutput.get_product(e.product_ar,e.product_en))}catch(d){console.error("Error in : ManageWishedItemForm - post edit :["+d+"]")}};ManageWishedItemForm.validate=function(b){var d=0;try{b.find(".error").html("");b.find("*").removeClass("required");var a=null;if(d>0){console.log("validate found : "+d+" errors")}}catch(c){console.error("Error in : ManageWishedItemForm - validate form :["+c+"]")}return d};ManageWishedItemForm.validate_notes=function(c){try{c.find(".error").html("").remove();var a="";var b=null;c.append('<div class="clearfix"></div>');c.append('<div class="error alert-error">'+a+"</div>")}catch(d){console.error("Error in : ManageWishedItemForm - show validate notes :["+d+"]")}};ManageWishedItemForm.callback=function(b){try{var a=b.status;if(a>0){CMSExtraUtil.show_success(CDictionary.get_text("CommonCallback_Success_Title_lbl"))}else{CMSExtraUtil.show_error(CDictionary.get_text("CommonCallback_Failed_Title_lbl"),CDictionary.get_text("CommonCallback_Failed_Title_lbl"))}ManageWishedItemList.load();$("body").trigger("items_updated")}catch(c){console.error("Error in : ManageWishedItemForm - callback :["+c+"]")}};ManageWishedItemForm.cancel=function(){try{ManageWishedItemList.load()}catch(a){console.error("Error in : ManageWishedItemForm - cancel :["+a+"]")}};ManageWishedItemForm.get_object=function(b){var a=null;try{var e=ManageWishedItemList.array;for(var c=0;c<e.length;c++){if(e[c].item_id==b){a=e[c];break}}}catch(d){console.error("Error in : ManageWishedItemForm - get object :["+d+"]")}return a};function ManageWishedItemOutput(){}ManageWishedItemOutput.get_id=function(a){return number_pad(a,6)};ManageWishedItemOutput.get_product=function(b,c){var a="";a=(CDictionary.lang=="ar")?b:c;return a};

} catch( err ) {
    console.error("Error in : manage combined ["+err+"]");
}